import{_ as i,o as c,c as p,a as n,b as e,d as a,e as t,f as o,r as l}from"./app.87197fef.js";const r={},d=n("h2",{id:"package-modifying-text",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#package-modifying-text","aria-hidden":"true"},"#"),e(" Package: Modifying Text")],-1),u={href:"https://en.wikipedia.org/wiki/ASCII_art",target:"_blank",rel:"noopener noreferrer"},k=n("pre",null,`                                     o888
    ooooooo     ooooooo     ooooooo   888
  888     888 888     888 888     888 888
  888         888     888 888     888 888
    88ooo888    88ooo88     88ooo88  o888o

`,-1),h=n("p",null,"This should demonstrate how to do basic text manipulation in the current text buffer and how to deal with selections.",-1),m=n("p",null,"The final package can be viewed at https://github.com/pulsar-edit/ascii-art.",-1),v=n("h3",{id:"basic-text-insertion",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#basic-text-insertion","aria-hidden":"true"},"#"),e(" Basic Text Insertion")],-1),g=n("strong",null,[n("em",null,"LNX/WIN")],-1),b=n("kbd",null,"Ctrl+Shift+P",-1),w=n("strong",null,[n("em",null,"MAC")],-1),f=n("kbd",null,"Cmd+Shift+P",-1),y={href:"https://github.com/pulsar-edit/command-palette",target:"_blank",rel:"noopener noreferrer"},_=n("a",{href:"#package-generator"},"the section on package generation",-1),x=n("code",null,"ascii-art",-1),q=o(`<p>Now let&#39;s edit the package files to make our ASCII Art package do something interesting. Since this package doesn&#39;t need any UI, we can remove all view-related code so go ahead and delete <code>lib/ascii-art-view.js</code>, <code>spec/ascii-art-view-spec.js</code>, and <code>styles/</code>.</p><p>Next, open up <code>lib/ascii-art.js</code> and remove all view code, so it looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CompositeDisposable <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;atom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">subscriptions</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

	<span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeDisposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
			atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-workspace&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;ascii-art:convert&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Convert text!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="create-a-command" tabindex="-1"><a class="header-anchor" href="#create-a-command" aria-hidden="true">#</a> Create a Command</h4><p>Now let&#39;s add a command. You should namespace your commands with the package name followed by a <code>:</code> and then the name of the command. As you can see in the code, we called our command <code>ascii-art:convert</code> and we will define it to call the <code>convert()</code> method when it&#39;s executed.</p><p>So far, that will simply log to the console. Let&#39;s start by making it insert something into the text buffer.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    editor<span class="token punctuation">.</span><span class="token function">insertText</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, World!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As in <a href="#counting-the-words">Counting Words</a>, we&#39;re using <code>atom.workspace.getActiveTextEditor()</code> to get the object that represents the active text editor. If this <code>convert()</code> method is called when not focused on a text editor, nothing will happen.</p>`,8),T={href:"https://atom.io/docs/api/latest/TextEditor#instance-insertText",target:"_blank",rel:"noopener noreferrer"},A=n("code",null,"insertText()",-1),C=o(`<h4 id="reload-the-package" tabindex="-1"><a class="header-anchor" href="#reload-the-package" aria-hidden="true">#</a> Reload the Package</h4><p>Before we can trigger <code>ascii-art:convert</code>, we need to load the latest code for our package by reloading the window. Run the command &quot;Window: Reload&quot; from the Command Palette or by pressing <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+F5</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd></p><h4 id="trigger-the-command" tabindex="-1"><a class="header-anchor" href="#trigger-the-command" aria-hidden="true">#</a> Trigger the Command</h4><p>Now open the Command Palette and search for the <code>Ascii Art: Convert</code> command. But it&#39;s not there! To fix this, open <code>package.json</code> and find the property called <code>activationCommands</code>. Activation commands make Pulsar launch faster by allowing Pulsar to delay a package&#39;s activation until it&#39;s needed. So remove the existing command and use <code>ascii-art:convert</code> in <code>activationCommands</code>:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;activationCommands&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;atom-workspace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ascii-art:convert&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>First, reload the window by running the command &quot;Window: Reload&quot; from the command palette. Now when you run the <code>Ascii Art: Convert</code> command it will insert &quot;Hello, World!&quot; into the active editor, if any.</p><h4 id="add-a-key-binding" tabindex="-1"><a class="header-anchor" href="#add-a-key-binding" aria-hidden="true">#</a> Add a Key Binding</h4><p>Now let&#39;s add a key binding to trigger the <code>ascii-art:convert</code> command. Open <code>keymaps/ascii-art.json</code> and add a key binding linking <kbd>Alt+Ctrl+A</kbd> to the <code>ascii-art:convert</code> command. You can delete the pre-existing key binding since you won&#39;t need it anymore.</p><p>When finished, the file should look like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;atom-text-editor&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;ctrl-alt-a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ascii-art:convert&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now reload the window and verify that the key binding works.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The Pulsar keymap system is <em>case-sensitive</em>. This means that there is a distinction between <code>a</code> and <code>A</code> when creating keybindings. <code>a</code> means that you want to trigger the keybinding when you press <kbd>A</kbd>. But <code>A</code> means that you want to trigger the keybinding when you press <kbd>Shift+A</kbd>. You can also write <code>shift-a</code> when you want to trigger the keybinding when you press <kbd>Shift+A</kbd>.</p><p>We <strong>strongly</strong> recommend always using lowercase and explicitly spelling out when you want to include <kbd>Shift</kbd> in your keybindings.</p></div><h3 id="add-the-ascii-art" tabindex="-1"><a class="header-anchor" href="#add-the-ascii-art" aria-hidden="true">#</a> Add the ASCII Art</h3>`,13),j={href:"https://npmjs.org/package/figlet",target:"_blank",rel:"noopener noreferrer"},I={href:"https://npmjs.org/",target:"_blank",rel:"noopener noreferrer"},N=n("code",null,"package.json",-1),S=o(`<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;figlet&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.8&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After saving the file, run the command <code>Update Package Dependencies: Update</code> from the Command Palette. This will install the package&#39;s node module dependencies, only figlet in this case. You will need to run <code>Update Package Dependencies: Update</code> whenever you update the dependencies field in your <code>package.json</code> file.</p><p>If for some reason this doesn&#39;t work, you&#39;ll see a message saying &quot;Failed to update package dependencies&quot; and you will find a new <code>npm-debug.log</code> file in your directory. That file should give you some idea as to what went wrong.</p><p>Now require the figlet node module in <code>lib/ascii-art.js</code> and instead of inserting &quot;Hello, World!&quot;, convert the selected text to ASCII art.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">convert</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> selection <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getSelectedText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> figlet <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;figlet&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> font <span class="token operator">=</span> <span class="token string">&#39;o8&#39;</span>
    <span class="token function">figlet</span><span class="token punctuation">(</span>selection<span class="token punctuation">,</span> <span class="token punctuation">{</span>font<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> art</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        editor<span class="token punctuation">.</span><span class="token function">insertText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>art<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now reload the editor, select some text in an editor window and press <kbd>Alt+Ctrl+A</kbd>. It should be replaced with a ridiculous ASCII art version instead.</p>`,6),P={href:"https://atom.io/docs/api/latest/TextEditor#instance-getSelectedText",target:"_blank",rel:"noopener noreferrer"},W=n("code",null,"editor.getSelectedText()",-1),E={href:"https://atom.io/docs/api/latest/TextEditor#instance-insertText",target:"_blank",rel:"noopener noreferrer"},B=n("code",null,"editor.insertText()",-1),O=n("h3",{id:"summary",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#summary","aria-hidden":"true"},"#"),e(" Summary")],-1),R=n("p",null,"In this section, we've made a UI-less package that takes selected text and replaces it with a processed version. This could be helpful in creating linters or checkers for your code.",-1);function D(L,U){const s=l("ExternalLinkIcon");return c(),p("div",null,[d,n("p",null,[e("Now that we have our first package written, let's go through examples of other types of packages we can make. This section will guide you though creating a simple command that replaces the selected text with "),n("a",u,[e("ascii art"),a(s)]),e('. When you run our new command with the word "cool" selected, it will be replaced with:')]),k,h,m,v,n("p",null,[e("To begin, press "),g,e(": "),b,e(" - "),w,e(": "),f,e(" to bring up the "),n("a",y,[e("Command Palette"),a(s)]),e('. Type "generate package" and select the "Package Generator: Generate Package" command, just as we did in '),_,e(". Enter "),x,e(" as the name of the package.")]),q,n("p",null,[e("Next we insert a string into the current text editor with the "),n("a",T,[A,a(s)]),t("TODO: Replace with API link once documented)"),e(' method. This will insert the text wherever the cursor currently is in the current editor. If there are selections, it will replace all selections with the "Hello, World!" text.')]),C,n("p",null,[e("Now we need to convert the selected text to ASCII art. To do this we will use the "),n("a",j,[e("figlet"),a(s)]),e(" Node module from "),n("a",I,[e("npm"),a(s)]),e(". Open "),N,e(" and add the latest version of figlet to the dependencies:")]),S,n("p",null,[e("There are a couple of new things in this example we should look at quickly. The first is the "),n("a",P,[W,a(s)]),t("TODO: Replace with API link once documented)"),e(" which, as you might guess, returns the text that is currently selected.")]),n("p",null,[e("We then call the Figlet code to convert that into something else and replace the current selection with it with the "),n("a",E,[B,a(s)]),t("TODO: Replace with API link once documented)"),e(" call.")]),O,R])}const F=i(r,[["render",D],["__file","package-modifying-text.html.vue"]]);export{F as default};
