import{_ as m,a as k,b as g,c as v,d as b,e as f}from"./spec-suite.8f5e854d.js";import{_ as h}from"./dev-tools.1b7b2813.js";import{_ as y,a as w,b as _}from"./theme-side-by-side.33cf8d5d.js";import{_ as x}from"./iconography.bf3cea92.js";import{_ as q,a as P,b as T,c as C,d as I,e as S,f as j,g as A,h as N,i as R}from"./cpu-profile-done.c24435bc.js";import{_ as M,o as L,c as W,a as e,b as n,d as a,w as o,e as i,f as t,r as d}from"./app.87197fef.js";const O={},U=e("div",{class:"custom-container warning"},[e("p",{class:"custom-container-title"},"Under Construction"),e("p",null,[n("This document is under construction, please check back soon for updates. Please see "),e("a",{href:"/docs/community"},"our socials"),n(" and feel free to ask for assistance or inquire as to the status of this document.")])],-1),E={href:"https://github.com/pulsar-edit/tree-view",target:"_blank",rel:"noopener noreferrer"},F={href:"https://github.com/pulsar-edit/command-palette",target:"_blank",rel:"noopener noreferrer"},D={href:"https://github.com/pulsar-edit/find-and-replace",target:"_blank",rel:"noopener noreferrer"},Y=t('<p>In this section, we&#39;re going to learn how to extend the functionality of Pulsar through writing packages. This will be everything from new user interfaces to new language grammars to new themes. We&#39;ll learn this by writing a series of increasingly complex packages together, introducing you to new APIs and tools and techniques as we need them.</p><p>First though we will look at how to build the editor itself from source.</p><p>If you&#39;re looking for an example or specific section using a specific API or feature, you can check below for an index to this section and skip right to it.</p><details class="custom-container details"><summary>Sections</summary><ul><li><a href="#building-pulsar">Building Pulsar</a></li><li><a href="#using-ppm">Using PPM</a></li><li><a href="#hacking-on-the-core">Hacking on the core</a></li><li><a href="#tools-of-the-trade">Tools of the trade</a></li><li><a href="#the-init-file">The init file</a></li><li><a href="#package-word-count">Package: Word Count</a></li><li><a href="#package-modifying-text">Package: Modifying Text</a></li><li><a href="#package-active-editor-info">Package: Active Editor Info</a></li><li><a href="#creating-a-theme">Creating a theme</a></li><li><a href="#creating-a-grammar">Creating a Grammar</a></li><li><a href="#reating-a-legacy-textmate-grammar">Creating a legacy Textmate grammar</a></li><li><a href="#converting-from-textmate">Converting from Textmate</a></li><li><a href="#publishing">Publishing</a></li><li><a href="#iconography">Iconography</a></li><li><a href="#debugging">Debugging</a></li><li><a href="#writing-specs">Writing specs</a></li><li><a href="#handling-uris">Handling URIs</a></li><li><a href="#cross-platform-compatibility">Cross-platform compatibility</a></li><li><a href="#contributing-to-official-pulsar-packages">Contributing to official Pulsar packages</a></li><li><a href="#creating-a-fork-of-a-core-package">Creating a fork of a core package</a></li><li><a href="#maintaining-a-fork-of-a-core-package">Maintaining a fork of a core package</a></li><li><a href="#having-trouble">Help</a></li></ul></details><h2 id="building-pulsar" tabindex="-1"><a class="header-anchor" href="#building-pulsar" aria-hidden="true">#</a> Building Pulsar</h2><p>If you want to investigate a bug, implement a new feature in Pulsar&#39;s core or just want to tinker then you will need to build and run Pulsar from source.</p>',6),z={href:"https://github.com/pulsar-edit/pulsar",target:"_blank",rel:"noopener noreferrer"},V=e("h3",{id:"requirements-and-dependencies",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#requirements-and-dependencies","aria-hidden":"true"},"#"),n(" Requirements and dependencies")],-1),H=e("p",null,"To build Pulsar you will need to meet some basic requirements:",-1),G={href:"https://github.com/pulsar-edit/pulsar/blob/master/.nvmrc",target:"_blank",rel:"noopener noreferrer"},$={href:"https://github.com/nvm-sh/nvm",target:"_blank",rel:"noopener noreferrer"},B=e("li",null,[n("yarn (enable with "),e("code",null,"corepack enable"),n(")")],-1),X=e("li",null,"Git",-1),J=e("li",null,"Python",-1),K=e("li",null,"C++ toolchain",-1),Z={href:"https://wiki.gnome.org/Projects/Libsecret",target:"_blank",rel:"noopener noreferrer"},Q=e("p",null,"For OS or distribution specific instructions see below:",-1),ee=e("h4",{id:"ubuntu-debian",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ubuntu-debian","aria-hidden":"true"},"#"),n(" Ubuntu/Debian")],-1),ne=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token comment"},"# Install development packages"),n(`
`),e("span",{class:"token function"},"apt"),n(),e("span",{class:"token function"},"install"),n(` build-essential libxkbfile-dev libsecret-1-dev libx11-dev
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),ae=e("h4",{id:"fedora-rhel",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#fedora-rhel","aria-hidden":"true"},"#"),n(" Fedora/RHEL")],-1),se=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token comment"},"# Install development packages"),n(`
dnf `),e("span",{class:"token parameter variable"},"--assumeyes"),n(),e("span",{class:"token function"},"install"),n(),e("span",{class:"token function"},"make"),n(` gcc gcc-c++ glibc-devel git-core libsecret-devel rpmdevtools libX11-devel libxkbfile-devel nss atk gdk-pixbuf2 gtk3 mesa-dri-drivers
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),te=e("h4",{id:"arch",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#arch","aria-hidden":"true"},"#"),n(" Arch")],-1),oe=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token comment"},"# Install the development packges"),n(`
pacman `),e("span",{class:"token parameter variable"},"-S"),n(` base-devel libxkbfile libsecret libx11 libxcrypt-compat
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),ie=e("h4",{id:"opensuse",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#opensuse","aria-hidden":"true"},"#"),n(" OpenSUSE")],-1),le=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token comment"},"# Install development packages"),n(`
`),e("span",{class:"token function"},"zypper"),n(),e("span",{class:"token keyword"},"in"),n(),e("span",{class:"token parameter variable"},"-t"),n(` pattern devel_basis
`),e("span",{class:"token function"},"zypper"),n(),e("span",{class:"token keyword"},"in"),n(` libX11-devel libxkbfile-devel libsecret-devel
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),re=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,`TODO
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),pe={href:"https://visualstudio.microsoft.com/downloads/",target:"_blank",rel:"noopener noreferrer"},ce=t(`<h3 id="building-and-running-the-application" tabindex="-1"><a class="header-anchor" href="#building-and-running-the-application" aria-hidden="true">#</a> Building and running the application</h3><p>To build the application so you can start hacking on the core you will need to download the source code to your local machine and <code>cd</code> to the pulsar directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/pulsar-edit/pulsar.git <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> pulsar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),ue=e("code",null,"nvm",-1),de=e("code",null,"yarn",-1),he={href:"https://github.com/pulsar-edit/pulsar/blob/master/.nvmrc",target:"_blank",rel:"noopener noreferrer"},me=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>nvm <span class="token function">install</span>
corepack <span class="token builtin class-name">enable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>If Node.js is already installed, run the following to make sure the correct version of Node.js is being used (see <a href="#requirements-and-dependencies">requirements</a>):</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>nvm use
<span class="token function">node</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Run the following to initialize and update the submodules:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> submodule init <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> submodule update
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Now install and build Pulsar &amp; ppm:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">install</span>
<span class="token function">yarn</span> build
<span class="token function">yarn</span> build:apm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Start Pulsar!</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>These instructions will also build <code>ppm</code> (Pulsar Package Manager) but it will require some <a href="#using-ppm-pulsar-package-manager">additional configuration</a> for use.</p><h3 id="building-binaries" tabindex="-1"><a class="header-anchor" href="#building-binaries" aria-hidden="true">#</a> Building binaries</h3><p>The following will allow you to build Pulsar as a stand alone binary or installer. After running you will find your your built application in <code>pulsar/binaries</code>.</p><p>The build script will automatically build for your system&#39;s CPU architecture, for example building on an <code>x86_64</code> CPU will produce binaries for <code>x86_64</code>, building on <code>arm64</code> will only produce binaries for <code>arm64</code>.</p><p>It is not possible to &quot;cross-build&quot; for different OSs. For Linux binaries you must build from a Linux machine, macOS binaries must be built from macOS etc. Your OS is detected automatically and the script will build the correct binaries for it.</p>`,14),ke=e("p",null,[n("By default running "),e("code",null,"yarn dist"),n(" will attempt to create "),e("code",null,"appimage"),n(" (for most Linux distributions), "),e("code",null,"deb"),n(" (for Debian or Ubuntu based distributions) and "),e("code",null,"rpm"),n(" (for Red Hat or Fedora based distributions) binaries but you can select the actual target you want to build by appending the above targets to the command. e.g.:")],-1),ge=e("ul",null,[e("li",null,[e("code",null,"yarn dist appimage")]),e("li",null,[e("code",null,"yarn dist deb")]),e("li",null,[e("code",null,"yarn dist rpm")]),e("li",null,[e("code",null,"yarn dist targz")])],-1),ve=e("p",null,[e("code",null,"yarn dist"),n(" will create a "),e("code",null,"dmg"),n(" installer, there are currently no additional targets for macOS.")],-1),be=e("p",null,"As noted above this builds for your current CPU architecture. i.e. on an Intel Mac this will create Intel binaries, on Apple silicon (M1, M2 etc.) this will create Apple silicon binaries.",-1),fe=e("p",null,[n("By default running "),e("code",null,"yarn dist"),n(" will attempt to create an "),e("code",null,"NSIS"),n(" installer as well as a "),e("code",null,"Portable"),n(" executable which does not require installation. If you only wish to build one then you can specify it by appending the above targets to the command e.g.:")],-1),ye=e("ul",null,[e("li",null,[e("code",null,"yarn dist nsis")]),e("li",null,[e("code",null,"yarn dist portable")])],-1),we=e("h2",{id:"using-ppm-pulsar-package-manager",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#using-ppm-pulsar-package-manager","aria-hidden":"true"},"#"),n(" Using ppm (Pulsar Package Manager)")],-1),_e=e("p",null,[e("code",null,"ppm"),n(" is used for installing and managing Pulsar's packages in much the same way that "),e("code",null,"apm"),n(" did on Atom. However at this point in the project there are a few hoops you have to jump through to get it to work correctly.")],-1),xe=e("p",null,[n("After following the build instructions you will find the "),e("code",null,"ppm"),n(" binary at "),e("code",null,"pulsar/ppm/bin/apm"),n(" but by default Pulsar will be looking in the wrong place. There will also be issues relating to the Electron version which will prevent install from the package backend. To solve this a couple of environmental variables need to be exported.")],-1),qe=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token builtin class-name"},"export"),n(),e("span",{class:"token assign-left variable"},"ATOM_HOME"),e("span",{class:"token operator"},"="),n("/home/"),e("span",{class:"token operator"},"<"),n("user"),e("span",{class:"token operator"},">"),n(`/.pulsar
`),e("span",{class:"token builtin class-name"},"export"),n(),e("span",{class:"token assign-left variable"},"APM_PATH"),e("span",{class:"token operator"},"="),n(`/ppm/bin/apm
`),e("span",{class:"token builtin class-name"},"export"),n(),e("span",{class:"token assign-left variable"},"ATOM_ELECTRON_VERSION"),e("span",{class:"token operator"},"="),e("span",{class:"token number"},"12.2"),n(`.3
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),Pe=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,`TODO
`)]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),Te=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[e("span",{class:"token builtin class-name"},"set"),n(),e("span",{class:"token assign-left variable"},"ATOM_HOME"),e("span",{class:"token operator"},"="),n("C:"),e("span",{class:"token punctuation"},"\\"),n("Users"),e("span",{class:"token punctuation"},"\\"),e("span",{class:"token operator"},"<"),n("user"),e("span",{class:"token operator"},">"),e("span",{class:"token punctuation"},"\\"),n(`.pulsar
`),e("span",{class:"token builtin class-name"},"set"),n(),e("span",{class:"token assign-left variable"},"APM_PATH"),e("span",{class:"token operator"},"="),e("span",{class:"token punctuation"},"\\"),n("ppm"),e("span",{class:"token punctuation"},"\\"),n("bin"),e("span",{class:"token punctuation"},"\\"),n(`apm
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),Ce=t(`<p>You can now use the binary to link or install packages.</p><p>For example to install the <code>ide-java</code> package from source:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># clone the repository and cd into it</span>
<span class="token function">git</span> clone https://github.com/pulsar-edit/ide-java
<span class="token builtin class-name">cd</span> ide-java

<span class="token comment"># from the directory where you are running pulsar source code</span>
<span class="token operator">&lt;</span>pulsar source<span class="token operator">&gt;</span>/ppm/bin/apm <span class="token function">link</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hacking-on-the-core" tabindex="-1"><a class="header-anchor" href="#hacking-on-the-core" aria-hidden="true">#</a> Hacking on the Core</h2><p>You will first want to build and run Pulsar <a href="#building-pulsar">from source</a>.</p><h3 id="running-in-development-mode" tabindex="-1"><a class="header-anchor" href="#running-in-development-mode" aria-hidden="true">#</a> Running in Development Mode</h3><p>Once you have a local copy of Pulsar cloned and built, you can then run Pulsar in Development Mode. But first, if you cloned Pulsar to somewhere other than <strong><em>LNX/MAC</em></strong>: <code>~/github/pulsar</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\github\\pulsar</code> you will need to set the <code>ATOM_DEV_RESOURCE_PATH</code> environment variable to point to the folder in which you cloned Pulsar. To run Pulsar in Dev Mode, use the <code>--dev</code> parameter from the terminal:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">--dev</span> <span class="token operator">&lt;</span>path-to-open<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>There are a couple benefits of running Pulsar in Dev Mode:</p>`,9),Ie=t("<li>When the <code>ATOM_DEV_RESOURCE_PATH</code> environment variable is set correctly, Pulsar is run using the source code from your local <code>pulsar-edit/pulsar</code> repository. This means you don&#39;t have to rebuild after every change, just restart Pulsar \u{1F44D}</li><li>Packages that exist in <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar/dev/packages</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar\\dev\\packages</code> are loaded instead of packages of the same name normally loaded from other locations. This means that you can have development versions of packages you use loaded but easily go back to the stable versions by launching without Dev Mode.</li>",2),Se={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/dev-live-reload",target:"_blank",rel:"noopener noreferrer"},je=e("code",null,"window:reload",-1),Ae=t(`<h3 id="running-pulsar-core-tests-locally" tabindex="-1"><a class="header-anchor" href="#running-pulsar-core-tests-locally" aria-hidden="true">#</a> Running Pulsar Core Tests Locally</h3><p>In order to run Pulsar Core tests from the terminal, first be certain to set the <code>ATOM_DEV_RESOURCE_PATH</code> environment variable as mentioned above and then:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>path-to-your-local-pulsar-repo<span class="token operator">&gt;</span>
$ pulsar <span class="token parameter variable">--test</span> spec
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="tools-of-the-trade" tabindex="-1"><a class="header-anchor" href="#tools-of-the-trade" aria-hidden="true">#</a> Tools of the Trade</h2><p>To begin, there are a few things we&#39;ll assume you know, at least to some degree. Since all of Pulsar is implemented using web technologies, we have to assume you know web technologies such as JavaScript and CSS. Specifically, we&#39;ll be using Less, which is a preprocessor for CSS.</p>`,5),Ne={href:"https://github.com/pulsar-edit/.github/blob/main/project-birth/CONTRIBUTING-DURING-START.md#decaffeination",target:"_blank",rel:"noopener noreferrer"},Re=t(`<div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code>MyPackageView <span class="token operator">=</span> require <span class="token string">&#39;./my-package-view&#39;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span>
  <span class="token property">myPackageView</span><span class="token operator">:</span> <span class="token keyword">null</span>

  <span class="token property">activate</span><span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token class-member variable">@myPackageView</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPackageView</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>myPackageViewState<span class="token punctuation">)</span>

  <span class="token property">deactivate</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token class-member variable">@myPackageView</span><span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token property">serialize</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token operator">&gt;</span>
    <span class="token property">myPackageViewState</span><span class="token operator">:</span> <span class="token class-member variable">@myPackageView</span><span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),Me={href:"http://coffeescript.org",target:"_blank",rel:"noopener noreferrer"},Le={href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"},We=e("h2",{id:"the-init-file",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#the-init-file","aria-hidden":"true"},"#"),n(" The Init File")],-1),Oe={class:"custom-container info"},Ue=e("p",{class:"custom-container-title"},"Info",-1),Ee=e("code",null,"init.coffee",-1),Fe=e("code",null,"init.js",-1),De=e("strong",null,[e("em",null,"LNX/MAC")],-1),Ye=e("code",null,"~/.pulsar",-1),ze=e("strong",null,[e("em",null,"WIN")],-1),Ve=e("code",null,"%USERPROFILE%\\.pulsar",-1),He={href:"https://atom.io/docs/api/latest",target:"_blank",rel:"noopener noreferrer"},Ge=e("a",{href:"#package-word-count"},"Package: Word Count",-1),$e=t(`<p>You can open the <code>init.js</code> file in an editor from the <strong><em>LNX</em></strong>: <em>Atom &gt; Init Script</em> - <strong><em>MAC</em></strong>: <em>File &gt; Init Script</em> - <strong><em>WIN</em></strong>: <em>Edit &gt; Init Script</em> menu.</p><p>For example, if you have the Audio Beep configuration setting enabled, you could add the following code to your <code>init.js</code> file to have Pulsar greet you with an audio beep every time it loads:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>atom<span class="token punctuation">.</span><span class="token function">beep</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),Be=e("code",null,"init.js",-1),Xe={href:"https://atom.io/docs/api/latest/Selection",target:"_blank",rel:"noopener noreferrer"},Je={href:"https://atom.io/docs/api/latest/Clipboard",target:"_blank",rel:"noopener noreferrer"},Ke=t(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-text-editor&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;markdown:paste-as-link&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> clipboardText<span class="token punctuation">,</span> editor<span class="token punctuation">,</span> selection<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	selection <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getLastSelection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	clipboardText <span class="token operator">=</span> atom<span class="token punctuation">.</span>clipboard<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> selection<span class="token punctuation">.</span><span class="token function">insertText</span><span class="token punctuation">(</span>
		<span class="token string">&quot;[&quot;</span> <span class="token operator">+</span> selection<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;](&quot;</span> <span class="token operator">+</span> clipboardText <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now, reload Pulsar and use the <a href="./../getting-started#command-palette">Command Palette</a> to execute the new command, <code>Markdown: Paste As Link</code>, by name. And if you&#39;d like to trigger the command via a keyboard shortcut, you can define a <a href="./../using-pulsar#customizing-keybindings">keybinding for the command</a>.</p><h2 id="package-word-count" tabindex="-1"><a class="header-anchor" href="#package-word-count" aria-hidden="true">#</a> Package: Word Count</h2><p>Let&#39;s get started by writing a very simple package and looking at some of the tools needed to develop one effectively. We&#39;ll start by writing a package that tells you how many words are in the current buffer and display it in a small modal window.</p><h3 id="package-generator" tabindex="-1"><a class="header-anchor" href="#package-generator" aria-hidden="true">#</a> Package Generator</h3>`,5),Ze={href:"https://github.com/pulsar-edit/package-generator",target:"_blank",rel:"noopener noreferrer"},Qe=e("p",null,[n('You can run the generator by invoking the command palette and searching for "Generate Package". A dialog will appear asking you to name your new project. Name it '),e("code",null,"your-name-word-count"),n(". Pulsar will then create that directory and fill it out with a skeleton project and link it into your "),e("strong",null,[e("em",null,"LNX/MAC")]),n(": "),e("code",null,"~/.pulsar/packages"),n(" - "),e("strong",null,[e("em",null,"WIN")]),n(": "),e("code",null,"%USERPROFILE%\\.pulsar\\packages"),n(" directory so it's loaded when you launch your editor next time.")],-1),en={class:"custom-container note"},nn=e("p",{class:"custom-container-title"},"Note",-1),an={href:"https://web.pulsar-edit.dev/packages",target:"_blank",rel:"noopener noreferrer"},sn=e("code",null,"your-name-word-count",-1),tn=e("em",null,"should",-1),on=t('<p><img src="'+m+`" alt="Basic generated Pulsar package"></p><p>You can see that Pulsar has created about a dozen files that make up the package. Let&#39;s take a look at each of them to get an idea of how a package is structured, then we can modify them to get our word count functionality.</p><p>The basic package layout is as follows:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>my-package/
\u251C\u2500 grammars/
\u251C\u2500 keymaps/
\u251C\u2500 lib/
\u251C\u2500 menus/
\u251C\u2500 spec/
\u251C\u2500 snippets/
\u251C\u2500 styles/
\u251C\u2500 index.js
\u2514\u2500 package.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Not every package will have (or need) all of these directories and the package generator doesn&#39;t create <code>snippets</code> or <code>grammars</code>. Let&#39;s see what some of these are so we can start messing with them.</p><h4 id="package-json" tabindex="-1"><a class="header-anchor" href="#package-json" aria-hidden="true">#</a> <code>package.json</code></h4>`,6),ln={href:"https://en.wikipedia.org/wiki/Npm_(software)",target:"_blank",rel:"noopener noreferrer"},rn=e("code",null,"package.json",-1),pn={href:"https://docs.npmjs.com/files/package.json",target:"_blank",rel:"noopener noreferrer"},cn=e("code",null,"package.json",-1),un=e("code",null,"package.json",-1),dn=t(`<ul><li><code>main</code>: the path to the JavaScript file that&#39;s the entry point to your package. If this is missing, Pulsar will default to looking for an <code>index.js</code> or <code>index.coffee</code>.</li><li><code>styles</code>: an Array of Strings identifying the order of the style sheets your package needs to load. If not specified, style sheets in the <code>styles</code> directory are added alphabetically.</li><li><code>keymaps</code>: an Array of Strings identifying the order of the key mappings your package needs to load. If not specified, mappings in the <code>keymaps</code> directory are added alphabetically.</li><li><code>menus</code>: an Array of Strings identifying the order of the menu mappings your package needs to load. If not specified, mappings in the <code>menus</code> directory are added alphabetically.</li><li><code>snippets</code>: an Array of Strings identifying the order of the snippets your package needs to load. If not specified, snippets in the <code>snippets</code> directory are added alphabetically.</li><li><code>activationCommands</code>: an Object identifying commands that trigger your package&#39;s activation. The keys are CSS selectors, the values are Arrays of Strings identifying the command. The loading of your package is delayed until one of these events is triggered within the associated scope defined by the CSS selector. If not specified, the <code>activate()</code> method of your main export will be called when your package is loaded.</li><li><code>activationHooks</code>: an Array of Strings identifying hooks that trigger your package&#39;s activation. The loading of your package is delayed until one of these hooks are triggered. Currently, there are three activation hooks: <ul><li><code>core:loaded-shell-environment</code> for when Pulsar has finished loading the shell environment variables</li><li><code>scope.name:root-scope-used</code> for when a file is opened from the specified language (e.g. <code>source.ruby:root-scope-used</code>)</li><li><code>language-package-name:grammar-used</code> for when a specific language package is used (e.g., <code>my-special-language-javascript:grammar-used</code>)</li></ul></li><li><code>workspaceOpeners</code>: An Array of Strings identifying URIs that trigger your package&#39;s activation. For example, say your package registers a custom opener for <code>atom://my-custom-panel</code>. By including that string in <code>workspaceOpeners</code>, your package will defer its activation until that URI is opened.</li></ul><p>The <code>package.json</code> in the package we&#39;ve just generated looks like this currently:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A short description of your package&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;activationCommands&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;atom-workspace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count:toggle&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;repository&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/pulsar-edit/your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;atom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=1.0.0 &lt;2.0.0&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you wanted to use activationHooks, you might have:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./lib/your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.0&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A short description of your package&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;activationHooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token string">&quot;language-javascript:grammar-used&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;language-coffee-script:grammar-used&quot;</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token property">&quot;repository&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://github.com/pulsar-edit/your-name-word-count&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MIT&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;atom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&gt;=1.0.0 &lt;2.0.0&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>One of the first things you should do is ensure that this information is filled out. The name, description, repository URL the project will be at, and the license can all be filled out immediately. The other information we&#39;ll get into more detail on as we go.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Do not forget to update the repository URL. The one generated for you is invalid by design and will prevent you from publishing your package until updated.</p></div><h4 id="source-code" tabindex="-1"><a class="header-anchor" href="#source-code" aria-hidden="true">#</a> Source Code</h4><p>If you want to extend Pulsar&#39;s behavior, your package should contain a single top-level module, which you export from whichever file is indicated by the <code>main</code> key in your <code>package.json</code> file. In the package we just generated, the main package file is <code>lib/your-name-word-count.js</code>. The remainder of your code should be placed in the <code>lib</code> directory, and required from your top-level file. If the <code>main</code> key is not in your <code>package.json</code> file, it will look for <code>index.js</code> or <code>index.coffee</code> as the main entry point.</p><p>Your package&#39;s top-level module is a singleton object that manages the lifecycle of your extensions to Pulsar. Even if your package creates ten different views and appends them to different parts of the DOM, it&#39;s all managed from your top-level object.</p><p>Your package&#39;s top-level module can implement the following basic methods:</p><ul><li><code>activate(state)</code>: This <strong>optional</strong> method is called when your package is activated. It is passed the state data from the last time the window was serialized if your module implements the <code>serialize()</code> method. Use this to do initialization work when your package is started (like setting up DOM elements or binding events). If this method returns a promise the package will be considered loading until the promise resolves (or rejects).</li><li><code>initialize(state)</code>: This <strong>optional</strong> method is similar to <code>activate()</code> but is called earlier. Whereas activation occurs after the workspace has been deserialized (and can therefore happen after <a href="./../behind-pulsar#serialization-methods">your package&#39;s deserializers</a> have been called), <code>initialize()</code> is guaranteed to be called before everything. Use <code>activate()</code> if you want to be sure that the workspace is ready; use <code>initialize()</code> if you need to do some setup prior to your deserializers or view providers being invoked.</li><li><code>serialize()</code>: This <strong>optional</strong> method is called when the window is shutting down, allowing you to return JSON to represent the state of your component. When the window is later restored, the data you returned is passed to your module&#39;s <code>activate</code> method so you can restore your view to where the user left off.</li><li><code>deactivate()</code>: This <strong>optional</strong> method is called when the window is shutting down and when the package is disabled. If your package is watching any files or holding external resources in any other way, release them here. You should also dispose of all subscriptions you&#39;re holding on to.</li></ul><h4 id="style-sheets" tabindex="-1"><a class="header-anchor" href="#style-sheets" aria-hidden="true">#</a> Style Sheets</h4>`,13),hn=e("code",null,"styles",-1),mn={href:"http://lesscss.org",target:"_blank",rel:"noopener noreferrer"},kn=t("<p>Ideally, you won&#39;t need much in the way of styling. Pulsar provides a standard set of components which define both the colors and UI elements for any package that fits into Pulsar seamlessly. You can view all of Pulsar&#39;s UI components by opening the styleguide: open the command palette <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+P</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Shift+P</kbd> and search for <code>styleguide</code>, or type <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+G</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Ctrl+Shift+G</kbd></p>",1),gn=e("em",null,"do",-1),vn=e("em",null,"must",-1),bn={href:"https://github.com/pulsar-edit/atom-dark-ui/blob/master/styles/ui-variables.less",target:"_blank",rel:"noopener noreferrer"},fn=t(`<p>An optional <code>styleSheets</code> array in your <code>package.json</code> can list the style sheets by name to specify a loading order; otherwise, style sheets are loaded alphabetically.</p><h4 id="keymaps" tabindex="-1"><a class="header-anchor" href="#keymaps" aria-hidden="true">#</a> Keymaps</h4><p>You can provide key bindings for commonly used actions for your extension, especially if you&#39;re also adding a new command. In our new package, we have a keymap filled in for us already in the <code>keymaps/your-name-word-count.json</code> file:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;atom-workspace&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;ctrl-alt-o&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count:toggle&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This means that if you press <kbd>Alt+Ctrl+O</kbd>, our package will run the <code>your-name-word-count:toggle</code> command. We&#39;ll look at that code next, but if you want to change the default key mapping, you can do that in this file.</p><p>Keymaps are placed in the <code>keymaps</code> subdirectory. By default, all keymaps are loaded in alphabetical order. An optional <code>keymaps</code> array in your <code>package.json</code> can specify which keymaps to load and in what order.</p><p>Keybindings are executed by determining which element the keypress occurred on. In the example above, the <code>your-name-word-count:toggle</code> command is executed when pressing <kbd>Alt+Ctrl+O</kbd> on the <code>atom-workspace</code> element. Because the <code>atom-workspace</code> element is the parent of the entire Pulsar UI, this means the key combination will work anywhere in the application.</p><p>We&#39;ll cover more advanced keybinding stuff a bit later in <a href="./../behind-pulsar#keymaps-in-depth">Keymaps in Depth</a>.</p><h4 id="menus" tabindex="-1"><a class="header-anchor" href="#menus" aria-hidden="true">#</a> Menus</h4><p>Menus are placed in the <code>menus</code> subdirectory. This defines menu elements like what pops up when you right click a context-menu or would go in the application menu to trigger functionality in your package.</p><p>By default, all menus are loaded in alphabetical order. An optional <code>menus</code> array in your <code>package.json</code> can specify which menus to load and in what order.</p><h5 id="application-menu" tabindex="-1"><a class="header-anchor" href="#application-menu" aria-hidden="true">#</a> Application Menu</h5><p>It&#39;s recommended that you create an application menu item under the <em>Packages</em> menu for common actions with your package that aren&#39;t tied to a specific element. If we look in the <code>menus/your-name-word-count.json</code> file that was generated for us, we&#39;ll see a section that looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token string-property property">&quot;menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Packages&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;submenu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Word Count&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;submenu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Toggle&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count:toggle&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This section puts a &quot;Toggle&quot; menu item under a menu group named &quot;Your Name Word Count&quot; in the &quot;Packages&quot; menu.</p><p><img src="`+k+`" alt="Application Menu Item"></p><p>When you select that menu item, it will run the <code>your-name-word-count:toggle</code> command, which we&#39;ll look at in a bit.</p><p>The menu templates you specify are merged with all other templates provided by other packages in the order which they were loaded.</p><h5 id="context-menu" tabindex="-1"><a class="header-anchor" href="#context-menu" aria-hidden="true">#</a> Context Menu</h5><p>It&#39;s recommended to specify a context menu item for commands that are linked to specific parts of the interface. In our <code>menus/your-name-word-count.json</code> file, we can see an auto-generated section that looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string-property property">&quot;context-menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;atom-text-editor&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Toggle your-name-word-count&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;your-name-word-count:toggle&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This adds a &quot;Toggle Word Count&quot; menu option to the menu that pops up when you right-click in an Pulsar text editor pane.</p><p><img src="`+g+`" alt="Context Menu Entry"></p><p>When you click that it will again run the <code>your-name-word-count:toggle</code> method in your code.</p><p>Context menus are created by determining which element was selected and then adding all of the menu items whose selectors match that element (in the order which they were loaded). The process is then repeated for the elements until reaching the top of the DOM tree.</p><p>You can also add separators and submenus to your context menus. To add a submenu, provide a <code>submenu</code> key instead of a command. To add a separator, add an item with a single <code>type: &#39;separator&#39;</code> key/value pair. For instance, you could do something like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;context-menu&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;atom-workspace&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Text&quot;</span><span class="token punctuation">,</span>
        <span class="token string-property property">&quot;submenu&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Inspect Element&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;core:inspect&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;separator&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Selector All&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;core:select-all&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;separator&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;label&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Deleted Selected Text&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;core:delete&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="developing-our-package" tabindex="-1"><a class="header-anchor" href="#developing-our-package" aria-hidden="true">#</a> Developing Our Package</h3><p>Currently with the generated package we have, if we run that <code>your-name-word-count:toggle</code> command through the menu or the command palette, we&#39;ll get a dialog that says &quot;The YourNameWordCount package is Alive! It&#39;s ALIVE!&quot;.</p><p><img src="`+v+`" alt="Wordcount Package is Alive Dialog"></p><h4 id="understanding-the-generated-code" tabindex="-1"><a class="header-anchor" href="#understanding-the-generated-code" aria-hidden="true">#</a> Understanding the Generated Code</h4><p>Let&#39;s take a look at the code in our <code>lib</code> directory and see what is happening.</p><p>There are two files in our <code>lib</code> directory. One is the main file (<code>lib/your-name-word-count.js</code>), which is pointed to in the <code>package.json</code> file as the main file to execute for this package. This file handles the logic of the whole package.</p><p>The second file is a View class, <code>lib/your-name-word-count-view.js</code>, which handles the UI elements of the package. Let&#39;s look at this file first, since it&#39;s pretty simple.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">YourNameWordCountView</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">serializedState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Create root element</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;your-name-word-count&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Create message element</span>
		<span class="token keyword">const</span> message <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		message<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">&quot;The YourNameWordCount package is Alive! It&#39;s ALIVE!&quot;</span><span class="token punctuation">;</span>
		message<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Returns an object that can be retrieved when package is activated</span>
	<span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// Tear down any state and detach</span>
	<span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token function">getElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Basically the only thing happening here is that when the View class is created, it creates a simple <code>div</code> element and adds the <code>your-name-word-count</code> class to it (so we can find or style it later) and then adds the &quot;<code>Your Name Word Count package is Alive!</code>&quot; text to it. There is also a <code>getElement</code> method which returns that <code>div</code>. The <code>serialize</code> and <code>destroy</code> methods don&#39;t do anything and we won&#39;t have to worry about that until another example.</p><p>Notice that we&#39;re simply using the basic browser DOM methods: <code>createElement()</code> and <code>appendChild()</code>.</p><p>The second file we have is the main entry point to the package. Again, because it&#39;s referenced in the <code>package.json</code> file. Let&#39;s take a look at that file.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> YourNameWordCountView <span class="token keyword">from</span> <span class="token string">&quot;./your-name-word-count-view&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CompositeDisposable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;atom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">yourNameWordCountView</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
	<span class="token literal-property property">modalPanel</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
	<span class="token literal-property property">subscriptions</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

	<span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourNameWordCountView</span><span class="token punctuation">(</span>
			state<span class="token punctuation">.</span>yourNameWordCountViewState
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">addModalPanel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Events subscribed to in Pulsar&#39;s system can be easily cleaned up with a CompositeDisposable</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeDisposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Register command that toggles this view</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
			atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-workspace&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;your-name-word-count:toggle&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">yourNameWordCountViewState</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView<span class="token punctuation">.</span><span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;YourNameWordCount was toggled!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There is a bit more going on here. First of all we can see that we are defining four methods. The only required one is <code>activate</code>. The <code>deactivate</code> and <code>serialize</code> methods are expected by Pulsar but optional. The <code>toggle</code> method is one Pulsar is not looking for, so we&#39;ll have to invoke it somewhere for it to be called, which you may recall we do both in the <code>activationCommands</code> section of the <code>package.json</code> file and in the action we have in the menu file.</p><p>The <code>deactivate</code> method simply destroys the various class instances we&#39;ve created and the <code>serialize</code> method simply passes on the serialization to the View class. Nothing too exciting here.</p><p>The <code>activate</code> command does a number of things. For one, it is not called automatically when Pulsar starts up, it is first called when one of the <code>activationCommands</code> as defined in the <code>package.json</code> file are called. In this case, <code>activate</code> is only called the first time the <code>toggle</code> command is called. If nobody ever invokes the menu item or hotkey, this code is never called.</p><p>This method does two things. The first is that it creates an instance of the View class we have and adds the element that it creates to a hidden modal panel in the Pulsar workspace.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">YourNameWordCountView</span><span class="token punctuation">(</span>
	state<span class="token punctuation">.</span>yourNameWordCountViewState
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">addModalPanel</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView<span class="token punctuation">.</span><span class="token function">getElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We&#39;ll ignore the state stuff for now, since it&#39;s not important for this simple package. The rest should be fairly straightforward.</p><p>The next thing this method does is create an instance of the CompositeDisposable class so it can register all the commands that can be called from the package so other packages could subscribe to these events.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Events subscribed to in Pulsar&#39;s system can be easily cleaned up with a CompositeDisposable</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeDisposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Register command that toggles this view</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
	atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-workspace&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;your-name-word-count:toggle&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next we have the <code>toggle</code> method. This method simply toggles the visibility of the modal panel that we created in the <code>activate</code> method.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;YourNameWordCount was toggled!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This should be fairly simple to understand. We&#39;re looking to see if the modal element is visible and hiding or showing it depending on its current state.</p><h4 id="the-flow" tabindex="-1"><a class="header-anchor" href="#the-flow" aria-hidden="true">#</a> The Flow</h4><p>So, let&#39;s review the actual flow in this package.</p><ol><li>Pulsar starts up</li><li>Pulsar starts loading packages</li><li>Pulsar reads your <code>package.json</code></li><li>Pulsar loads keymaps, menus, styles and the main module</li><li>Pulsar finishes loading packages</li><li>At some point, the user executes your package command <code>your-name-word-count:toggle</code></li><li>Pulsar executes the <code>activate</code> method in your main module which sets up the UI by creating the hidden modal view</li><li>Pulsar executes the package command <code>your-name-word-count:toggle</code> which reveals the hidden modal view</li><li>At some point, the user executes the <code>your-name-word-count:toggle</code> command again</li><li>Pulsar executes the command which hides the modal view</li><li>Eventually, Pulsar is shut down which can trigger any serializations that your package has defined</li></ol><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Keep in mind that the flow will be slightly different if you choose not to use <code>activationCommands</code> in your package.</p></div><h4 id="counting-the-words" tabindex="-1"><a class="header-anchor" href="#counting-the-words" aria-hidden="true">#</a> Counting the Words</h4><p>So now that we understand what is happening, let&#39;s modify the code so that our little modal box shows us the current word count instead of static text.</p><p>We&#39;ll do this in a very simple way. When the dialog is toggled, we&#39;ll count the words right before displaying the modal. So let&#39;s do this in the <code>toggle</code> command. If we add some code to count the words and ask the view to update itself, we&#39;ll have something like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> words <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\\s+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>yourNameWordCountView<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>modalPanel<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,58),yn={href:"https://atom.io/docs/api/latest/Workspace#instance-getActiveTextEditor",target:"_blank",rel:"noopener noreferrer"},wn=e("code",null,"atom.workspace.getActiveTextEditor()",-1),_n={href:"https://atom.io/docs/api/latest/TextEditor#instance-getText",target:"_blank",rel:"noopener noreferrer"},xn=e("code",null,"getText()",-1),qn=t(`<p>Finally, we tell our view to update the word count it displays by calling the <code>setCount()</code> method on our view and then showing the modal again. Since that method doesn&#39;t yet exist, let&#39;s create it now.</p><p>We can add this code to the end of our <code>your-name-word-count-view.js</code> file:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> displayText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">There are </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> words.</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> displayText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pretty simple! We take the count number that was passed in and place it into a string that we then stick into the element that our view is controlling.</p><div class="custom-container note"><p class="custom-container-title">Note</p><p>To see your changes, you&#39;ll need to reload the code. You can do this by reloading the window (The <code>window:reload</code> command in the Command Palette). A common practice is to have two Pulsar windows, one for developing your package, and one for testing and reloading.</p></div><p><img src="`+b+'" alt="Word Count Working"></p><h3 id="basic-debugging" tabindex="-1"><a class="header-anchor" href="#basic-debugging" aria-hidden="true">#</a> Basic Debugging</h3><p>You&#39;ll notice a few <code>console.log</code> statements in the code. One of the cool things about Pulsar being built on Chromium is that you can use some of the same debugging tools available to you that you have when doing web development.</p><p>To open up the Developer Console, press <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+I</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+I</kbd> or choose the menu option <em>View &gt; Developer &gt; Toggle Developer Tools</em>.</p><p><img src="'+h+'" alt="Developer Tools Debugging"></p><p>From here you can inspect objects, run code and view console output just as though you were debugging a web site.</p><h3 id="testing" tabindex="-1"><a class="header-anchor" href="#testing" aria-hidden="true">#</a> Testing</h3><p>Your package should have tests, and if they&#39;re placed in the <code>spec</code> directory, they can be run by Pulsar.</p>',13),Pn={href:"https://jasmine.github.io/archives/1.3/introduction",target:"_blank",rel:"noopener noreferrer"},Tn=t('<h4 id="running-tests" tabindex="-1"><a class="header-anchor" href="#running-tests" aria-hidden="true">#</a> Running Tests</h4><p>Once you&#39;ve got your test suite written, you can run it by pressing <strong><em>LNX/WIN</em></strong>: <kbd>Alt+Ctrl+P</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+P</kbd> or via the <em>View &gt; Developer &gt; Run Package Specs</em> menu. Our generated package comes with an example test suite, so you can run this right now to see what happens.</p><p><img src="'+f+'" alt="Spec Suite Results"></p><p>You can also use the <code>pulsar --test spec</code> command to run them from the command line. It prints the test output and results to the console and returns the proper status code depending on whether the tests passed or failed.</p><h3 id="summary" tabindex="-1"><a class="header-anchor" href="#summary" aria-hidden="true">#</a> Summary</h3><p>We&#39;ve now generated, customized and tested our first package for Pulsar. Congratulations! Now let&#39;s go ahead and <a href="#publishing">publish</a> it so it&#39;s available to the world.</p><h2 id="package-modifying-text" tabindex="-1"><a class="header-anchor" href="#package-modifying-text" aria-hidden="true">#</a> Package: Modifying Text</h2>',7),Cn={href:"https://en.wikipedia.org/wiki/ASCII_art",target:"_blank",rel:"noopener noreferrer"},In=e("pre",null,`                                     o888
    ooooooo     ooooooo     ooooooo   888
  888     888 888     888 888     888 888
  888         888     888 888     888 888
    88ooo888    88ooo88     88ooo88  o888o

`,-1),Sn=e("p",null,"This should demonstrate how to do basic text manipulation in the current text buffer and how to deal with selections.",-1),jn=e("p",null,"The final package can be viewed at https://github.com/pulsar-edit/ascii-art.",-1),An=e("h3",{id:"basic-text-insertion",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#basic-text-insertion","aria-hidden":"true"},"#"),n(" Basic Text Insertion")],-1),Nn=e("strong",null,[e("em",null,"LNX/WIN")],-1),Rn=e("kbd",null,"Ctrl+Shift+P",-1),Mn=e("strong",null,[e("em",null,"MAC")],-1),Ln=e("kbd",null,"Cmd+Shift+P",-1),Wn={href:"https://github.com/pulsar-edit/command-palette",target:"_blank",rel:"noopener noreferrer"},On=e("a",{href:"#package-generator"},"the section on package generation",-1),Un=e("code",null,"ascii-art",-1),En=t(`<p>Now let&#39;s edit the package files to make our ASCII Art package do something interesting. Since this package doesn&#39;t need any UI, we can remove all view-related code so go ahead and delete <code>lib/ascii-art-view.js</code>, <code>spec/ascii-art-view-spec.js</code>, and <code>styles/</code>.</p><p>Next, open up <code>lib/ascii-art.js</code> and remove all view code, so it looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CompositeDisposable <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;atom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">subscriptions</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

	<span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeDisposable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>
			atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-workspace&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;ascii-art:convert&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Convert text!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="create-a-command" tabindex="-1"><a class="header-anchor" href="#create-a-command" aria-hidden="true">#</a> Create a Command</h4><p>Now let&#39;s add a command. You should namespace your commands with the package name followed by a <code>:</code> and then the name of the command. As you can see in the code, we called our command <code>ascii-art:convert</code> and we will define it to call the <code>convert()</code> method when it&#39;s executed.</p><p>So far, that will simply log to the console. Let&#39;s start by making it insert something into the text buffer.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">convert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    editor<span class="token punctuation">.</span><span class="token function">insertText</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, World!&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As in <a href="#counting-the-words">Counting Words</a>, we&#39;re using <code>atom.workspace.getActiveTextEditor()</code> to get the object that represents the active text editor. If this <code>convert()</code> method is called when not focused on a text editor, nothing will happen.</p>`,8),Fn={href:"https://atom.io/docs/api/latest/TextEditor#instance-insertText",target:"_blank",rel:"noopener noreferrer"},Dn=e("code",null,"insertText()",-1),Yn=t(`<h4 id="reload-the-package" tabindex="-1"><a class="header-anchor" href="#reload-the-package" aria-hidden="true">#</a> Reload the Package</h4><p>Before we can trigger <code>ascii-art:convert</code>, we need to load the latest code for our package by reloading the window. Run the command &quot;Window: Reload&quot; from the Command Palette or by pressing <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+F5</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd></p><h4 id="trigger-the-command" tabindex="-1"><a class="header-anchor" href="#trigger-the-command" aria-hidden="true">#</a> Trigger the Command</h4><p>Now open the Command Palette and search for the <code>Ascii Art: Convert</code> command. But it&#39;s not there! To fix this, open <code>package.json</code> and find the property called <code>activationCommands</code>. Activation commands make Pulsar launch faster by allowing Pulsar to delay a package&#39;s activation until it&#39;s needed. So remove the existing command and use <code>ascii-art:convert</code> in <code>activationCommands</code>:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;activationCommands&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;atom-workspace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ascii-art:convert&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>First, reload the window by running the command &quot;Window: Reload&quot; from the command palette. Now when you run the <code>Ascii Art: Convert</code> command it will insert &quot;Hello, World!&quot; into the active editor, if any.</p><h4 id="add-a-key-binding" tabindex="-1"><a class="header-anchor" href="#add-a-key-binding" aria-hidden="true">#</a> Add a Key Binding</h4><p>Now let&#39;s add a key binding to trigger the <code>ascii-art:convert</code> command. Open <code>keymaps/ascii-art.json</code> and add a key binding linking <kbd>Alt+Ctrl+A</kbd> to the <code>ascii-art:convert</code> command. You can delete the pre-existing key binding since you won&#39;t need it anymore.</p><p>When finished, the file should look like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;atom-text-editor&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;ctrl-alt-a&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ascii-art:convert&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now reload the window and verify that the key binding works.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The Pulsar keymap system is <em>case-sensitive</em>. This means that there is a distinction between <code>a</code> and <code>A</code> when creating keybindings. <code>a</code> means that you want to trigger the keybinding when you press <kbd>A</kbd>. But <code>A</code> means that you want to trigger the keybinding when you press <kbd>Shift+A</kbd>. You can also write <code>shift-a</code> when you want to trigger the keybinding when you press <kbd>Shift+A</kbd>.</p><p>We <strong>strongly</strong> recommend always using lowercase and explicitly spelling out when you want to include <kbd>Shift</kbd> in your keybindings.</p></div><h3 id="add-the-ascii-art" tabindex="-1"><a class="header-anchor" href="#add-the-ascii-art" aria-hidden="true">#</a> Add the ASCII Art</h3>`,13),zn={href:"https://npmjs.org/package/figlet",target:"_blank",rel:"noopener noreferrer"},Vn={href:"https://npmjs.org/",target:"_blank",rel:"noopener noreferrer"},Hn=e("code",null,"package.json",-1),Gn=t(`<div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;figlet&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.8&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After saving the file, run the command <code>Update Package Dependencies: Update</code> from the Command Palette. This will install the package&#39;s node module dependencies, only figlet in this case. You will need to run <code>Update Package Dependencies: Update</code> whenever you update the dependencies field in your <code>package.json</code> file.</p><p>If for some reason this doesn&#39;t work, you&#39;ll see a message saying &quot;Failed to update package dependencies&quot; and you will find a new <code>npm-debug.log</code> file in your directory. That file should give you some idea as to what went wrong.</p><p>Now require the figlet node module in <code>lib/ascii-art.js</code> and instead of inserting &quot;Hello, World!&quot;, convert the selected text to ASCII art.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">convert</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> editor <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> selection <span class="token operator">=</span> editor<span class="token punctuation">.</span><span class="token function">getSelectedText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> figlet <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;figlet&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> font <span class="token operator">=</span> <span class="token string">&#39;o8&#39;</span>
    <span class="token function">figlet</span><span class="token punctuation">(</span>selection<span class="token punctuation">,</span> <span class="token punctuation">{</span>font<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> art</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        editor<span class="token punctuation">.</span><span class="token function">insertText</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">\\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>art<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\\n</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now reload the editor, select some text in an editor window and press <kbd>Alt+Ctrl+A</kbd>. It should be replaced with a ridiculous ASCII art version instead.</p>`,6),$n={href:"https://atom.io/docs/api/latest/TextEditor#instance-getSelectedText",target:"_blank",rel:"noopener noreferrer"},Bn=e("code",null,"editor.getSelectedText()",-1),Xn={href:"https://atom.io/docs/api/latest/TextEditor#instance-insertText",target:"_blank",rel:"noopener noreferrer"},Jn=e("code",null,"editor.insertText()",-1),Kn=t('<h3 id="summary-1" tabindex="-1"><a class="header-anchor" href="#summary-1" aria-hidden="true">#</a> Summary</h3><p>In this section, we&#39;ve made a UI-less package that takes selected text and replaces it with a processed version. This could be helpful in creating linters or checkers for your code.</p><h2 id="package-active-editor-info" tabindex="-1"><a class="header-anchor" href="#package-active-editor-info" aria-hidden="true">#</a> Package: Active Editor Info</h2><p>We saw in our <a href="#package-word-count">Word Count</a> package how we could show information in a modal panel. However, panels aren&#39;t the only way to extend Pulsar&#39;s UI\u2014you can also add items to the workspace. These items can be dragged to new locations (for example, one of the docks on the edges of the window), and Pulsar will restore them the next time you open the project.</p>',4),Zn={href:"https://github.com/pulsar-edit/active-editor-info",target:"_blank",rel:"noopener noreferrer"},Qn=e("h3",{id:"create-the-package",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#create-the-package","aria-hidden":"true"},"#"),n(" Create the Package")],-1),ea=e("strong",null,[e("em",null,"LNX/WIN")],-1),na=e("kbd",null,"Ctrl+Shift+P",-1),aa=e("strong",null,[e("em",null,"MAC")],-1),sa=e("kbd",null,"Cmd+Shift+P",-1),ta={href:"https://github.com/pulsar-edit/command-palette",target:"_blank",rel:"noopener noreferrer"},oa=e("code",null,"Package Generator: Generate Package",-1),ia=e("a",{href:"#package-generator"},"the section on package generation",-1),la=e("code",null,"active-editor-info",-1),ra=t(`<h3 id="add-an-opener" tabindex="-1"><a class="header-anchor" href="#add-an-opener" aria-hidden="true">#</a> Add an Opener</h3><p>Now let&#39;s edit the package files to show our view in a workspace item instead of a modal panel. The way we do this is by registering an <em>opener</em> with Pulsar. Openers are just functions that accept a URI and return a view (if it&#39;s a URI that the opener knows about). When you call <code>atom.workspace.open()</code>, Pulsar will go through all of its openers until it finds one that can handle the URI you passed.</p><p>Let&#39;s open <code>lib/active-editor-info.js</code> and edit our <code>activate()</code> method to register an opener:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token string">&quot;use babel&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> ActiveEditorInfoView <span class="token keyword">from</span> <span class="token string">&quot;./active-editor-info-view&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CompositeDisposable<span class="token punctuation">,</span> Disposable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;atom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">subscriptions</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

	<span class="token function">activate</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeDisposable</span><span class="token punctuation">(</span>
			<span class="token comment">// Add an opener for our view.</span>
			atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">addOpener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">uri</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>uri <span class="token operator">===</span> <span class="token string">&quot;atom://active-editor-info&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ActiveEditorInfoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

			<span class="token comment">// Register command that toggles this view</span>
			atom<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;atom-workspace&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;active-editor-info:toggle&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

			<span class="token comment">// Destroy any ActiveEditorInfoViews when the package is deactivated.</span>
			<span class="token keyword">new</span> <span class="token class-name">Disposable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getPaneItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">ActiveEditorInfoView</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						item<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">deactivate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Toggle it!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You&#39;ll notice we also removed the <code>activeEditorInfoView</code> property and the <code>serialize()</code> method. That&#39;s because, with workspace items, it&#39;s possible to have more than one instance of a given view. Since each instance can have its own state, each should do its own serialization instead of relying on a package-level <code>serialize()</code> method. We&#39;ll come back to that later.</p><p>You probably also noticed that our <code>toggle()</code> implementation just logs the text &quot;Toggle it!&quot; to the console. Let&#39;s make it actually toggle our view:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&#39;atom://active-editor-info&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="updating-the-view" tabindex="-1"><a class="header-anchor" href="#updating-the-view" aria-hidden="true">#</a> Updating the View</h3><p>Pulsar uses the same view abstractions everywhere, so we can almost use the generated ActiveEditorInfoView class as-is. We just need to add two small methods:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">getTitle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Used by Pulsar for tab text</span>
    <span class="token keyword">return</span> <span class="token string">&#39;Active Editor Info&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Used by Pulsar to identify the view when toggling.</span>
    <span class="token keyword">return</span> <span class="token string">&#39;atom://active-editor-info&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now reload the window and run the <code>Active Editor Info: Toggle</code> command from the command palette! Our view will appear in a new tab in the center of the workspace. If you want, you can drag it into one of the docks. Toggling it again will then hide that dock. If you close the tab and run the toggle command again, it will appear in the last place you had it.</p><div class="custom-container note"><p class="custom-container-title">Note</p><p>We&#39;ve repeated the same URI three times now. That&#39;s okay, but it&#39;s probably a good idea to define the URL in one place and then import it from that module wherever you need it.</p></div><h3 id="constraining-our-item-s-locations" tabindex="-1"><a class="header-anchor" href="#constraining-our-item-s-locations" aria-hidden="true">#</a> Constraining Our Item&#39;s Locations</h3><p>The purpose of our view is to show information about the active text editor, so it doesn&#39;t really make sense to show our item in the center of the workspace (where the text editor will be). Let&#39;s add some methods to our view class to influence where its opened:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">getDefaultLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This location will be used if the user hasn&#39;t overridden it by dragging the item elsewhere.</span>
    <span class="token comment">// Valid values are &quot;left&quot;, &quot;right&quot;, &quot;bottom&quot;, and &quot;center&quot; (the default).</span>
    <span class="token keyword">return</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">getAllowedLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// The locations into which the item can be moved.</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">&#39;left&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;right&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bottom&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now our item will appear in the right dock initially and users will only be able to drag it to one of the other docks.</p><h3 id="show-active-editor-info" tabindex="-1"><a class="header-anchor" href="#show-active-editor-info" aria-hidden="true">#</a> Show Active Editor Info</h3><p>Now that we have our view all wired up, let&#39;s update it to show some information about the active text editor. Add this to the constructor:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions <span class="token operator">=</span> atom<span class="token punctuation">.</span>workspace
	<span class="token punctuation">.</span><span class="token function">getCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">observeActivePaneItem</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">isTextEditor</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			message<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;Open a file to see important information about it.&quot;</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		message<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">
    &lt;h2&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span><span class="token function">getFileName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;untitled&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h2&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;b&gt;Soft Wrap:&lt;/b&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span>softWrapped<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Tab Length:&lt;/b&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span><span class="token function">getTabLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Encoding:&lt;/b&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;Line Count:&lt;/b&gt; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>item<span class="token punctuation">.</span><span class="token function">getLineCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li&gt;
    &lt;/ul&gt;
  </span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now whenever you open a text editor in the center, the view will update with some information about it.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>We use a template string here because it&#39;s simple and we have a lot of control over what&#39;s going into it, but this could easily result in the insertion of unwanted HTML if you&#39;re not careful. Sanitize your input and use the DOM API or a templating system when doing this for real.</p></div><p>Also, don&#39;t forget to clean up the subscription in the <code>destroy()</code> method:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>element<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="serialization" tabindex="-1"><a class="header-anchor" href="#serialization" aria-hidden="true">#</a> Serialization</h3><p>If you were to reload Atom now, you&#39;d see that our item had disappeared. That&#39;s because we haven&#39;t told Pulsar how to serialize it yet. Let&#39;s do that now.</p><p>The first step is to implement a <code>serialize()</code> method on our ActiveEditorInfoView class. Atom will call the <code>serialize()</code> method on every item in the workspace periodically to save its state.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">serialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// This is used to look up the deserializer function. It can be any string, but it needs to be</span>
      <span class="token comment">// unique across all packages!</span>
      <span class="token literal-property property">deserializer</span><span class="token operator">:</span> <span class="token string">&#39;active-editor-info/ActiveEditorInfoView&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container note"><p class="custom-container-title">Note</p><p>All of our view&#39;s state is derived from the active text editor so we only need the <code>deserializer</code> field. If we had other state that we wanted to preserve across reloads, we would just add things to the object we&#39;re returning. Just make sure that they&#39;re JSON serializable!</p></div><p>Next we need to register a deserializer function that Atom can use to recreate the real object when it starts up. The best way to do that is to add a &quot;deserializers&quot; object to our <code>package.json</code> file:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;active-editor-info&quot;</span><span class="token punctuation">,</span>
  ...
  <span class="token property">&quot;deserializers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;active-editor-info/ActiveEditorInfoView&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deserializeActiveEditorInfoView&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice that the key (<code>&quot;active-editor-info/ActiveEditorInfoView&quot;</code>) matches the string we used in our <code>serialize()</code> method above. The value (<code>&quot;deserializeActiveEditorInfoView&quot;</code>) refers to a function in our main module, which we still need to add. Go back to <code>active-editor-info.js</code> and do that now:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">deserializeActiveEditorInfoView</span><span class="token punctuation">(</span><span class="token parameter">serialized</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ActiveEditorInfoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The value returned from our <code>serialize()</code> method will be passed to this function. Since our serialized object didn&#39;t include any state, we can just return a new ActiveEditorInfoView instance.</p><p>Reload Pulsar and toggle the view with the <code>Active Editor Info: Toggle</code> command. Then reload Pulsar again. Your view should be just where you left it!</p><h3 id="summary-2" tabindex="-1"><a class="header-anchor" href="#summary-2" aria-hidden="true">#</a> Summary</h3><p>In this section, we&#39;ve made a toggleable workspace item whose placement can be controlled by the user. This could be helpful when creating all sorts of visual tools for working with code!</p><h2 id="creating-a-theme" tabindex="-1"><a class="header-anchor" href="#creating-a-theme" aria-hidden="true">#</a> Creating a Theme</h2>`,37),pa={href:"http://lesscss.org/",target:"_blank",rel:"noopener noreferrer"},ca=t('<p>Pulsar supports two types of themes: <em>UI</em> and <em>Syntax</em>. UI themes style elements such as the tree view, the tabs, drop-down lists, and the status bar. Syntax themes style the code, gutter and other elements inside the editor view.</p><p><img src="'+y+'" alt="Theme boundary"></p><p>Themes can be installed and changed from the Settings View which you can open by selecting the <strong><em>LNX</em></strong>: <em>Edit &gt; Preferences</em> - <strong><em>MAC</em></strong>: <em>Pulsar &gt; Preferences</em> - <strong><em>WIN</em></strong>: <em>File &gt; Preferences</em> menu, and clicking the &quot;Install&quot; or &quot;Themes&quot; tab on the left hand navigation.</p><h3 id="getting-started" tabindex="-1"><a class="header-anchor" href="#getting-started" aria-hidden="true">#</a> Getting Started</h3><p>Themes are pretty straightforward but it&#39;s still helpful to be familiar with a few things before starting:</p>',5),ua={href:"https://speakerdeck.com/danmatthews/less-css",target:"_blank",rel:"noopener noreferrer"},da=t('<li>You may also want to review the concept of a <code>package.json</code> (as covered in <a href="#package-json">Pulsar <code>package.json</code></a>). This file is used to help distribute your theme to Pulsar users.</li><li>Your theme&#39;s <code>package.json</code> must contain a <code>theme</code> key with a value of <code>ui</code> or <code>syntax</code> for Pulsar to recognize and load it as a theme.</li>',2),ha={href:"https://web.pulsar-edit.dev/packages",target:"_blank",rel:"noopener noreferrer"},ma=t('<h3 id="creating-a-syntax-theme" tabindex="-1"><a class="header-anchor" href="#creating-a-syntax-theme" aria-hidden="true">#</a> Creating a Syntax Theme</h3><p>Let&#39;s create your first theme.</p><p>To get started, press <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+P</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Shift+P</kbd> and start typing <code>Generate Syntax Theme</code> to generate a new theme package. Select <code>Generate Syntax Theme</code>, and you&#39;ll be asked for the path where your theme will be created. Let&#39;s call ours <code>motif-syntax</code>.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Syntax themes should end with <em>-syntax</em> and UI themes should end with <em>-ui</em>.</p></div><p>Pulsar will display a new window, showing the motif-syntax theme, with a default set of folders and files created for us. If you open the Settings View with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+,</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+,</kbd> and click the &quot;Themes&quot; tab on the left, you&#39;ll see the &quot;Motif&quot; theme listed in the &quot;Syntax Theme&quot; drop-down. Select it from the menu to activate it, now when you open an editor you should see your new motif-syntax theme in action.</p><p>Open up <code>styles/colors.less</code> to change the various color variables which have already been defined. For example, turn <code>@red</code> into <code>#f4c2c1</code>.</p><p>Then open <code>styles/base.less</code> and modify the various selectors that have already been defined. These selectors style different parts of code in the editor such as comments, strings and the line numbers in the gutter.</p><p>As an example, let&#39;s make the <code>.gutter</code> <code>background-color</code> into <code>@red</code>.</p><p>Reload Pulsar by pressing <strong><em>LNX/WIN</em></strong>: <kbd>Alt+Ctrl+R</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd> to see the changes you made reflected in your Pulsar window. Pretty neat!</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>You can avoid reloading to see changes you make by opening an Pulsar window in Dev Mode. To open a Dev Mode Pulsar window run <code>pulsar --dev .</code> in the terminal, or use the <em>View &gt; Developer &gt; Open in Dev Mode</em> menu. When you edit your theme, changes will instantly be reflected!</p></div><div class="custom-container note"><p class="custom-container-title">Note</p><p>It&#39;s advised to <em>not</em> specify a <code>font-family</code> in your syntax theme because it will override the Font Family field in Pulsar&#39;s settings. If you still like to recommend a font that goes well with your theme, we suggest you do so in your README.</p></div><h3 id="creating-a-ui-theme" tabindex="-1"><a class="header-anchor" href="#creating-a-ui-theme" aria-hidden="true">#</a> Creating a UI Theme</h3><p>To create a UI theme, do the following:</p>',13),ka={href:"https://github.com/pulsar-edit/ui-theme-template",target:"_blank",rel:"noopener noreferrer"},ga=t("<li>Clone the forked repository to the local filesystem</li><li>Open a terminal in the forked theme&#39;s directory</li><li>Open your new theme in a Dev Mode Pulsar window run <code>pulsar --dev .</code> in the terminal or use the <em>View &gt; Developer &gt; Open in Dev Mode</em> menu</li><li>Change the name of the theme in the theme&#39;s <code>package.json</code> file</li><li>Name your theme end with a <code>-ui</code>, for example <code>super-white-ui</code></li><li>Run <code>pulsar -p link --dev</code> to symlink your repository to <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar/dev/packages</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar</code></li><li>Reload Pulsar using <strong><em>LNX/WIN</em></strong>: <kbd>Alt+Ctrl+R</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd></li><li>Enable the theme via the &quot;UI Theme&quot; drop-down in the &quot;Themes&quot; tab of the Settings View</li><li>Make changes! Since you opened the theme in a Dev Mode window, changes will be instantly reflected in the editor without having to reload.</li>",9),va=t('<div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Because we used <code>pulsar -p link --dev</code> in the above instructions, if you break anything you can always close Pulsar and launch Pulsar normally to force Pulsar to the default theme. This allows you to continue working on your theme even if something goes catastrophically wrong.</p></div><h3 id="theme-variables" tabindex="-1"><a class="header-anchor" href="#theme-variables" aria-hidden="true">#</a> Theme Variables</h3><p>UI themes <strong>must</strong> provide a <code>ui-variables.less</code> and Syntax themes a <code>syntax-variables.less</code> file. It contains predefined variables that packages use to make sure the look and feel matches.</p><p>Here the variables with the default values:</p>',4),ba={href:"https://github.com/pulsar-edit/pulsar/blob/master/static/variables/ui-variables.less",target:"_blank",rel:"noopener noreferrer"},fa={href:"https://github.com/pulsar-edit/pulsar/blob/master/static/variables/syntax-variables.less",target:"_blank",rel:"noopener noreferrer"},ya=e("p",null,"These default values will be used as a fallback in case a theme doesn't define its own variables.",-1),wa=e("h4",{id:"use-in-packages",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#use-in-packages","aria-hidden":"true"},"#"),n(" Use in Packages")],-1),_a=e("p",null,[n("In any of your package's "),e("code",null,".less"),n(" files, you can access the theme variables by importing the "),e("code",null,"ui-variables"),n(" or "),e("code",null,"syntax-variables"),n(" file from Pulsar.")],-1),xa={href:"https://github.com/pulsar-edit/styleguide",target:"_blank",rel:"noopener noreferrer"},qa=t(`<p>Here&#39;s an example <code>.less</code> file that a package can define using theme variables:</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;ui-variables&quot;</span><span class="token punctuation">;</span></span>

<span class="token selector">.my-selector</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@base-background-color</span><span class="token punctuation">;</span></span>
	<span class="token property">padding</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@component-padding</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;syntax-variables&quot;</span><span class="token punctuation">;</span></span>

<span class="token selector">.my-selector</span> <span class="token punctuation">{</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@syntax-background-color</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="development-workflow" tabindex="-1"><a class="header-anchor" href="#development-workflow" aria-hidden="true">#</a> Development workflow</h3><p>There are a few tools to help make theme development faster and easier.</p><h4 id="live-reload" tabindex="-1"><a class="header-anchor" href="#live-reload" aria-hidden="true">#</a> Live Reload</h4>`,6),Pa=e("strong",null,[e("em",null,"LNX/WIN")],-1),Ta=e("kbd",null,"Alt+Ctrl+R",-1),Ca=e("strong",null,[e("em",null,"MAC")],-1),Ia=e("kbd",null,"Alt+Cmd+Ctrl+L",-1),Sa={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/dev-live-reload",target:"_blank",rel:"noopener noreferrer"},ja=t('<p>To launch a Dev Mode window:</p><ul><li>Open your theme directory in a dev window by selecting the <em>View &gt; Developer &gt; Open in Dev Mode</em> menu item</li><li>Or launch Pulsar from the terminal with <code>pulsar --dev</code></li></ul><p>If you&#39;d like to reload all the styles at any time, you can use the shortcut <strong><em>LNX/WIN</em></strong>: <kbd>Alt+Ctrl+R</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd>,</p><h4 id="developer-tools" tabindex="-1"><a class="header-anchor" href="#developer-tools" aria-hidden="true">#</a> Developer Tools</h4><p>Pulsar is based on the Chromium browser and supports its Developer Tools. You can open them by selecting the <em>View &gt; Developer &gt; Toggle Developer Tools</em> menu, or by using the <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+I</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+I</kbd></p><p>The dev tools allow you to inspect elements and take a look at their CSS properties.</p><p><img src="'+h+'" alt="Developer Tools"></p>',7),Aa={href:"https://developer.chrome.com/devtools/docs/dom-and-styles",target:"_blank",rel:"noopener noreferrer"},Na=e("h4",{id:"pulsar-styleguide",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#pulsar-styleguide","aria-hidden":"true"},"#"),n(" Pulsar Styleguide")],-1),Ra={href:"https://github.com/pulsar-edit/styleguide",target:"_blank",rel:"noopener noreferrer"},Ma=t('<p>To open the Styleguide, open the command palette with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+P</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Shift+P</kbd> and search for <code>styleguide</code>, or use the shortcut <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+G</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Ctrl+Shift+G</kbd>.</p><p><img src="'+w+'" alt="Style Guide"></p><h4 id="side-by-side" tabindex="-1"><a class="header-anchor" href="#side-by-side" aria-hidden="true">#</a> Side by side</h4><p>Sometimes when creating a theme (or package) things can go wrong and the editor becomes unusable. E.g. if the text and background have the same color or something gets pushed out of sight. To avoid having to open Pulsar in &quot;normal&quot; mode to fix the issue, it&#39;s advised to open <strong>two</strong> Pulsar windows. One for making changes and one in Dev Mode to see the changes getting applied.</p><p><img src="'+_+'" alt="Side by side screenshot"></p><blockquote><p>Make changes on the <strong>left</strong>, see the changes getting applied in &quot;Dev Mode&quot; on the <strong>right</strong>.</p></blockquote><p>Now if you mess up something, only the window in &quot;Dev Mode&quot; will be affected and you can easily correct the mistake in your &quot;normal&quot; window.</p><h3 id="publish-your-theme" tabindex="-1"><a class="header-anchor" href="#publish-your-theme" aria-hidden="true">#</a> Publish your theme</h3><p>Once you&#39;re happy with your theme and would like to share it with other Pulsar users, it&#39;s time to publish it. \u{1F389}</p>',9),La=e("h2",{id:"creating-a-grammar",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#creating-a-grammar","aria-hidden":"true"},"#"),n(" Creating a Grammar")],-1),Wa={href:"http://tree-sitter.github.io/tree-sitter",target:"_blank",rel:"noopener noreferrer"},Oa={href:"https://en.wikipedia.org/wiki/Abstract_syntax_tree",target:"_blank",rel:"noopener noreferrer"},Ua=e("em",null,"syntax trees",-1),Ea=t('<p>This syntax tree gives Pulsar a comprehensive understanding of the structure of your code, which has several benefits:</p><ol><li>Syntax highlighting will not break because of formatting changes.</li><li>Code folding will work regardless of how your code is indented.</li><li>Editor features can operate on the syntax tree. For instance, the <code>Select Larger Syntax Node</code> and <code>Select Smaller Syntax Node</code> allow you to select conceptually larger and smaller chunks of your code.</li><li>Community packages can use the syntax tree to manipulate code intelligently.</li></ol><p>Tree-sitter grammars are relatively new. Many languages in Pulsar are still supported by <a href="#creating-a-legacy-textmate-grammar">TextMate grammars</a>, though we intend to phase these out over time.</p><p>If you&#39;re adding support for a new language, you&#39;re in the right place!</p><h3 id="getting-started-1" tabindex="-1"><a class="header-anchor" href="#getting-started-1" aria-hidden="true">#</a> Getting Started</h3><p>There are two components required to use Tree-sitter in Pulsar: a <em>parser</em> and a <em>grammar</em> file.</p><h3 id="the-parser" tabindex="-1"><a class="header-anchor" href="#the-parser" aria-hidden="true">#</a> The Parser</h3>',7),Fa={href:"https://en.wikipedia.org/wiki/Context-free_grammar",target:"_blank",rel:"noopener noreferrer"},Da={href:"http://tree-sitter.github.io/tree-sitter/creating-parsers",target:"_blank",rel:"noopener noreferrer"},Ya={href:"https://github.com/tree-sitter",target:"_blank",rel:"noopener noreferrer"},za={href:"https://npmjs.com",target:"_blank",rel:"noopener noreferrer"},Va=e("code",null,"name",-1),Ha=e("code",null,"version",-1),Ga=e("code",null,"package.json",-1),$a=t(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tree-sitter-mylanguage&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>then run the command <code>npm publish</code>.</p><h3 id="the-package" tabindex="-1"><a class="header-anchor" href="#the-package" aria-hidden="true">#</a> The Package</h3><p>Once you have a Tree-sitter parser that is available on npm, you can use it in your Pulsar package. Packages with grammars are, by convention, always named starting with <em>language</em>. You&#39;ll need a folder with a <code>package.json</code>, a <code>grammars</code> subdirectory, and a single <code>json</code> or <code>cson</code> file in the <code>grammars</code> directory, which can be named anything.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>language-mylanguage
\u251C\u2500\u2500 LICENSE
\u251C\u2500\u2500 README.md
\u251C\u2500\u2500 grammars
\u2502   \u2514\u2500\u2500 mylanguage.cson
\u2514\u2500\u2500 package.json
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="the-grammar-file" tabindex="-1"><a class="header-anchor" href="#the-grammar-file" aria-hidden="true">#</a> The Grammar File</h3><p>The <code>mylanguage.cson</code> file specifies how Pulsar should use the parser you created.</p><h3 id="basic-fields" tabindex="-1"><a class="header-anchor" href="#basic-fields" aria-hidden="true">#</a> Basic Fields</h3><p>It starts with some required fields:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">name</span><span class="token operator">:</span> <span class="token string">&#39;My Language&#39;</span>
<span class="token property">scopeName</span><span class="token operator">:</span> <span class="token string">&#39;mylanguage&#39;</span>
<span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;tree-sitter&#39;</span>
<span class="token property">parser</span><span class="token operator">:</span> <span class="token string">&#39;tree-sitter-mylanguage&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10),Ba=e("li",null,[e("code",null,"scopeName"),n(" - A unique, stable identifier for the language. Pulsar users will use this in configuration files if they want to specify custom configuration based on the language.")],-1),Xa=e("li",null,[e("code",null,"name"),n(" - A human readable name for the language.")],-1),Ja=e("code",null,"parser",-1),Ka={href:"https://nodejs.org/api/modules.html#modules_require",target:"_blank",rel:"noopener noreferrer"},Za=e("code",null,"require()",-1),Qa=e("li",null,[e("code",null,"type"),n(" - This should have the value "),e("code",null,"tree-sitter"),n(" to indicate to Pulsar that this is a Tree-sitter grammar and not a "),e("a",{href:"#creating-a-legacy-textmate-grammar"},"TextMate grammar"),n(".")],-1),es=t(`<h3 id="language-recognition" tabindex="-1"><a class="header-anchor" href="#language-recognition" aria-hidden="true">#</a> Language Recognition</h3><p>Next, the file should contain some fields that indicate to Pulsar <em>when</em> this language should be used. These fields are all optional.</p><ul><li><code>fileTypes</code> - An array of filename <em>suffixes</em>. The grammar will be used for files whose names end with one of these suffixes. Note that the suffix may be an entire filename.</li><li><code>firstLineRegex</code> - A regex pattern that will be tested against the first line of the file. The grammar will be used if this regex matches.</li><li><code>contentRegex</code> - A regex pattern that will be tested against the contents of the file in order to break ties in cases where <em>multiple</em> grammars matched the file using the above two criteria. If the <code>contentRegex</code> matches, this grammar will be preferred over another grammar with no <code>contentRegex</code>. If the <code>contentRegex</code> does <em>not</em> match, a grammar with no <code>contentRegex</code> will be preferred over this one.</li></ul><h3 id="syntax-highlighting" tabindex="-1"><a class="header-anchor" href="#syntax-highlighting" aria-hidden="true">#</a> Syntax Highlighting</h3><p>The HTML classes that Pulsar uses for syntax highlighting do not correspond directly to nodes in the syntax tree. Instead, Tree-sitter grammar files specify <em>scope mappings</em> that specify which classes should be applied to which syntax nodes. The <code>scopes</code> object controls these scope mappings. Its keys are CSS selectors that select nodes in the syntax tree. Its values can be of several different types.</p><p>Here is a simple example:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;call_expression &gt; identifier&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.name.function&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>This entry means that, in the syntax tree, any <code>identifier</code> node whose parent is a <code>call_expression</code> should be highlighted using three classes: <code>syntax--entity</code>, <code>syntax--name</code>, and <code>syntax--function</code>.</p>`,8),ns={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Child_selectors",target:"_blank",rel:"noopener noreferrer"},as=e("code",null,">",-1),ss=e("code",null,"'call_expression identifier'",-1),ts=e("code",null,"identifier",-1),os=e("code",null,"call_expression",-1),is=t(`<h4 id="advanced-selectors" tabindex="-1"><a class="header-anchor" href="#advanced-selectors" aria-hidden="true">#</a> Advanced Selectors</h4><p>The keys of the <code>scopes</code> object can also contain <em>multiple</em> CSS selectors, separated by commas, similar to CSS files. The triple-quote syntax in CSON makes it convenient to write keys like this on multiple lines:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>
  <span class="token multiline-string string">&#39;&#39;&#39;
  function_declaration &gt; identifier,
  call_expression &gt; identifier,
  call_expression &gt; field_expression &gt; field_identifier
  &#39;&#39;&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.name.function&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),ls={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child",target:"_blank",rel:"noopener noreferrer"},rs=e("code",null,":nth-child",-1),ps=e("code",null,"identifier",-1),cs=e("code",null,"singleton_method",-1),us=t(`<div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;singleton_method &gt; identifier:nth-child(3)&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.name.function&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,1),ds=e("em",null,"anonymous",-1),hs=e("code",null,"(",-1),ms=e("code",null,":",-1),ks={href:"http://tree-sitter.github.io/tree-sitter/using-parsers#named-vs-anonymous-nodes",target:"_blank",rel:"noopener noreferrer"},gs=t('<div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>\n  <span class="token multiline-string string">&#39;&#39;&#39;\n    &quot;*&quot;,\n    &quot;/&quot;,\n    &quot;+&quot;,\n    &quot;-&quot;\n  &#39;&#39;&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.operator&#39;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="text-based-mappings" tabindex="-1"><a class="header-anchor" href="#text-based-mappings" aria-hidden="true">#</a> Text-based Mappings</h4><p>You can also apply different classes to a syntax node based on its text. Here are some examples:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>\n\n  <span class="token comment"># Apply the classes `syntax--builtin` and `syntax--variable` to all</span>\n  <span class="token comment"># `identifier` nodes whose text is `require`.</span>\n  <span class="token string-property property">&#39;identifier&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">exact</span><span class="token operator">:</span> <span class="token string">&#39;require&#39;</span><span class="token punctuation">,</span> <span class="token property">scopes</span><span class="token operator">:</span> <span class="token string">&#39;builtin.variable&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment"># Apply the classes `syntax--type` and `syntax--integer` to all</span>\n  <span class="token comment"># `primitive_type` nodes whose text starts with `int` or `uint`.</span>\n  <span class="token string-property property">&#39;primitive_type&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">match</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^u?int</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token property">scopes</span><span class="token operator">:</span> <span class="token string">&#39;type.integer&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n\n  <span class="token comment"># Apply the classes `syntax--builtin`, `syntax--class`, and</span>\n  <span class="token comment"># `syntax--name` to `constant` nodes with the text `Array`,</span>\n  <span class="token comment"># `Hash` and `String`. For all other `constant` nodes, just</span>\n  <span class="token comment"># apply the classes `syntax--class` and `syntax--name`.</span>\n  <span class="token string-property property">&#39;constant&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span><span class="token property">match</span><span class="token operator">:</span> <span class="token string">&#39;^(Array|Hash|String)$&#39;</span><span class="token punctuation">,</span> <span class="token property">scopes</span><span class="token operator">:</span> <span class="token string">&#39;builtin.class.name&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token string">&#39;class.name&#39;</span>\n  <span class="token punctuation">]</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In total there are four types of values that can be associated with selectors in <code>scopes</code>:</p><ul><li>Strings - Each class name in the dot-separated string will be prefixed with <code>syntax--</code> and applied to the selected node.</li><li>Objects with the keys <code>exact</code> and <code>scopes</code> - If the node&#39;s text equals the <code>exact</code> string, the <code>scopes</code> string will be used as described above.</li><li>Objects with the keys <code>match</code> and <code>scopes</code> - If the node&#39;s text matches the <code>match</code> regex pattern, the <code>scopes</code> string will be used as described above.</li><li>Arrays - The elements of the array will be processed from beginning to end. The first element that matches the selected node will be used as describe above.</li></ul><h4 id="specificity" tabindex="-1"><a class="header-anchor" href="#specificity" aria-hidden="true">#</a> Specificity</h4>',7),vs=e("code",null,"scopes",-1),bs={href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity",target:"_blank",rel:"noopener noreferrer"},fs=e("code",null,"exact",-1),ys=e("code",null,"match",-1),ws=e("em",null,"not",-1),_s=e("code",null,"exact",-1),xs=e("code",null,"match",-1),qs=t(`<div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">scopes</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;call_expression &gt; identifier&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.name.function&#39;</span>

  <span class="token comment"># If we did not include the second selector here, then this rule</span>
  <span class="token comment"># would not apply to identifiers inside of call_expressions,</span>
  <span class="token comment"># because the selector \`call_expression &gt; identifier\` is more</span>
  <span class="token comment"># specific than the selector \`identifier\`.</span>
  <span class="token string-property property">&#39;identifier, call_expression &gt; identifier&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token property">exact</span><span class="token operator">:</span> <span class="token string">&#39;require&#39;</span><span class="token punctuation">,</span> <span class="token property">scopes</span><span class="token operator">:</span> <span class="token string">&#39;builtin.variable&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span><span class="token property">match</span><span class="token operator">:</span> <span class="token string">&#39;^[A-Z]&#39;</span><span class="token punctuation">,</span> <span class="token property">scopes</span><span class="token operator">:</span> <span class="token string">&#39;constructor&#39;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="language-injection" tabindex="-1"><a class="header-anchor" href="#language-injection" aria-hidden="true">#</a> Language Injection</h3><p>Sometimes, a source file can contain code written in several different languages. Tree-sitter grammars support this situation using a two-part process called <em>language injection</em>. First, an &#39;outer&#39; language must define an <em>injection point</em> - a set of syntax nodes whose text can be parsed using a different language, along with some logic for guessing the <em>name</em> of the other language that should be used. Second, an &#39;inner&#39; language must define an <code>injectionRegex</code> - a regex pattern that will be tested against the language name provided by the injection point.</p>`,3),Ps={href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#Tagged_templates",target:"_blank",rel:"noopener noreferrer"},Ts=t(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// HTML in a template literal</span>
<span class="token keyword">const</span> htmlContent <span class="token operator">=</span> html<span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;Hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>tree-sitter-javascript</code> parser parses this tagged template literal as a <code>call_expression</code> with two children: an <code>identifier</code> and a <code>template_literal</code>:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>(call_expression
  (identifier)
  (template_literal
    (interpolation
      (identifier))))
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Here is an injection point that would allow syntax highlighting inside of template literals:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>atom<span class="token punctuation">.</span>grammars<span class="token punctuation">.</span><span class="token function">addInjectionPoint</span><span class="token punctuation">(</span><span class="token string">&quot;source.js&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;call_expression&quot;</span><span class="token punctuation">,</span>

	<span class="token function">language</span><span class="token punctuation">(</span><span class="token parameter">callExpression</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span> firstChild <span class="token punctuation">}</span> <span class="token operator">=</span> callExpression<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>firstChild<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;identifier&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> firstChild<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">content</span><span class="token punctuation">(</span><span class="token parameter">callExpression</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span> lastChild <span class="token punctuation">}</span> <span class="token operator">=</span> callExpression<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>lastChild<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;template_string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> lastChild<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>language</code> callback would then be called with every <code>call_expression</code> node in the syntax tree. In the example above, it would retrieve the first child of the <code>call_expression</code>, which is an <code>identifier</code> with the name &quot;html&quot;. The callback would then return the string &quot;html&quot;.</p><p>The <code>content</code> callback would then be called with the same <code>call_expression</code> node and return the <code>template_string</code> node within the <code>call_expression</code> node.</p><p>In order to parse the HTML within the template string, the HTML grammar file would need to specify an <code>injectionRegex</code>:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">injectionRegex</span><span class="token operator">:</span> <span class="token string">&#39;html|HTML&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="code-folding" tabindex="-1"><a class="header-anchor" href="#code-folding" aria-hidden="true">#</a> Code Folding</h3><p>The next field in the grammar file, <code>folds</code>, controls code folding. Its value is an array of <em>fold pattern</em> objects. Fold patterns are used to decide whether or not a syntax node can be folded, and if so, where the fold should start and end. Here are some example fold patterns:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">folds</span><span class="token operator">:</span> <span class="token punctuation">[</span>

  <span class="token comment"># All \`comment\` nodes are foldable. By default, the fold starts at</span>
  <span class="token comment"># the end of the node&#39;s first line, and ends at the beginning</span>
  <span class="token comment"># of the node&#39;s last line.</span>
  <span class="token punctuation">{</span>
    <span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;comment&#39;</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># \`if_statement\` nodes are foldable if they contain an anonymous</span>
  <span class="token comment"># &quot;then&quot; token and either an \`elif_clause\` or \`else_clause\` node.</span>
  <span class="token comment"># The fold starts at the end of the &quot;then&quot; token and ends at the</span>
  <span class="token comment"># \`elif_clause\` or \`else_clause\`.</span>
  <span class="token punctuation">{</span>
    <span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;if_statement&#39;</span><span class="token punctuation">,</span>
    <span class="token property">start</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;&quot;then&quot;&#39;</span><span class="token punctuation">}</span>
    <span class="token property">end</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">type</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;elif_clause&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;else_clause&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment"># Any node that starts with an anonymous &quot;(&quot; token and ends with</span>
  <span class="token comment"># an anonymous &quot;)&quot; token is foldable. The fold starts after the</span>
  <span class="token comment"># &quot;(&quot; and ends before the &quot;)&quot;.</span>
  <span class="token punctuation">{</span>
    <span class="token property">start</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;&quot;(&quot;&#39;</span><span class="token punctuation">,</span> <span class="token property">index</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">end</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">type</span><span class="token operator">:</span> <span class="token string">&#39;&quot;)&quot;&#39;</span><span class="token punctuation">,</span> <span class="token property">index</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Fold patterns can have one or more of the following fields:</p><ul><li><code>type</code> - A string or array of strings. In order to be foldable according to this pattern, a syntax node&#39;s type must match one of these strings.</li><li><code>start</code> - An object that is used to identify a <em>child</em> node after which the fold should start. The object can have one or both of the following fields: <ul><li><code>type</code> - A string or array of strings. To start a fold, a child node&#39;s type must match one of these strings.</li><li><code>index</code> - a number that&#39;s used to select a specific child according to its index. Negative values are interpreted as indices relative the last child, so that <code>-1</code> means the last child.</li></ul></li><li><code>end</code> - An object that is used to identify a <em>child</em> node before which the fold should end. It has the same structure as the <code>start</code> object.</li></ul><h3 id="comments" tabindex="-1"><a class="header-anchor" href="#comments" aria-hidden="true">#</a> Comments</h3><p>The last field in the grammar file, <code>comments</code>, controls the behavior of Pulsar&#39;s <code>Editor: Toggle Line Comments</code> command. Its value is an object with a <code>start</code> field and an optional <code>end</code> field. The start field is a string that should be prepended to or removed from lines in order to comment or uncomment them.</p><p>In JavaScript, it looks like this:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">comments</span><span class="token operator">:</span>
  <span class="token property">start</span><span class="token operator">:</span> <span class="token string">&#39;// &#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>end</code> field should be used for languages that only support block comments, not line comments. If present, it will be appended to or removed from the end of the last selected line in order to comment or un-comment the selection.</p><p>In CSS, it would look like this:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token property">comments</span><span class="token operator">:</span>
  <span class="token property">start</span><span class="token operator">:</span> <span class="token string">&#39;/* &#39;</span>
  <span class="token property">end</span><span class="token operator">:</span> <span class="token string">&#39; */&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="example-packages" tabindex="-1"><a class="header-anchor" href="#example-packages" aria-hidden="true">#</a> Example Packages</h3><p>More examples of all of these features can be found in the Tree-sitter grammars bundled with Pulsar:</p>`,23),Cs={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-shellscript",target:"_blank",rel:"noopener noreferrer"},Is={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-c",target:"_blank",rel:"noopener noreferrer"},Ss={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-go",target:"_blank",rel:"noopener noreferrer"},js={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-html",target:"_blank",rel:"noopener noreferrer"},As={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-javascript",target:"_blank",rel:"noopener noreferrer"},Ns={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-python",target:"_blank",rel:"noopener noreferrer"},Rs={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-ruby",target:"_blank",rel:"noopener noreferrer"},Ms={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-typescript",target:"_blank",rel:"noopener noreferrer"},Ls=t('<h2 id="creating-a-legacy-textmate-grammar" tabindex="-1"><a class="header-anchor" href="#creating-a-legacy-textmate-grammar" aria-hidden="true">#</a> Creating a Legacy TextMate Grammar</h2><p>Pulsar&#39;s syntax highlighting can be powered by two types of grammars. If you&#39;re adding support for a new language, the preferred way is to <a href="#creating-a-grammar">create a Tree-sitter grammar</a>. Tree-sitter grammars have better performance and provide support for more editor features, such as the <code>Select Larger Syntax Node</code> command.</p><p>This section describes the Pulsar&#39;s legacy support for TextMate grammars.</p><p>TextMate grammars are supported by several popular text editors. They provide a set of <em>regex</em> (regular expression) patterns which are assigned <em>scopes</em>. These scopes are then turned into the CSS classes that you can target in syntax themes.</p><h3 id="getting-started-2" tabindex="-1"><a class="header-anchor" href="#getting-started-2" aria-hidden="true">#</a> Getting Started</h3><p>TextMate Grammars depend heavily on regexes, and you should be comfortable with interpreting and writing regexes before continuing. Note that Pulsar uses the Oniguruma engine, which is very similar to the PCRE or Perl regex engines. Here are some resources to help you out:</p><ul><li>https://www.regular-expressions.info/tutorial.html provides a comprehensive regex tutorial</li><li>https://www.rexegg.com/regex-quickstart.html contains a cheat sheet for various regex expressions</li><li>https://regex101.com/ or https://regexr.com/ allows live prototyping</li><li>https://github.com/kkos/oniguruma/blob/master/doc/RE the docs for the Oniguruma regex engine</li></ul>',7),Ws={href:"https://github.com/bevry/cson#what-is-cson",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://www.json.org/",target:"_blank",rel:"noopener noreferrer"},Us=t('<h3 id="create-the-package-1" tabindex="-1"><a class="header-anchor" href="#create-the-package-1" aria-hidden="true">#</a> Create the Package</h3><p>To get started, press <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+P</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+Shift+P</kbd> and start typing &quot;Generate Package&quot; to generate a new grammar package. Select &quot;Package Generator: Generate Package,&quot; and you&#39;ll be asked for the path where your package will be created. Let&#39;s call ours <code>language-flight-manual</code>.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Grammar packages should start with <em>language-</em>.</p></div>',3),Es=e("code",null,"keymaps",-1),Fs=e("code",null,"lib",-1),Ds=e("code",null,"menus",-1),Ys=e("code",null,"styles",-1),zs=e("code",null,"package.json",-1),Vs=e("code",null,"activationCommands",-1),Hs=e("code",null,"grammars",-1),Gs=e("code",null,"flight-manual.cson",-1),$s={href:"https://gist.github.com/DamnedScholar/622926bcd222eb1ddc483d12103fd315",target:"_blank",rel:"noopener noreferrer"},Bs=t(`<p><code>scopeName</code> is the root <em>scope</em> of your package. This should generally describe what language your grammar package is highlighting; for example, <code>language-javascript</code>&#39;s <code>scopeName</code> is <code>source.js</code> and <code>language-html</code>&#39;s is <code>text.html.basic</code>. Name it <code>source.flight-manual</code> for now.</p><p><code>name</code> is the user-friendly name that is displayed in places like the status bar or the grammar selector. Again, this name should describe what the grammar package is highlighting. Rename it to <code>Flight Manual</code>.</p><p><code>fileTypes</code> is an array of filetypes that <code>language-flight-manual</code> should highlight. We&#39;re interested in highlighting the Flight Manual&#39;s Markdown files, so add the <code>md</code> extension to the list and remove the others.</p><p><code>patterns</code> contains the array of regex patterns that will determine how the file is tokenized.</p><h3 id="adding-patterns" tabindex="-1"><a class="header-anchor" href="#adding-patterns" aria-hidden="true">#</a> Adding Patterns</h3><p>To start, let&#39;s add a basic pattern to tokenize the words <code>Flight Manual</code> whenever they show up. Your regex should look like <code>\\bFlight Manual\\b</code>. Here&#39;s what your <code>patterns</code> block should look like:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;patterns&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;match&#39;</span><span class="token operator">:</span> <span class="token string">&#39;\\\\bFlight Manual\\\\b&#39;</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.other.flight-manual&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),Xs=e("code",null,"match",-1),Js=e("code",null,"name",-1),Ks={href:"https://manual.macromates.com/en/language_grammars",target:"_blank",rel:"noopener noreferrer"},Zs=t(`<div class="custom-container tip"><p class="custom-container-title">Tip</p><p>All scopes should end with the portion of the root <code>scopeName</code> after the leading <code>source</code> or <code>text</code>. In our case, all scopes should end with <code>flight-manual</code>.</p></div><div class="custom-container note"><p class="custom-container-title">Note</p><p>Astute readers may have noticed that the <code>\\b</code> was changed to <code>\\\\b</code> with two backslashes and not one. This is because CSON processes the regex string before handing it to Oniguruma, so all backslashes need to be escaped twice.</p></div><p>But what if we wanted to apply different scopes to <code>Flight</code> and <code>Manual</code>? This is possible by adding capture groups to the regex and then referencing those capture groups in a new <code>capture</code> property. For example:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;match&#39;</span><span class="token operator">:</span> <span class="token string">&#39;\\\\b(Flight) (Manual)\\\\b&#39;</span>
<span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.other.flight-manual&#39;</span>
<span class="token string-property property">&#39;captures&#39;</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.other.flight.flight-manual&#39;</span>
  <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.other.manual.flight-manual&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This will assign the scope <code>keyword.other.flight.flight-manual</code> to <code>Flight</code>, <code>keyword.other.manual.flight-manual</code> to <code>Manual</code>, and <code>entity.other.flight-manual</code> to the overarching <code>Flight Manual</code>.</p><h3 id="begin-end-patterns" tabindex="-1"><a class="header-anchor" href="#begin-end-patterns" aria-hidden="true">#</a> Begin/End Patterns</h3><p>Now let&#39;s say we want to tokenize the <code>{{#note}}</code> blocks that occur in Flight Manual files. Our previous two examples used <code>match</code>, but one limit of <code>match</code> is that it can only match single lines. <code>{{#note}}</code> blocks, on the other hand, can span multiple lines. For these cases, you can use the <code>begin</code>/<code>end</code> keys. Once the regex in the <code>begin</code> key is matched, tokenization will continue until the <code>end</code> pattern is reached.</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;begin&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(#note)(}})&#39;</span>
<span class="token string-property property">&#39;beginCaptures&#39;</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;0&#39;</span><span class="token operator">:</span> <span class="token comment"># The 0 capture contains the entire match</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.start.flight-manual&#39;</span>
  <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
  <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.note.flight-manual&#39;</span>
  <span class="token string-property property">&#39;3&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
<span class="token string-property property">&#39;end&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(/note)(}})&#39;</span>
<span class="token string-property property">&#39;endCaptures&#39;</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;0&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.end.flight-manual&#39;</span>
  <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
  <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.note.flight-manual&#39;</span>
  <span class="token string-property property">&#39;3&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
<span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.note.flight-manual&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Get into the habit of providing punctuation scopes early on. It&#39;s much less effort than having to go back and rewriting all your patterns to support punctuation scopes when your grammar starts to get a bit longer!</p></div><p>Awesome, we have our first multiline pattern! However, if you&#39;ve been following along and playing around in your own <code>.md</code> file, you may have noticed that <code>Flight Manual</code> doesn&#39;t receive any scopes inside a note block. A begin/end block is essentially a subgrammar of its own: once it starts matching, it will only match its own subpatterns until the end pattern is reached. Since we haven&#39;t defined any subpatterns, then clearly nothing will be matched inside of a note block. Let&#39;s fix that!</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;begin&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(#note)(}})&#39;</span>
<span class="token string-property property">&#39;beginCaptures&#39;</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;0&#39;</span><span class="token operator">:</span> <span class="token comment"># The 0 capture contains the entire match</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.start.flight-manual&#39;</span>
  <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
  <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.note.flight-manual&#39;</span>
  <span class="token string-property property">&#39;3&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
<span class="token string-property property">&#39;end&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(/note)(}})&#39;</span>
<span class="token string-property property">&#39;endCaptures&#39;</span><span class="token operator">:</span>
  <span class="token string-property property">&#39;0&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.end.flight-manual&#39;</span>
  <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
  <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.note.flight-manual&#39;</span>
  <span class="token string-property property">&#39;3&#39;</span><span class="token operator">:</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;punctuation.definition.block.flight-manual&#39;</span>
<span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.note.flight-manual&#39;</span>
<span class="token string-property property">&#39;patterns&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;match&#39;</span><span class="token operator">:</span> <span class="token string">&#39;\\\\b(Flight) (Manual)\\\\b&#39;</span>
    <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;entity.other.flight-manual&#39;</span>
    <span class="token string-property property">&#39;captures&#39;</span><span class="token operator">:</span>
      <span class="token string-property property">&#39;1&#39;</span><span class="token operator">:</span>
        <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.other.flight.flight-manual&#39;</span>
      <span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span>
        <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;keyword.other.manual.flight-manual&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>There. With the patterns block, <code>Flight Manual</code> should now receive the proper scopes.</p><h3 id="repositories-and-the-include-keyword-or-how-to-avoid-duplication" tabindex="-1"><a class="header-anchor" href="#repositories-and-the-include-keyword-or-how-to-avoid-duplication" aria-hidden="true">#</a> Repositories and the Include keyword, or how to avoid duplication</h3><p>At this point, note blocks are looking pretty nice, as is the <code>Flight Manual</code> keyword, but the rest of the file is noticeably lacking any form of Markdown syntax highlighting. Is there a way to include the GitHub-Flavored Markdown grammar without copying and pasting everything over? This is where the <code>include</code> keyword comes in. <code>include</code> allows you to <em>include</em> other patterns, even from other grammars! <code>language-gfm</code>&#39;s <code>scopeName</code> is <code>source.gfm</code>, so let&#39;s include that. Our <code>patterns</code> block should now look like the following:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;patterns&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;include&#39;</span><span class="token operator">:</span> <span class="token string">&#39;source.gfm&#39;</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">{</span>
    <span class="token comment"># Flight Manual pattern</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">{</span>
    <span class="token comment"># Note begin/end pattern</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>However, including <code>source.gfm</code> has led to another problem: note blocks still don&#39;t have any Markdown highlighting! The quick fix would be to add the include pattern to the note&#39;s pattern block as well, but now we&#39;re duplicating two patterns. You can imagine that as this grammar grows it&#39;ll quickly become inefficient to keep copying each new global pattern over to the <code>note</code> pattern as well. Therefore, <code>include</code> helpfully recognizes the special <code>$self</code> scope. <code>$self</code> automatically includes all the top-level patterns of the current grammar. The <code>note</code> block can then be simplified to the following:</p><div class="language-coffee ext-coffee line-numbers-mode"><pre class="language-coffee"><code><span class="token string-property property">&#39;begin&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(#note)(}})&#39;</span>
<span class="token comment"># beginCaptures</span>
<span class="token string-property property">&#39;end&#39;</span><span class="token operator">:</span> <span class="token string">&#39;({{)(/note)(}})&#39;</span>
<span class="token comment"># endCaptures</span>
<span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> <span class="token string">&#39;meta.block.note.flight-manual&#39;</span>
<span class="token string-property property">&#39;patterns&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;include&#39;</span><span class="token operator">:</span> <span class="token string">&#39;$self&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="where-to-go-from-here" tabindex="-1"><a class="header-anchor" href="#where-to-go-from-here" aria-hidden="true">#</a> Where to Go from Here</h3><p>There are several good resources out there that help when writing a grammar. The following is a list of some particularly useful ones (some have been linked to in the sections above as well).</p>`,19),Qs={href:"https://gist.github.com/DamnedScholar/622926bcd222eb1ddc483d12103fd315",target:"_blank",rel:"noopener noreferrer"},et={href:"https://gist.github.com/Aerijo/b8c82d647db783187804e86fa0a604a1",target:"_blank",rel:"noopener noreferrer"},nt={href:"http://www.apeth.com/nonblog/stories/textmatebundle.html",target:"_blank",rel:"noopener noreferrer"},at={href:"https://github.com/kkos/oniguruma/blob/master/doc/RE",target:"_blank",rel:"noopener noreferrer"},st={href:"http://manual.macromates.com/en/language_grammars.html",target:"_blank",rel:"noopener noreferrer"},tt={href:"https://github.com/pulsar-edit/first-mate",target:"_blank",rel:"noopener noreferrer"},ot=e("code",null,"first-mate",-1),it={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-python",target:"_blank",rel:"noopener noreferrer"},lt={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-javascript",target:"_blank",rel:"noopener noreferrer"},rt={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/language-html",target:"_blank",rel:"noopener noreferrer"},pt={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages",target:"_blank",rel:"noopener noreferrer"},ct=e("h2",{id:"converting-from-textmate",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#converting-from-textmate","aria-hidden":"true"},"#"),n(" Converting from TextMate")],-1),ut={href:"https://macromates.com",target:"_blank",rel:"noopener noreferrer"},dt=e("h3",{id:"converting-a-textmate-grammar-bundle",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#converting-a-textmate-grammar-bundle","aria-hidden":"true"},"#"),n(" Converting a TextMate Grammar Bundle")],-1),ht=e("p",null,"Converting a TextMate bundle will allow you to use its editor preferences, snippets, and colorization inside Pulsar.",-1),mt={href:"https://en.wikipedia.org/wiki/R_(programming_language)",target:"_blank",rel:"noopener noreferrer"},kt={href:"https://github.com/textmate",target:"_blank",rel:"noopener noreferrer"},gt=t(`<p>You can convert the R bundle with the following command:</p><div class="language-command-line ext-command-line line-numbers-mode"><pre class="language-command-line"><code>$ pulsar -p init --package language-r --convert https://github.com/textmate/r.tmbundle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can now change directory into <code>language-r</code> to see the converted bundle. Once you link your package with the <code>pulsar -p link</code> command, your new package is ready to use. Launch Pulsar and open a <code>.r</code> file in the editor to see it in action!</p><h3 id="converting-a-textmate-syntax-theme" tabindex="-1"><a class="header-anchor" href="#converting-a-textmate-syntax-theme" aria-hidden="true">#</a> Converting a TextMate Syntax Theme</h3>`,4),vt={href:"https://macromates.com",target:"_blank",rel:"noopener noreferrer"},bt=e("h4",{id:"differences",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#differences","aria-hidden":"true"},"#"),n(" Differences")],-1),ft={href:"https://en.wikipedia.org/wiki/Property_list",target:"_blank",rel:"noopener noreferrer"},yt={href:"https://en.wikipedia.org/wiki/Cascading_Style_Sheets",target:"_blank",rel:"noopener noreferrer"},wt={href:"http://lesscss.org",target:"_blank",rel:"noopener noreferrer"},_t=t(`<p>The utility that converts the theme first parses the theme&#39;s plist file and then creates comparable CSS rules and properties that will style Pulsar similarly.</p><h4 id="convert-the-theme" tabindex="-1"><a class="header-anchor" href="#convert-the-theme" aria-hidden="true">#</a> Convert the Theme</h4><p>Download the theme you wish to convert.</p><p>Now, let&#39;s say you&#39;ve downloaded the theme to <code>~/Downloads/MyTheme.tmTheme</code>, you can convert the theme with the following command:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> init <span class="token parameter variable">--theme</span> my-theme <span class="token parameter variable">--convert</span> ~/Downloads/MyTheme.tmTheme
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>You can then change directory to <code>my-theme</code> to see the converted theme.</p><h4 id="activate-the-theme" tabindex="-1"><a class="header-anchor" href="#activate-the-theme" aria-hidden="true">#</a> Activate the Theme</h4><p>Once your theme is installed you can enable it by launching Pulsar and opening the Settings View with the <strong><em>LNX</em></strong>: <em>Edit &gt; Preferences</em> - <strong><em>MAC</em></strong>: <em>Pulsar &gt; Preferences</em> - <strong><em>WIN</em></strong>: <em>File &gt; Preferences</em> menu item. Then select the &quot;Themes&quot; tab on the left side navigation. Finally, choose &quot;My Theme&quot; from the &quot;Syntax Theme&quot; dropdown menu to enable your new theme.</p><p>Your theme is now enabled, open an editor to see it in action!</p><h2 id="publishing" tabindex="-1"><a class="header-anchor" href="#publishing" aria-hidden="true">#</a> Publishing</h2>`,10),xt=e("code",null,"ppm",-1),qt=e("code",null,"pulsar",-1),Pt=e("code",null,"-p",-1),Tt=e("code",null,"--package",-1),Ct=e("code",null,"pulsar -p",-1),It=e("p",null,[n("See more in "),e("a",{href:"#using-ppm"},"Using PPM"),n(".")],-1),St=e("h3",{id:"prepare-your-package",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#prepare-your-package","aria-hidden":"true"},"#"),n(" Prepare Your Package")],-1),jt=e("p",null,"There are a few things you should double check before publishing:",-1),At=t("<li>Your <code>package.json</code> file has <code>name</code>, <code>description</code>, and <code>repository</code> fields.</li><li>Your <code>package.json</code> <code>name</code> is URL Safe, as in it&#39;s not an emoji or special character.</li><li>Your <code>package.json</code> file has a <code>version</code> field with a value of <code>&quot;0.0.0&quot;</code>.</li>",3),Nt=e("code",null,"package.json",-1),Rt=e("code",null,"version",-1),Mt={href:"https://semver.org/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"},Lt=t("<li>Your <code>package.json</code> file has an <code>engines</code> field that contains an entry for <code>atom</code> such as: <code>&quot;engines&quot;: {&quot;atom&quot;: &quot;&gt;=1.0.0 &lt;2.0.0&quot;}</code>.</li><li>Your package has a <code>README.md</code> file at the root.</li><li>Your <code>repository</code> URL in the <code>package.json</code> file is the same as the URL of your repository.</li>",3),Wt={href:"https://github.com",target:"_blank",rel:"noopener noreferrer"},Ot={href:"https://help.github.com/articles/importing-a-git-repository-using-the-command-line/",target:"_blank",rel:"noopener noreferrer"},Ut=e("h3",{id:"publish-your-package",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#publish-your-package","aria-hidden":"true"},"#"),n(" Publish Your Package")],-1),Et={href:"https://web.pulsar-edit.dev/packages",target:"_blank",rel:"noopener noreferrer"},Ft=e("code",null,"https://web.pulsar-edit.dev/packages/your-package-name",-1),Dt=e("p",null,[n("Now let's review what the "),e("code",null,"pulsar -p publish"),n(" command does:")],-1),Yt=e("li",null,"Registers the package name on Pulsar Package Repository if it is being published for the first time.",-1),zt=e("li",null,[n("Updates the "),e("code",null,"version"),n(" field in the "),e("code",null,"package.json"),n(" file and commits it.")],-1),Vt={href:"https://git-scm.com/book/en/Git-Basics-Tagging",target:"_blank",rel:"noopener noreferrer"},Ht=e("li",null,"Pushes the tag and current branch up to GitHub.",-1),Gt=e("li",null,"Updates Pulsar Package Repository with the new version being published.",-1),$t=t(`<p>Now run the following commands to publish your package:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> path-to-your-package
$ pulsar <span class="token parameter variable">-p</span> publish minor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Bt=e("code",null,"pulsar -p publish",-1),Xt={href:"https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/",target:"_blank",rel:"noopener noreferrer"},Jt={href:"https://en.wikipedia.org/wiki/Keychain_(software)",target:"_blank",rel:"noopener noreferrer"},Kt=t(`<p>Your package is now published and available on Pulsar Package Repository. Head on over to <code>https://web.pulsar-edit.dev/packages/your-package-name</code> to see your package&#39;s page.</p><p>With <code>pulsar -p publish</code>, you can bump the version and publish by using</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> publish <span class="token operator">&lt;</span>version-type<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>where <code>version-type</code> can be <code>major</code>, <code>minor</code> and <code>patch</code>.</p><ul><li><strong>MAJOR</strong> version when you make incompatible API changes</li><li><strong>MINOR</strong> version when you add functionality in a backwards compatible manner</li><li><strong>PATCH</strong> version when you make backwards compatible bug fixes</li></ul><p>i.e. to bump a package from v1.<strong>0</strong>.0 to v1.<strong>1</strong>.0:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> publish minor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),Zt={href:"https://semver.org/",target:"_blank",rel:"noopener noreferrer"},Qt=e("p",null,[n("You can also run "),e("code",null,"pulsar -p help publish"),n(" to see all the available options and "),e("code",null,"pulsar -p help"),n(" to see all the other available commands.")],-1),eo=e("h2",{id:"iconography",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#iconography","aria-hidden":"true"},"#"),n(" Iconography")],-1),no={href:"https://github.com/github/octicons/tree/v4.4.0",target:"_blank",rel:"noopener noreferrer"},ao=t('<blockquote><p>NOTE: Some older icons from version <code>2.1.2</code> are still kept for backwards compatibility.</p></blockquote><h3 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h3><p>In the <a href="#atom-styleguide">Styleguide</a> under the &quot;Icons&quot; section you&#39;ll find all the Octicons that are available.</p><p><img src="'+x+`" alt="Octicons in the Styleguide" title="Octicons in the Styleguide"></p><h3 id="usage" tabindex="-1"><a class="header-anchor" href="#usage" aria-hidden="true">#</a> Usage</h3><p>Octicons can be added with simple CSS classes in your markup. Prefix the icon names with <code>icon icon-</code>.</p><p>As an example, to add a monitor icon (<code>device-desktop</code>), use the <code>icon icon-device-desktop</code> classes:</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon icon-device-desktop<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="size" tabindex="-1"><a class="header-anchor" href="#size" aria-hidden="true">#</a> Size</h3><p>Octicons look best with a <code>font-size</code> of <code>16px</code>. It&#39;s already used as the default, so you don&#39;t need to worry about it. In case you prefer a different icon size, try to use multiples of 16 (<code>32px</code>, <code>48px</code> etc.) for the sharpest result. Sizes in between are ok too, but might look a bit blurry for icons with straight lines.</p><h3 id="usability" tabindex="-1"><a class="header-anchor" href="#usability" aria-hidden="true">#</a> Usability</h3>`,11),so={href:"https://atom.io/docs/api/latest/TooltipManager",target:"_blank",rel:"noopener noreferrer"},to=e("code",null,'title="label"',-1),oo=e("h2",{id:"debugging",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#debugging","aria-hidden":"true"},"#"),n(" Debugging")],-1),io={href:"https://github.com/pulsar-edit/.github/blob/main/CONTRIBUTING.md#reporting-bugs",target:"_blank",rel:"noopener noreferrer"},lo=t(`<h3 id="update-to-the-latest-version" tabindex="-1"><a class="header-anchor" href="#update-to-the-latest-version" aria-hidden="true">#</a> Update to the Latest Version</h3><p>You might be running into an issue which was already fixed in a more recent version of Pulsar than the one you&#39;re using.</p><p>If you&#39;re using a released version, check which version of Pulsar you&#39;re using:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">--version</span>
<span class="token operator">&gt;</span> Pulsar  <span class="token builtin class-name">:</span> <span class="token number">1.63</span>.0-dev
<span class="token operator">&gt;</span> Electron: <span class="token number">12.2</span>.3
<span class="token operator">&gt;</span> Chrome  <span class="token builtin class-name">:</span> <span class="token number">89.0</span>.4389.128
<span class="token operator">&gt;</span> Node    <span class="token builtin class-name">:</span> <span class="token number">14.16</span>.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),ro={href:"https://pulsar-edit.dev/download.html",target:"_blank",rel:"noopener noreferrer"},po=t(`<p>If you&#39;re building Pulsar from source, pull down the latest version of master and <a href="#building-pulsar">re-build</a>. Make sure that if logging an issue you include the latest commit hash you built from.</p><h3 id="using-safe-mode" tabindex="-1"><a class="header-anchor" href="#using-safe-mode" aria-hidden="true">#</a> Using Safe Mode</h3><p>A large part of Pulsar&#39;s functionality comes from packages you can install. Pulsar will also execute the code in your <a href="#the-init-file">init script</a> on startup. In some cases, these packages and the code in the init script might be causing unexpected behavior, problems, or performance issues.</p><p>To determine if that is happening, start Pulsar from the terminal in safe mode:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">--safe</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This starts Pulsar, but does not load packages from <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar/packages</code> or <code>~/.pulsar/dev/packages</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar\\packages</code> or <code>%USERPROFILE%\\.pulsar\\dev\\packages</code>. and disables loading of your init script. If you can no longer reproduce the problem in safe mode, it&#39;s likely it was caused by one of the packages or the init script.</p><p>If removing or commenting out all content from the init script and starting Pulsar normally still produces the error, then try figuring out which package is causing trouble. Start Pulsar normally again and open the Settings View with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+,</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+,</kbd>. Since the Settings View allows you to disable each installed package, you can disable packages one by one until you can no longer reproduce the issue. Restart Pulsar or reload Pulsar with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+F5</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+Ctrl+L</kbd>. after you disable each package to make sure it&#39;s completely gone.</p><p>When you find the problematic package, you can disable or uninstall the package. We strongly recommend creating an issue on the package&#39;s GitHub repository.</p><h3 id="clearing-saved-state" tabindex="-1"><a class="header-anchor" href="#clearing-saved-state" aria-hidden="true">#</a> Clearing Saved State</h3><p>Pulsar saves a number of things about your environment when you exit in order to restore Pulsar to the same configuration when you next launch the program. In some cases the state that gets saved can be something undesirable that prevents Pulsar from working properly. In these cases, you may want to clear the state that Pulsar has saved.</p><div class="custom-container danger"><p class="custom-container-title">DANGER</p><p>Clearing the saved state permanently destroys any state that Pulsar has saved <em>across all projects</em>. This includes unsaved changes to files you may have been editing in all projects. This is a destructive action.</p></div><p>Clearing the saved state can be done by opening a terminal and executing:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar --clear-window-state
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="reset-to-factory-defaults" tabindex="-1"><a class="header-anchor" href="#reset-to-factory-defaults" aria-hidden="true">#</a> Reset to Factory Defaults</h3><p>In some cases, you may want to reset Pulsar to &quot;factory defaults&quot;, in other words clear all of your configuration and remove all packages. This can easily be done by opening a terminal and executing:</p>`,15),co=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[n("$ "),e("span",{class:"token function"},"mv"),n(` ~/.pulsar ~/.pulsar-backup
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),uo=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[n("$ "),e("span",{class:"token function"},"mv"),n(` ~/.pulsar ~/.pulsar-backup
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),ho=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[n("$ "),e("span",{class:"token function"},"rename"),n(" %USERPROFILE%"),e("span",{class:"token punctuation"},"\\"),n(`.pulsar .pulsar-backup
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"})])],-1),mo=t(`<p>Once that is complete, you can launch Pulsar as normal. Everything will be just as if you first installed Pulsar.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>The command given above doesn&#39;t delete the old configuration, just puts it somewhere that Pulsar can&#39;t find it. If there are pieces of the old configuration you want to retrieve, you can find them in the <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar-backup</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar-backup</code> directory.</p></div><h3 id="check-for-linked-packages" tabindex="-1"><a class="header-anchor" href="#check-for-linked-packages" aria-hidden="true">#</a> Check for Linked Packages</h3><p>If you develop or contribute to Pulsar packages, there may be left-over packages linked to your <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar/packages</code> or <code>~/.pulsar/dev/packages</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar\\packages</code> or <code>%USERPROFILE%\\.pulsar\\dev\\packages</code>. directories. You can use the <code>pulsar -p links</code> command to list all linked packages:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> links
<span class="token operator">&gt;</span> /Users/pulsy/.pulsar/dev/packages <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> \u2514\u2500\u2500 <span class="token punctuation">(</span>no links<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> /Users/pulsy/.pulsar/packages <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> \u2514\u2500\u2500 color-picker -<span class="token operator">&gt;</span> /Users/pulsy/github/color-picker
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>You can remove links using the <code>pulsar -p unlink</code> command:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> unlink color-picker
<span class="token operator">&gt;</span> Unlinking /Users/pulsy/.pulsar/packages/color-picker \u2713
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>See <code>pulsar -p links --help</code> and <code>pulsar -p unlink --help</code> for more information on these commands.</p><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>You can also use <code>pulsar -p unlink --all</code> to easily unlink all packages and themes.</p></div><h3 id="check-for-incompatible-packages" tabindex="-1"><a class="header-anchor" href="#check-for-incompatible-packages" aria-hidden="true">#</a> Check for Incompatible Packages</h3>`,10),ko={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/incompatible-packages",target:"_blank",rel:"noopener noreferrer"},go=e("p",null,[e("img",{src:q,alt:"Incompatible Packages Status Bar Indicator",title:"Incompatible Packages Status Bar Indicator"})],-1),vo=e("p",null,"If you see this indicator, click it and follow the instructions.",-1),bo=e("h3",{id:"check-pulsar-and-package-settings",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#check-pulsar-and-package-settings","aria-hidden":"true"},"#"),n(" Check Pulsar and Package Settings")],-1),fo=e("p",null,"In some cases, unexpected behavior might be caused by settings in Pulsar or in one of the packages.",-1),yo={href:"https://github.com/pulsar-edit/settings-view",target:"_blank",rel:"noopener noreferrer"},wo=e("strong",null,[e("em",null,"LNX/WIN")],-1),_o=e("kbd",null,"Ctrl+,",-1),xo=e("strong",null,[e("em",null,"MAC")],-1),qo=e("kbd",null,"Cmd+,",-1),Po=e("strong",null,[e("em",null,"LNX")],-1),To=e("em",null,"Edit > Preferences",-1),Co=e("strong",null,[e("em",null,"MAC")],-1),Io=e("em",null,"Pulsar > Preferences",-1),So=e("strong",null,[e("em",null,"WIN")],-1),jo=e("em",null,"File > Preferences",-1),Ao=e("code",null,"Settings View: Open",-1),No={href:"https://github.com/pulsar-edit/command-palette",target:"_blank",rel:"noopener noreferrer"},Ro=e("p",null,[e("img",{src:P,alt:"Settings View"})],-1),Mo=e("p",null,"Some of these options are also available on a per-language basis which means that they may be different for specific languages, for example JavaScript or Python. To check the per-language settings, open the settings for the language package under the Packages tab in the Settings View, for example the language-javascript or language-python package.",-1),Lo={href:"https://github.com/pulsar-edit/wrap-guide",target:"_blank",rel:"noopener noreferrer"},Wo={href:"https://github.com/pulsar-edit/whitespace",target:"_blank",rel:"noopener noreferrer"},Oo=e("p",null,[e("img",{src:T,alt:"Package Settings"})],-1),Uo=e("h3",{id:"check-your-configuration",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#check-your-configuration","aria-hidden":"true"},"#"),n(" Check Your Configuration")],-1),Eo=e("h3",{id:"check-your-keybindings",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#check-your-keybindings","aria-hidden":"true"},"#"),n(" Check Your Keybindings")],-1),Fo={href:"https://github.com/pulsar-edit/keybinding-resolver",target:"_blank",rel:"noopener noreferrer"},Do=t('<p>Show the keybinding resolver with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+.</kbd> - <strong><em>MAC</em></strong>: <kbd>Cmd+.</kbd>, or with <code>Keybinding Resolver: Show</code> from the Command palette. With the Keybinding Resolver shown, press a key combination:</p><p><img src="'+I+'" alt="Keybinding Resolver"></p><p>The Keybinding Resolver shows you a list of keybindings that exist for the key combination, where each item in the list has the following:</p><ul><li>the command for the keybinding</li><li>the CSS selector used to define the context in which the keybinding is valid</li><li>the file in which the keybinding is defined</li></ul><p>The keybindings are listed in two colors. All the keybindings that are matched but not executed are shown in gray. The one that is executed, if any, is shown in green. If the command you wanted to trigger isn&#39;t listed, then a keybinding for that command hasn&#39;t been loaded.</p>',5),Yo=e("ul",null,[e("li",null,[e("p",null,"The key combination was not used in the context defined by the keybinding's selector"),e("p",null,[n("For example, you can't trigger the keybinding for the "),e("code",null,"tree-view:add-file"),n(" command if the Tree View is not focused.")])]),e("li",null,[e("p",null,"There is another keybinding that took precedence"),e("p",null,"This often happens when you install a package which defines keybindings that conflict with existing keybindings. If the package's keybindings have selectors with higher specificity or were loaded later, they'll have priority over existing ones.")])],-1),zo=e("code",null,"keymap.cson",-1),Vo={href:"https://github.com/orgs/pulsar-edit/discussions",target:"_blank",rel:"noopener noreferrer"},Ho=e("h3",{id:"check-font-rendering-issues",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#check-font-rendering-issues","aria-hidden":"true"},"#"),n(" Check Font Rendering Issues")],-1),Go=e("strong",null,[e("em",null,"LNX/WIN")],-1),$o=e("kbd",null,"Ctrl+Shift+I",-1),Bo=e("strong",null,[e("em",null,"MAC")],-1),Xo=e("kbd",null,"Alt+Cmd+I",-1),Jo={href:"https://developers.google.com/web/tools/chrome-devtools/inspect-styles/",target:"_blank",rel:"noopener noreferrer"},Ko=t('<p><img src="'+S+'" alt="Fonts In Use" title="Fonts In Use"></p><h3 id="check-for-errors-in-the-developer-tools" tabindex="-1"><a class="header-anchor" href="#check-for-errors-in-the-developer-tools" aria-hidden="true">#</a> Check for Errors in the Developer Tools</h3><p>When an unexpected error occurs in Pulsar, you will normally see a red notification which provides details about the error and allows you to create an issue on the right repository:</p><p><img src="'+j+'" alt="Exception Notification"></p><p>Not all errors are logged with a notification so if you suspect you&#39;re experiencing an error but there&#39;s no notification, you can also look for errors in the developer tools Console tab. To access the Console tab, press <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+I</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+I</kbd> to open developer tools and then click the Console tab:</p><p><img src="'+A+'" alt="DevTools Error"></p><p>If there are multiple errors, you can scroll down to the bottom of the panel to see the most recent error. Or while reproducing an error, you can right click in the Console tab panel, select <code>Clear console</code> to remove all Console output, and then reproduce the error to see what errors are logged to the Console tab.</p><div class="custom-container note"><p class="custom-container-title">Note</p><p>When running in Dev Mode, the developer tools are automatically shown with the error logged in the Console tab.</p></div><h3 id="find-crash-logs" tabindex="-1"><a class="header-anchor" href="#find-crash-logs" aria-hidden="true">#</a> Find Crash Logs</h3>',9),Zo=e("p",null,"When Pulsar crashes, it should write a core dump if system settings permit. In order to find whether the core dump is written and to where, consult the documentation for your distribution of Linux. Once you have the core dump, you can save it to send in later if it is needed for debugging.",-1),Qo=e("p",null,[n("When Pulsar crashes, you will find a crash dump in Console.app. You can launch Console.app using Spotlight or you can find it in "),e("code",null,"/Applications/Utilities/Console.app"),n(". Once you have launched the program, you can find the latest crash dump by following these instructions:")],-1),ei=e("ol",null,[e("li",null,'Click "User Reports" in the left-most column'),e("li",null,[n("Find the latest entry in the middle column that starts with "),e("code",null,"Pulsar"),n(" and ends with "),e("code",null,".crash")])],-1),ni=e("p",null,"Once you have the crash dump, you can save it to send in later if it is needed for debugging.",-1),ai=e("p",null,[n("When Pulsar crashes, you will find a crash dump inside your "),e("code",null,"%TEMP%\\Pulsar Crashes"),n(" directory. It will be the newest file with the "),e("code",null,".dmp"),n(" extension. Once you have the crash dump, you can save it to send in later if it is needed for debugging.")],-1),si=e("h3",{id:"diagnose-startup-performance",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#diagnose-startup-performance","aria-hidden":"true"},"#"),n(" Diagnose Startup Performance")],-1),ti={href:"https://github.com/pulsar-edit/timecop",target:"_blank",rel:"noopener noreferrer"},oi=e("p",null,[e("img",{src:C,alt:"Timecop"})],-1),ii=e("p",null,"Timecop displays the following information:",-1),li=e("ul",null,[e("li",null,"Pulsar startup times"),e("li",null,"File compilation times"),e("li",null,"Package loading and activation times"),e("li",null,"Theme loading and activation times")],-1),ri=e("p",null,"If a specific package has high load or activation times, you might consider reporting an issue to the maintainers. You can also disable the package to potentially improve future startup times.",-1),pi=e("h3",{id:"diagnose-runtime-performance",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#diagnose-runtime-performance","aria-hidden":"true"},"#"),n(" Diagnose Runtime Performance")],-1),ci={href:"https://github.com/pulsar-edit/.github/blob/main/CONTRIBUTING.md#reporting-bugs",target:"_blank",rel:"noopener noreferrer"},ui=t('<p>To run a profile, open the Developer Tools with <strong><em>LNX/WIN</em></strong>: <kbd>Ctrl+Shift+I</kbd> - <strong><em>MAC</em></strong>: <kbd>Alt+Cmd+I</kbd>. From there:</p><ol><li>Click the Profiles tab</li><li>Select &quot;Collect JavaScript CPU Profile&quot;</li><li>Click &quot;Start&quot;</li></ol><p><img src="'+N+'" alt="DevTools Profiler"></p><p>Once that is done, then perform the slow action to capture a recording. When finished, click &quot;Stop&quot;. Switch to the &quot;Chart&quot; view, and a graph of the recorded actions will appear. You can save and post the profile data by clicking &quot;Save&quot; next to the profile&#39;s name in the left panel.</p><p><img src="'+R+'" alt="DevTools Profiler"></p>',5),di={href:"https://developer.chrome.com/devtools/docs/cpu-profiling",target:"_blank",rel:"noopener noreferrer"},hi=t(`<h3 id="profiling-startup-performance" tabindex="-1"><a class="header-anchor" href="#profiling-startup-performance" aria-hidden="true">#</a> Profiling Startup Performance</h3><p>If the time for loading the window looks high, you can create a CPU profile for that period using the <code>--profile-startup</code> command line flag when starting Pulsar:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar --profile-startup <span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>This will automatically capture a CPU profile as Pulsar is loading and open the Developer Tools once Pulsar loads. From there:</p><ol><li>Click the Profiles tab in the Developer Tools</li><li>Select the &quot;startup&quot; profile</li><li>Click the &quot;Save&quot; link for the startup profile</li></ol><p>You can then include the startup profile in any issue you report.</p><h3 id="check-your-build-tools" tabindex="-1"><a class="header-anchor" href="#check-your-build-tools" aria-hidden="true">#</a> Check Your Build Tools</h3><p>If you are having issues installing a package using <code>pulsar -p install</code>, this could be because the package has dependencies on libraries that contain native code. This means you will need to have a C++ compiler and Python installed to be able to install it. You can run <code>pulsar -p install --check</code> to see if the Pulsar package manager can build native code on your machine.</p><p>Check out the pre-requisites in the <a href="#requirements-and-dependencies">build instructions</a> for your platform for more details.</p><h3 id="check-if-your-gpu-is-causing-the-problem" tabindex="-1"><a class="header-anchor" href="#check-if-your-gpu-is-causing-the-problem" aria-hidden="true">#</a> Check if your GPU is causing the problem</h3><p>If you encounter flickering or other rendering issues, you can stop Pulsar from using your Graphics Processing Unit (GPU) with the <code>--disable-gpu</code> Chromium flag to see if the fault lies with your GPU:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar --disable-gpu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Chromium (and thus Pulsar) normally uses the GPU to accelerate drawing parts of the interface. <code>--disable-gpu</code> tells Pulsar to not even attempt to do this, and just use the CPU for rendering everything. This means that the parts of the interface that would normally be accelerated using the GPU will instead take slightly longer and render on the CPU. This likely won&#39;t make a noticeable difference, but does slightly increase the battery usage on portable devices as the CPU has to work harder to do the things the GPU is optimized for.</p><p>Two other Chromium flags that are useful for debugging are <code>--enable-gpu-rasterization</code> and <code>--force-gpu-rasterization</code>:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar --enable-gpu-rasterization --force-gpu-rasterization
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>--enable-gpu-rasterization</code> allows other commands to determine how a layer tile (graphics) should be drawn and <code>--force-gpu-rasterization</code> determines that the Skia GPU backend should be used for drawing layer tiles (only valid with GPU accelerated compositing).</p><p>Be sure to use Chromium flags at the end of the terminal call if you want to use other Pulsar flags as they will not be executed after the Chromium flags e.g.:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">--safe</span> --enable-gpu-rasterization --force-gpu-rasterization
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="writing-specs" tabindex="-1"><a class="header-anchor" href="#writing-specs" aria-hidden="true">#</a> Writing Specs</h2><p>We&#39;ve looked at and written a few specs through the examples already. Now it&#39;s time to take a closer look at the spec framework itself. How exactly do you write tests in Pulsar?</p>`,20),mi={href:"https://jasmine.github.io/archives/1.3/introduction",target:"_blank",rel:"noopener noreferrer"},ki=e("h3",{id:"create-a-new-spec",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#create-a-new-spec","aria-hidden":"true"},"#"),n(" Create a New Spec")],-1),gi={href:"https://github.com/pulsar-edit/pulsar/tree/master/spec",target:"_blank",rel:"noopener noreferrer"},vi={href:"https://github.com/pulsar-edit/markdown-preview/tree/master/spec",target:"_blank",rel:"noopener noreferrer"},bi=e("code",null,"spec",-1),fi=t(`<h4 id="create-a-spec-file" tabindex="-1"><a class="header-anchor" href="#create-a-spec-file" aria-hidden="true">#</a> Create a Spec File</h4><p>Spec files <strong>must</strong> end with <code>-spec</code> so add <code>sample-spec.js</code> to the <code>spec</code> directory.</p><h4 id="add-one-or-more-describe-methods" tabindex="-1"><a class="header-anchor" href="#add-one-or-more-describe-methods" aria-hidden="true">#</a> Add One or More <code>describe</code> Methods</h4><p>The <code>describe</code> method takes two arguments, a description and a function. If the description explains a behavior it typically begins with <code>when</code>; if it is more like a unit test it begins with the method name.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when a test is written&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// contents</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>or</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;Editor::moveUp&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// contents</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="add-one-or-more-it-methods" tabindex="-1"><a class="header-anchor" href="#add-one-or-more-it-methods" aria-hidden="true">#</a> Add One or More <code>it</code> Methods</h4><p>The <code>it</code> method also takes two arguments, a description and a function. Try and make the description flow with the <code>it</code> method. For example, a description of &quot;this should work&quot; doesn&#39;t read well as &quot;it this should work&quot;. But a description of &quot;should work&quot; sounds great as &quot;it should work&quot;.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when a test is written&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;has some expectations that should pass&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// Expectations</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="add-one-or-more-expectations" tabindex="-1"><a class="header-anchor" href="#add-one-or-more-expectations" aria-hidden="true">#</a> Add One or More Expectations</h4>`,11),yi={href:"https://jasmine.github.io/archives/1.3/introduction#section-Expectations",target:"_blank",rel:"noopener noreferrer"},wi=t(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when a test is written&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;has some expectations that should pass&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;oranges&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="custom-matchers" tabindex="-1"><a class="header-anchor" href="#custom-matchers" aria-hidden="true">#</a> Custom Matchers</h5><p>In addition to the Jasmine&#39;s built-in matchers, Pulsar includes the following:</p>`,3),_i={href:"https://github.com/velesin/jasmine-jquery",target:"_blank",rel:"noopener noreferrer"},xi=t("<li>The <code>toBeInstanceOf</code> matcher is for the <code>instanceof</code> operator</li><li>The <code>toHaveLength</code> matcher compares against the <code>.length</code> property</li><li>The <code>toExistOnDisk</code> matcher checks if the file exists in the filesystem</li><li>The <code>toHaveFocus</code> matcher checks if the element currently has focus</li><li>The <code>toShow</code> matcher tests if the element is visible in the dom</li>",5),qi={href:"https://github.com/pulsar-edit/pulsar/blob/master/spec/spec-helper.js",target:"_blank",rel:"noopener noreferrer"},Pi=t(`<h3 id="asynchronous-specs" tabindex="-1"><a class="header-anchor" href="#asynchronous-specs" aria-hidden="true">#</a> Asynchronous Specs</h3><p>Writing Asynchronous specs can be tricky at first. Some examples.</p><h4 id="promises" tabindex="-1"><a class="header-anchor" href="#promises" aria-hidden="true">#</a> Promises</h4><p>Working with promises is rather easy in Pulsar. You can use our <code>waitsForPromise</code> function.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when we open a file&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;should be opened in an editor&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			atom<span class="token punctuation">.</span>workspace
				<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;c.coffee&quot;</span><span class="token punctuation">)</span>
				<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">expect</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;c.coffee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This method can be used in the <code>describe</code>, <code>it</code>, <code>beforeEach</code> and <code>afterEach</code> functions.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when we open a file&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;c.coffee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;should be opened in an editor&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">expect</span><span class="token punctuation">(</span>atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">getActiveTextEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span>
			<span class="token string">&quot;c.coffee&quot;</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>If you need to wait for multiple promises use a new <code>waitsForPromise</code> function for each promise. (Caution: Without <code>beforeEach</code> this example will fail!)</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;waiting for the packages to load&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> atom<span class="token punctuation">.</span>workspace<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;sample.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> atom<span class="token punctuation">.</span>packages<span class="token punctuation">.</span><span class="token function">activatePackage</span><span class="token punctuation">(</span><span class="token string">&quot;tabs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> atom<span class="token punctuation">.</span>packages<span class="token punctuation">.</span><span class="token function">activatePackage</span><span class="token punctuation">(</span><span class="token string">&quot;tree-view&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;should have waited long enough&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">expect</span><span class="token punctuation">(</span>atom<span class="token punctuation">.</span>packages<span class="token punctuation">.</span><span class="token function">isPackageActive</span><span class="token punctuation">(</span><span class="token string">&quot;tabs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">expect</span><span class="token punctuation">(</span>atom<span class="token punctuation">.</span>packages<span class="token punctuation">.</span><span class="token function">isPackageActive</span><span class="token punctuation">(</span><span class="token string">&quot;tree-view&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>waitsForPromise</code> can take an additional object argument before the function. The object can have the following properties:</p><ul><li><code>shouldReject</code> Whether the promise should reject or resolve (default: <code>false</code>)</li><li><code>timeout</code> The amount of time (in ms) to wait for the promise to be resolved or rejected (default: <code>p<wbr>rocess.env.CI ? 60000 : 5000</code>)</li><li><code>label</code> The label to display if promise times out (default: <code>&#39;promise to be resolved or rejected&#39;</code>)</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when we open a file&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;should be opened in an editor&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">waitsForPromise</span><span class="token punctuation">(</span>
			<span class="token punctuation">{</span>
				<span class="token literal-property property">shouldReject</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">,</span>
				<span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&quot;promise to be resolved or rejected&quot;</span><span class="token punctuation">,</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
				atom<span class="token punctuation">.</span>workspace
					<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;c.coffee&quot;</span><span class="token punctuation">)</span>
					<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">expect</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toContain</span><span class="token punctuation">(</span><span class="token string">&quot;c.coffee&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="asynchronous-functions-with-callbacks" tabindex="-1"><a class="header-anchor" href="#asynchronous-functions-with-callbacks" aria-hidden="true">#</a> Asynchronous Functions with Callbacks</h4><p>Specs for asynchronous functions can be done using the <code>waitsFor</code> and <code>runs</code> functions. A simple example.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;fs.readdir(path, cb)&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&quot;is async&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> spy <span class="token operator">=</span> jasmine<span class="token punctuation">.</span><span class="token function">createSpy</span><span class="token punctuation">(</span><span class="token string">&quot;fs.readdirSpy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/example&quot;</span><span class="token punctuation">,</span> spy<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">waitsFor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> spy<span class="token punctuation">.</span>callCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">runs</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> exp <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;example.coffee&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">.</span>mostRecentCall<span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span>exp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalledWith</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;example.coffee&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,15),Ti={href:"https://jasmine.github.io/archives/1.3/introduction#section-Asynchronous_Support",target:"_blank",rel:"noopener noreferrer"},Ci=t(`<h3 id="running-specs" tabindex="-1"><a class="header-anchor" href="#running-specs" aria-hidden="true">#</a> Running Specs</h3><p>Most of the time you&#39;ll want to run specs by triggering the <code>window:run-package-specs</code> command. This command is not only to run package specs, it can also be used to run Pulsar core specs when working on Pulsar itself. This will run all the specs in the current project&#39;s <code>spec</code> directory.</p><p>To run a limited subset of specs use the <code>fdescribe</code> or <code>fit</code> methods. You can use those to focus a single spec or several specs. Modified from the example above, focusing an individual spec looks like this:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&quot;when a test is written&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">fit</span><span class="token punctuation">(</span><span class="token string">&quot;has some expectations that should pass&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">&quot;oranges&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>not<span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token string">&quot;apples&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="running-on-ci" tabindex="-1"><a class="header-anchor" href="#running-on-ci" aria-hidden="true">#</a> Running on CI</h4>`,5),Ii={href:"https://blog.atom.io/2014/04/25/ci-for-your-packages.html",target:"_blank",rel:"noopener noreferrer"},Si={href:"http://blog.atom.io/2014/07/28/windows-ci-for-your-packages.html",target:"_blank",rel:"noopener noreferrer"},ji=t(`<h4 id="running-via-the-command-line" tabindex="-1"><a class="header-anchor" href="#running-via-the-command-line" aria-hidden="true">#</a> Running via the Command Line</h4><p>To run tests on the command line, run Pulsar with the <code>--test</code> flag followed by one or more paths to test files or directories. You can also specify a <code>--timeout</code> option, which will force-terminate your tests after a certain number of seconds have passed.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>pulsar <span class="token parameter variable">--test</span> <span class="token parameter variable">--timeout</span> <span class="token number">60</span> ./test/test-1.js ./test/test-2.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="customizing-your-test-runner" tabindex="-1"><a class="header-anchor" href="#customizing-your-test-runner" aria-hidden="true">#</a> Customizing your test runner</h3><p>By default, package tests are run with Jasmine 1.3, which is outdated but can&#39;t be changed for compatibility reasons. You can specify your own custom test runner by including an <code>atomTestRunner</code> field in your <code>package.json</code>. Pulsar will require whatever module you specify in this field, so you can use a relative path or the name of a module in your package&#39;s dependencies.</p><p>Your test runner module must export a single function, which Pulsar will call within a new window to run your package&#39;s tests. Your function will be called with the following parameters:</p><ul><li><code>testPaths</code> An array of paths to tests to run. Could be paths to files or directories.</li><li><code>buildAtomEnvironment</code> A function that can be called to construct an instance of the <code>atom</code> global. No <code>atom</code> global will be explicitly assigned, but you can assign one in your runner if desired. This function should be called with the following parameters: <ul><li><code>applicationDelegate</code> An object responsible for Pulsar&#39;s interaction with the browser process and host OS. Use <code>buildDefaultApplicationDelegate</code> for a default instance. You can override specific methods on this object to prevent or test these interactions.</li><li><code>window</code> A window global.</li><li><code>document</code> A document global.</li><li><code>configDirPath</code> A path to the configuration directory (usually <code>~/.pulsar</code>).</li><li><code>enablePersistence</code> A boolean indicating whether the Pulsar environment should save or load state from the file system. You probably want this to be <code>false</code>.</li></ul></li><li><code>buildDefaultApplicationDelegate</code> A function that builds a default instance of the application delegate, suitable to be passed as the <code>applicationDelegate</code> parameter to <code>buildAtomEnvironment</code>.</li><li><code>logFile</code> An optional path to a log file to which test output should be logged.</li><li><code>headless</code> A boolean indicating whether or not the tests are being run from the command line via <code>pulsar --test</code>.</li><li><code>legacyTestRunner</code> This function can be invoked to run the legacy Jasmine runner, giving your package a chance to transition to a new test runner while maintaining a subset of its tests in the old environment.</li></ul><p>Your function should return a promise that resolves to an exit code when your tests are finished running. This exit code will be returned when running your tests via the command line.</p><h2 id="handling-uris" tabindex="-1"><a class="header-anchor" href="#handling-uris" aria-hidden="true">#</a> Handling URIs</h2><p>Packages have the ability to handle special URIs triggered from the system; for example, a package named <code>my-package</code> can register itself to handle any URI starting with <code>atom://my-package/</code>.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Handling URIs triggered from other applications, like a web browser, is a powerful tool, but also one that can be jarring. You should shape your package&#39;s user experience to handle this well. In general, you should <strong>avoid taking direct action on behalf of a user</strong>. For example, a URI handler that immediately installs a package is too invasive, but a URI handler that shows the package&#39;s pane in the settings view is useful. A URI handler that begins to clone a repo is overly aggressive, but a URI handler that <em>prompts</em> the user to clone a repo is okay.</p><p>Any package with a URI handler that we feel violates this guideline is subject to removal from the Pulsar package registry at our discretion.</p></div><h3 id="modifying-your-package-json" tabindex="-1"><a class="header-anchor" href="#modifying-your-package-json" aria-hidden="true">#</a> Modifying your <code>package.json</code></h3><p>The first step to handling URIs from your package is to modify its <code>package.json</code> file. You should add a new key called <code>uriHandler</code>, and its value should be an object.</p><p>The <code>uriHandler</code> object <em>must</em> contain a key called <code>method</code> with a string value that tells Pulsar which method in your package to call when a URI needs to be handled. The object can <em>optionally</em> include a key called <code>deferActivation</code> which can be set to the boolean <code>false</code> to prevent Pulsar from deferring activation of your package \u2014\xA0see more below.</p><p>For example, if we want our package <code>my-package</code> to handle URIs with a method on our package&#39;s main module called <code>handleURI</code>, we could add the following to our <code>package.json</code>:</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;uriHandler&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;handleURI&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="modifying-your-main-module" tabindex="-1"><a class="header-anchor" href="#modifying-your-main-module" aria-hidden="true">#</a> Modifying your Main Module</h3>`,17),Ai=e("code",null,"atom://my-package/",-1),Ni=e("code",null,"handleURI",-1),Ri={href:"https://nodejs.org/api/url.html#url_url_parse_urlstring_parsequerystring_slashesdenotehost",target:"_blank",rel:"noopener noreferrer"},Mi=e("code",null,"url.parse(uri, true)",-1),Li=t(`<p>Here&#39;s a sample package, written in JavaScript, that handles URIs with the <code>package.json</code> configuration we saw above.</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// normal activation code here</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token function">handleURI</span><span class="token punctuation">(</span><span class="token parameter">parsedUri</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parsedUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When Pulsar handles, for example, the URI <code>atom://my-package/my/test/url?value=42&amp;other=false</code>, the package would log out something like the following:</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;atom:&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">slashes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">auth</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;my-package&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;my-package&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hash</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&#39;?value=true&amp;other=false&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;42&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">other</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/my/test/url&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/my/test/url?value=true&amp;other=false&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;atom://my-package/my/test/url?value=true&amp;other=false&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Notice that the query string arguments are available in the <code>query</code> property, but are strings \u2014\xA0you&#39;ll have to convert to other native types yourself.</p><h3 id="controlling-activation-deferral" tabindex="-1"><a class="header-anchor" href="#controlling-activation-deferral" aria-hidden="true">#</a> Controlling Activation Deferral</h3><p>For performance reasons, adding a <code>uriHandler</code> entry to your package&#39;s <code>package.json</code> will enable <em>deferred activation</em>. This means that Pulsar will not activate your package until it has a URI for it to handle \u2014\xA0it will then activate your package and then immediately call the URI handler method. If you want to disable the deferred activation, ensuring your package is activated upon startup, you can add <code>&quot;deferActivation&quot;: false</code> to the URI handler config. For example,</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;uriHandler&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;handleURI&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deferActivation&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Before doing this, make sure your package actually needs to be activated immediately \u2014\xA0disabling deferred activation means Pulsar takes longer to start since it has to activate all packages without deferred activation.</p><h3 id="linux-support" tabindex="-1"><a class="header-anchor" href="#linux-support" aria-hidden="true">#</a> Linux Support</h3><p>Because URI handling is different across operating systems and distributions, there is no built-in URI handler support for Pulsar on Linux. If you want to configure URI handling on your system yourself, then you should configure <code>atom:</code> protocol URI&#39;s to trigger Pulsar with the <code>--uri-handler</code> flag; for example, the URI <code>atom://test/uri</code> should launch Atom via <code>atom --uri-handler atom://test/uri</code>.</p><h2 id="core-uris" tabindex="-1"><a class="header-anchor" href="#core-uris" aria-hidden="true">#</a> Core URIs</h2><p>Pulsar provides a core URI to handle opening files with the syntax <code>atom://core/open/file?filename=&lt;filepath&gt;&amp;line=&lt;line&gt;&amp;column=&lt;col&gt;</code></p><h3 id="cross-platform-compatibility" tabindex="-1"><a class="header-anchor" href="#cross-platform-compatibility" aria-hidden="true">#</a> Cross-Platform Compatibility</h3><p>Pulsar runs on a number of platforms and while Electron and Node take care of many of the details there are still some considerations to ensure your package works on other operating systems.</p><h4 id="symlinks" tabindex="-1"><a class="header-anchor" href="#symlinks" aria-hidden="true">#</a> Symlinks</h4><p>File symlinks can be used on Windows by non-Administrators by specifying &#39;junction&#39; as the type (this argument is ignored on macOS &amp; Linux).</p><p>Also consider:</p><ul><li><em>Symlinks committed to Git</em> will not checkout correctly on Windows - <em>dynamically create what you need with <code>fs.symlink</code> instead</em></li><li><em>Symlinked directories</em> are only available to Administrators on Windows - <em>avoid a dependency on them</em></li></ul><h4 id="filenames" tabindex="-1"><a class="header-anchor" href="#filenames" aria-hidden="true">#</a> Filenames</h4><ul><li><em>Reserved filenames</em> on Windows are <code>com1</code>-<code>com9</code>, <code>lpt1</code>-<code>lpt9</code>, <code>con</code>, <code>nul</code>, <code>aux</code> and <code>prn</code> (regardless of extension, e.g. <code>prn.txt</code> is disallowed)</li><li><em>Reserved characters</em> on Windows are ? \\ / &lt; &gt; ? % | : &quot; <em>so avoid where possible</em></li><li><em>Names with spaces</em> when passed to the command line; <ul><li>Linux and macOS require <em>a backslash before each space</em> e.g. <code>/my\\ test</code></li><li>Windows requires you <em>surround the path with double quotes</em> e.g. <code>&quot;c:\\my test&quot;</code></li></ul></li></ul><h4 id="file-paths" tabindex="-1"><a class="header-anchor" href="#file-paths" aria-hidden="true">#</a> File paths</h4><ul><li>Windows uses <code>\\</code> although some tools and PowerShell allow <code>/</code> too</li><li>macOS and Linux use <code>/</code></li></ul><p>You can dynamically find out what your platform uses with <code>path.sep</code> or better yet <em>use the node path library functions</em> such as <code>join</code> and <code>normalize</code> which automatically take care of this.</p><p>Windows supports up to <em>250 characters</em> for a path - <em>avoid deeply nested directory structures</em></p><h4 id="paths-are-not-urls" tabindex="-1"><a class="header-anchor" href="#paths-are-not-urls" aria-hidden="true">#</a> Paths are not URLs</h4><p>URL parsing routines should not be used on file paths. While they initially look like a relative path it will fail in a number of scenarios on all platforms.</p><ul><li>Various characters are misinterpreted, e.g. <code>?</code> as query string, <code>#</code> as a fragment identifier</li><li><strong>Windows</strong> drive specifiers are incorrectly parsed as a protocol</li></ul><p>If you need to use a path for a URL use the file: protocol with an absolute path instead to ensure drive letters and slashes are appropriately addressed, e.g. <code>file:///c|/test/pic.png</code></p><h4 id="fs-stat-on-directories" tabindex="-1"><a class="header-anchor" href="#fs-stat-on-directories" aria-hidden="true">#</a> <code>fs.stat</code> on directories</h4><p>The <code>fs.stat</code> function does not return the size of the contents of a directory but rather the allocation size of the directory itself. This returns 0 on Windows and 1024 on macOS and so should not be relied upon.</p><h4 id="path-relative-can-t-traverse-drives" tabindex="-1"><a class="header-anchor" href="#path-relative-can-t-traverse-drives" aria-hidden="true">#</a> <code>path.relative</code> can&#39;t traverse drives</h4><ul><li>On a Linux or macOS system <code>path.relative</code> can be used to calculate a relative path to traverse between any two given paths.</li><li>On Windows this is not always possible as it can contain multiple absolute roots, e.g. <code>c:\\</code> and <code>d:\\</code></li></ul><h4 id="rapid-file-operations" tabindex="-1"><a class="header-anchor" href="#rapid-file-operations" aria-hidden="true">#</a> Rapid file operations</h4>`,34),Wi={href:"https://www.npmjs.com/package/rimraf",target:"_blank",rel:"noopener noreferrer"},Oi=t(`<h4 id="line-endings" tabindex="-1"><a class="header-anchor" href="#line-endings" aria-hidden="true">#</a> Line endings</h4><ul><li>Linux and macOS use <code>LF</code></li><li>Windows uses <code>CRLF</code></li><li>Git on Windows often has <code>autocrlf</code> set which automatically converts between the two</li></ul><p>If you are writing specs that use text file fixtures consider that this will interfere with file lengths, hash codes and direct text comparisons. It will also change the Atom selection length by 1 character per line.</p><p>If you have spec fixtures that are text files you may want to tell Git to force LF, CRLF or not convert them by specifying the paths in <code>.gitattributes</code> e.g.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>spec/fixtures/always-crlf.txt eol=crlf
spec/fixtures/always-lf.txt eol=lf
spec/fixtures/leave-as-is.txt -text
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="contributing-to-official-pulsar-packages" tabindex="-1"><a class="header-anchor" href="#contributing-to-official-pulsar-packages" aria-hidden="true">#</a> Contributing to Official Pulsar Packages</h2>`,6),Ui={href:"https://github.com/pulsar-edit/pulsar",target:"_blank",rel:"noopener noreferrer"},Ei=t(`<h3 id="hacking-on-packages" tabindex="-1"><a class="header-anchor" href="#hacking-on-packages" aria-hidden="true">#</a> Hacking on Packages</h3><h4 id="cloning" tabindex="-1"><a class="header-anchor" href="#cloning" aria-hidden="true">#</a> Cloning</h4><p>The first step is creating your own clone. For some packages, you may also need to install the <a href="#building-pulsar">requirements necessary for building Pulsar</a> in order to run <code>pulsar -p install</code>.</p><p>For example, if you want to make changes to the <code>tree-view</code> package, fork the repo on your GitHub account, then clone it:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/pulsar-edit/tree-view.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Next install all the dependencies:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> tree-view
$ pulsar <span class="token parameter variable">-p</span> <span class="token function">install</span>
<span class="token operator">&gt;</span> Installing modules \u2713
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now you can link it to development mode so when you run an Pulsar window with <code>pulsar -p --dev</code>, you will use your fork instead of the built in package:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ pulsar <span class="token parameter variable">-p</span> <span class="token function">link</span> <span class="token parameter variable">-d</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="running-in-development-mode-1" tabindex="-1"><a class="header-anchor" href="#running-in-development-mode-1" aria-hidden="true">#</a> Running in Development Mode</h4><p>Editing a package in Pulsar is a bit of a circular experience: you&#39;re using Pulsar to modify itself. What happens if you temporarily break something? You don&#39;t want the version of Pulsar you&#39;re using to edit to become useless in the process. For this reason, you&#39;ll only want to load packages in <strong>development mode</strong> while you are working on them. You&#39;ll perform your editing in <strong>stable mode</strong>, only switching to development mode to test your changes.</p><p>To open a development mode window, use the <code>Application: Open Dev</code> command. You can also run dev mode from the command line with <code>pulsar --dev</code>.</p><p>To load your package in development mode, create a symlink to it in <strong><em>LNX/MAC</em></strong>: <code>~/.pulsar/dev/packages</code> - <strong><em>WIN</em></strong>: <code>%USERPROFILE%\\.pulsar\\dev\\packages</code>. This occurs automatically when you clone the package with <code>pulsar -p develop</code>. You can also run <code>pulsar -p link --dev</code> and <code>pulsar -p unlink --dev</code> from the package directory to create and remove dev-mode symlinks.</p><h4 id="installing-dependencies" tabindex="-1"><a class="header-anchor" href="#installing-dependencies" aria-hidden="true">#</a> Installing Dependencies</h4><p>You&#39;ll want to keep dependencies up to date by running <code>pulsar -p update</code> after pulling any upstream changes.</p><h2 id="creating-a-fork-of-a-core-package" tabindex="-1"><a class="header-anchor" href="#creating-a-fork-of-a-core-package" aria-hidden="true">#</a> Creating a Fork of a Core Package</h2>`,16),Fi={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages",target:"_blank",rel:"noopener noreferrer"},Di=e("code",null,"packages",-1),Yi=t('<div class="custom-container tip"><p class="custom-container-title">Tip</p><p>In most cases, we recommend <a href="#package-generator">generating a brand new package</a> or a <a href="#creating-a-syntax-theme">brand new theme</a> as the starting point for your creation. The guide below applies only to situations where you want to create a package that closely resembles a core Pulsar package.</p></div><h3 id="creating-your-new-package" tabindex="-1"><a class="header-anchor" href="#creating-your-new-package" aria-hidden="true">#</a> Creating Your New Package</h3>',2),zi={href:"https://github.com/pulsar-edit/pulsar/tree/master/packages/one-light-ui",target:"_blank",rel:"noopener noreferrer"},Vi={href:"https://github.com/pulsar-edit/pulsar/archive/master.zip",target:"_blank",rel:"noopener noreferrer"},Hi=t("<li><p>Unzip the file to a temporary location (for example <strong><em>LNX/MAC</em></strong>: <code>/tmp/pulsar</code> - <strong><em>WIN</em></strong>: <code>C:\\TEMP\\pulsar</code>)</p></li><li><p>Copy the contents of the desired package into a working directory for your fork</p></li>",2),Gi=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[n("$ "),e("span",{class:"token function"},"cp"),n(),e("span",{class:"token parameter variable"},"-R"),n(` /tmp/pulsar/packages/one-light-ui ~/src/one-light-ui-plus
$ `),e("span",{class:"token builtin class-name"},"cd"),n(` ~/src/one-light-ui-plus
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),$i=e("div",{class:"language-bash ext-sh line-numbers-mode"},[e("pre",{class:"language-bash"},[e("code",null,[n("$ "),e("span",{class:"token function"},"cp"),n(),e("span",{class:"token parameter variable"},"-R"),n(` /tmp/pulsar/packages/one-light-ui ~/src/one-light-ui-plus
$ `),e("span",{class:"token builtin class-name"},"cd"),n(` ~/src/one-light-ui-plus

`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),Bi=e("div",{class:"language-powershell ext-powershell line-numbers-mode"},[e("pre",{class:"language-powershell"},[e("code",null,[n("$ "),e("span",{class:"token function"},"Copy-Item"),n(),e("span",{class:"token operator"},"-"),n("Path "),e("span",{class:"token string"},'"C:\\TEMP\\pulsar\\packages\\one-light-ui"'),n(),e("span",{class:"token operator"},"-"),n("Destination "),e("span",{class:"token string"},'"C:\\src\\one-light-ui-plus"'),n(),e("span",{class:"token operator"},"-"),n("Recurse "),e("span",{class:"token operator"},"-"),n(`Force
$ cd C:\\src\\one-light-ui-plus
`)])]),e("div",{class:"line-numbers","aria-hidden":"true"},[e("div",{class:"line-number"}),e("div",{class:"line-number"})])],-1),Xi=t(`<ol start="4"><li>Create a local repository and commit the initial contents</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> init
$ <span class="token function">git</span> commit <span class="token parameter variable">-am</span> <span class="token string">&quot;Import core Pulsar package&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li><p>Update the <code>name</code> property in <code>package.json</code> to give your package a unique name</p></li><li><p>Make the other customizations that you have in mind</p></li><li><p>Commit your changes</p></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> commit <span class="token parameter variable">-am</span> <span class="token string">&quot;Apply initial customizations&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,4),Ji={start:"8"},Ki={href:"https://help.github.com/articles/create-a-repo/",target:"_blank",rel:"noopener noreferrer"},Zi=e("li",null,[e("p",null,"Follow the instructions in the github.com UI to push your code to your new online repository")],-1),Qi=e("li",null,[e("p",null,[n("Follow the steps in the "),e("a",{href:"#publishing"},"Publishing guide"),n(" to publish your new package")])],-1),el=t('<h3 id="merging-upstream-changes-into-your-package" tabindex="-1"><a class="header-anchor" href="#merging-upstream-changes-into-your-package" aria-hidden="true">#</a> Merging Upstream Changes into Your Package</h3><p>The code in the original package will continue to evolve over time, either to fix bugs or to add new enhancements. You may want to incorporate some or all of those updates into your package. To do so, you can follow <a href="#maintaining-a-fork-of-a-core-package">these steps</a> for merging upstream changes into your package.</p><h2 id="maintaining-a-fork-of-a-core-package" tabindex="-1"><a class="header-anchor" href="#maintaining-a-fork-of-a-core-package" aria-hidden="true">#</a> Maintaining a Fork of a Core Package</h2>',3),nl={href:"https://github.com/atom/atom/blob/master/docs/rfcs/003-consolidate-core-packages.md",target:"_blank",rel:"noopener noreferrer"},al={href:"https://github.com/atom/atom",target:"_blank",rel:"noopener noreferrer"},sl={href:"https://github.com/atom/one-light-ui",target:"_blank",rel:"noopener noreferrer"},tl={href:"https://github.com/pulsar-edit/one-light-ui",target:"_blank",rel:"noopener noreferrer"},ol=e("code",null,"packages/one-light-ui",-1),il={href:"https://github.com/pulsar-edit/pulsar/blob/master/packages/README.md",target:"_blank",rel:"noopener noreferrer"},ll=e("p",null,"If you forked one of the core packages before it was moved into the atom/atom or pulsar-edit/pulsar repository, and you want to continue merging upstream changes into your fork, please follow the steps below.",-1),rl=e("h3",{id:"step-by-step-guide",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#step-by-step-guide","aria-hidden":"true"},"#"),n(" Step-by-step guide")],-1),pl={href:"https://github.com/pulsar-edit/one-light-ui",target:"_blank",rel:"noopener noreferrer"},cl=e("code",null,"one-light-ui-plus",-1),ul=t(`<h4 id="add-pulsar-edit-pulsar-as-a-remote" tabindex="-1"><a class="header-anchor" href="#add-pulsar-edit-pulsar-as-a-remote" aria-hidden="true">#</a> Add pulsar-edit/pulsar as a Remote</h4><p>Navigate to your local clone of your fork:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> path/to/your/fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),dl={href:"https://github.com/pulsar-edit/pulsar",target:"_blank",rel:"noopener noreferrer"},hl=t(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> remote <span class="token function">add</span> upstream https://github.com/pulsar-edit/pulsar.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="get-the-latest-changes-for-the-core-package" tabindex="-1"><a class="header-anchor" href="#get-the-latest-changes-for-the-core-package" aria-hidden="true">#</a> Get the Latest Changes for the Core Package</h4><div class="custom-container tip"><p class="custom-container-title">Tip</p><p>Follow these steps each time you want to merge upstream changes into your fork.</p></div><p>Fetch the latest changes from the pulsar-edit/pulsar repository:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> fetch upstream
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Identify recent changes to the core package. For example, if you&#39;re maintaining a fork of the one-light-ui package, then you&#39;ll want to identify recent changes in the <code>packages/one-light-ui</code> directory:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> log <span class="token parameter variable">--oneline</span> upstream/master -- packages/one-light-ui
f884f6de8 <span class="token punctuation">[</span>themes<span class="token punctuation">]</span> Rename A<span class="token punctuation">[</span>a<span class="token punctuation">]</span>tom -<span class="token operator">&gt;</span> P<span class="token punctuation">[</span>p<span class="token punctuation">]</span>ulsar
0db3190f4 Additional rebranding where needed
234adb874 Remove deprecated code strings
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Look through the log and identify the commits that you want to merge into your fork.</p><h4 id="merge-upstream-changes-into-your-fork" tabindex="-1"><a class="header-anchor" href="#merge-upstream-changes-into-your-fork" aria-hidden="true">#</a> Merge Upstream Changes into Your Fork</h4><p>For each commit that you want to bring into your fork, use [<code>git format-patch</code>][https://git-scm.com/docs/git-format-patch] in conjunction with [<code>git am</code>][https://git-scm.com/docs/git-am]. For example, to merge commit <code>f884f6de8</code> into your fork:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">git</span> format-patch <span class="token parameter variable">-1</span> <span class="token parameter variable">--stdout</span> f884f6de8 <span class="token operator">|</span> <span class="token function">git</span> am <span class="token parameter variable">-p3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Repeat this step for each commit that you want to merge into your fork.</p><h2 id="summary-3" tabindex="-1"><a class="header-anchor" href="#summary-3" aria-hidden="true">#</a> Summary</h2><p>If you finished this chapter, you should be an Pulsar-hacking master. We&#39;ve discussed how you should work with JavaScript and CoffeeScript, and how to put it to good use in creating packages. You should also be able to do this in your own created theme now.</p><p>Even when something goes wrong, you should be able to debug this easily. But also fewer things should go wrong, because you are capable of writing great specs for Pulsar.</p><p>In the next chapter, we\u2019ll go into more of a deep dive on individual internal APIs and systems of Pulsar, even looking at some Pulsar source to see how things are really getting done.</p><h2 id="having-trouble" tabindex="-1"><a class="header-anchor" href="#having-trouble" aria-hidden="true">#</a> Having trouble?</h2><p>If you have any issues then please feel free to ask for help from the Pulsar Team or the wider community via any of our <a href="/docs/community">Community areas</a></p>`,18),ml={href:"https://github.com/pulsar-edit/pulsar/issues",target:"_blank",rel:"noopener noreferrer"},kl={href:"https://github.com/pulsar-edit/pulsar/issues/new?assignees=&labels=bug%2Ctriage&projects=&template=bug-report.yml",target:"_blank",rel:"noopener noreferrer"};function gl(vl,bl){const s=d("ExternalLinkIcon"),u=d("Tabs"),c=d("RouterLink");return L(),W("div",null,[U,e("p",null,[n(`Now it's time to come to the "Hackable" part of the Hyper-Hackable Editor. As we've seen throughout the second section, a huge part of Pulsar is made up of bundled packages. If you wish to add some functionality to Pulsar, you have access to the same APIs and tools that the core features of Pulsar has. From the `),e("a",E,[n("tree-view"),a(s)]),n(" to the "),e("a",F,[n("command-palette"),a(s)]),n(" to "),e("a",D,[n("find-and-replace"),a(s)]),n(" functionality, even the most core features of Pulsar are implemented as packages.")]),Y,e("p",null,[n("The Pulsar application code can be found in the "),e("a",z,[n("pulsar-edit/pulsar"),a(s)]),n(" repository.")]),V,H,e("ul",null,[e("li",null,[n("Node.js (version specified in "),e("a",G,[n("pulsar/.nvmrc"),a(s)]),n(", recommended installation is via "),e("a",$,[n("nvm"),a(s)]),n(")")]),B,X,J,K,e("li",null,[e("a",Z,[n("Libsecret"),a(s)]),n(" development headers")])]),Q,a(u,{id:"182",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"core-hacking"},{tab0:o(({title:l,value:r,isActive:p})=>[ee,ne,ae,se,te,oe,ie,le]),tab1:o(({title:l,value:r,isActive:p})=>[re]),tab2:o(({title:l,value:r,isActive:p})=>[e("p",null,[n("Firstly install "),e("a",pe,[n("Visual Studio"),a(s)]),n(" from Microsoft.")])]),_:1}),ce,e("p",null,[n("Install Node.js (using "),ue,n(" - see above) and enable corepack (for "),de,n("). This will install the version of Node.js specified in "),e("a",he,[n("pulsar/.nvmrc"),a(s)]),n(":")]),me,a(u,{id:"252",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"core-hacking"},{tab0:o(({title:l,value:r,isActive:p})=>[ke,ge]),tab1:o(({title:l,value:r,isActive:p})=>[ve,be]),tab2:o(({title:l,value:r,isActive:p})=>[fe,ye]),_:1}),we,_e,xe,a(u,{id:"317",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"core-hacking"},{tab0:o(({title:l,value:r,isActive:p})=>[qe]),tab1:o(({title:l,value:r,isActive:p})=>[Pe]),tab2:o(({title:l,value:r,isActive:p})=>[Te]),_:1}),Ce,e("ol",null,[Ie,e("li",null,[n("Packages that contain stylesheets, such as syntax themes, will have those stylesheets automatically reloaded by the "),e("a",Se,[n("dev-live-reload"),a(s)]),n(" package. This does not live reload JavaScript or CoffeeScript files \u2014 you'll need to reload the window ("),je,n(") to see changes to those.")])]),Ae,i("This whole section needs to be reworked once decaff properly starts on the core"),e("p",null,[n('While much of Pulsar has been converted to JavaScript, a lot of older code is still implemented in CoffeeScript but the process of "decaffeination" is ongoing, to continue this conversion feel free to read '),e("a",Ne,[n("more"),a(s)]),n(". Additionally, Pulsar's default configuration language is CSON, which is based on CoffeeScript. If you don't know CoffeeScript, but you are familiar with JavaScript, you shouldn't have too much trouble. Here is an example of some simple CoffeeScript code:")]),Re,e("p",null,[n("We'll go over examples like this in a bit, but this is what the language looks like. Just about everything you can do with CoffeeScript in Pulsar is also doable in JavaScript. You can brush up on CoffeeScript at "),e("a",Me,[n("coffeescript.org"),a(s)]),n(".")]),e("p",null,[n("Less is an even simpler transition from CSS. It adds a number of useful things like variables and functions to CSS. You can learn about Less at "),e("a",Le,[n("lesscss.org"),a(s)]),n(". Our usage of Less won't get too complex in this book however, so as long as you know basic CSS you should be fine.")]),We,e("div",Oe,[Ue,e("p",null,[n("The default init file for Pulsar has been changed from the previous CoffeeScript "),Ee,n(" file used by Atom to JavaScript. The CoffeeScript file will still work but should you wish to reference the specific version of this document for it then you should look at the "),a(c,{to:"/docs/atom-archive/hacking-atom/#the-init-file"},{default:o(()=>[n("Atom Archive")]),_:1}),n(".")])]),e("p",null,[n("When Pulsar finishes loading, it will evaluate "),Fe,n(" in your "),De,n(": "),Ye,n(" - "),ze,n(": "),Ve,n(" directory, giving you a chance to run JavaScript code to make customizations. Code in this file has full access to "),e("a",He,[n("Pulsar's API"),a(s)]),n("."),i("TODO: Replace link when we have the API documented"),n(" If customizations become extensive, consider creating a package, which we will cover in "),Ge,n(".")]),$e,i("TODO: All API links to be updated when it is documented"),e("p",null,[n("Because "),Be,n(" provides access to Pulsar's API, you can use it to implement useful commands without creating a new package or extending an existing one. Here's a command which uses the "),e("a",Xe,[n("Selection API"),a(s)]),n(" and "),e("a",Je,[n("Clipboard API"),a(s)]),n(" to construct a Markdown link from the selected text and the clipboard contents as the URL:")]),Ke,e("p",null,[n("The simplest way to start a package is to use the built-in package generator that ships with Pulsar. As you might expect by now, this generator is itself a separate package implemented in "),e("a",Ze,[n("package-generator"),a(s)]),n(".")]),Qe,e("div",en,[nn,e("p",null,[n("You may encounter a situation where your package is not loaded. That is because a new package using the same name as an actual package hosted on "),e("a",an,[n("pulsar-edit.dev"),a(s)]),n(' (e.g. "wordcount" and "word-count") is not being loaded as you expected. If you follow our suggestion above of using the '),sn,n(" package name, you "),tn,n(" be safe \u{1F600}")])]),on,e("p",null,[n("Similar to "),e("a",ln,[n("Node modules"),a(s)]),n(", Pulsar packages contain a "),rn,n(' file in their top-level directory. This file contains metadata about the package, such as the path to its "main" module, library dependencies, and manifests specifying the order in which its resources should be loaded.')]),e("p",null,[n("In addition to some of the regular "),e("a",pn,[n("Node "),cn,n(" keys"),a(s)]),n(" available, Pulsar "),un,n(" files have their own additions.")]),dn,e("p",null,[n("Style sheets for your package should be placed in the "),hn,n(" directory. Any style sheets in this directory will be loaded and attached to the DOM when your package is activated. Style sheets can be written as CSS or "),e("a",mn,[n("Less"),a(s)]),n(", but Less is recommended.")]),kn,e("p",null,[n("If you "),gn,n(" need special styling, try to keep only structural styles in the package style sheets. If you "),vn,n(" specify colors and sizing, these should be taken from the active theme's "),e("a",bn,[n("ui-variables.less"),a(s)]),n(".")]),fn,e("p",null,[n("Let's look at the 3 lines we've added. First we get an instance of the current editor object (where our text to count is) by calling "),e("a",yn,[wn,a(s)]),n(". "),i("TODO: Update when API is documented")]),e("p",null,[n("Next we get the number of words by calling "),e("a",_n,[xn,a(s)]),i("TODO: Update when API is documented"),n(" on our new editor object, then splitting that text on whitespace with a regular expression and then getting the length of that array.")]),qn,e("p",null,[n("Under the hood, "),e("a",Pn,[n("Jasmine v1.3"),a(s)]),n(" executes your tests, so you can assume that any DSL available there is also available to your package.")]),Tn,e("p",null,[n("Now that we have our first package written, let's go through examples of other types of packages we can make. This section will guide you though creating a simple command that replaces the selected text with "),e("a",Cn,[n("ascii art"),a(s)]),n('. When you run our new command with the word "cool" selected, it will be replaced with:')]),In,Sn,jn,An,e("p",null,[n("To begin, press "),Nn,n(": "),Rn,n(" - "),Mn,n(": "),Ln,n(" to bring up the "),e("a",Wn,[n("Command Palette"),a(s)]),n('. Type "generate package" and select the "Package Generator: Generate Package" command, just as we did in '),On,n(". Enter "),Un,n(" as the name of the package.")]),En,e("p",null,[n("Next we insert a string into the current text editor with the "),e("a",Fn,[Dn,a(s)]),i("TODO: Replace with API link once documented)"),n(' method. This will insert the text wherever the cursor currently is in the current editor. If there are selections, it will replace all selections with the "Hello, World!" text.')]),Yn,e("p",null,[n("Now we need to convert the selected text to ASCII art. To do this we will use the "),e("a",zn,[n("figlet"),a(s)]),n(" Node module from "),e("a",Vn,[n("npm"),a(s)]),n(". Open "),Hn,n(" and add the latest version of figlet to the dependencies:")]),Gn,e("p",null,[n("There are a couple of new things in this example we should look at quickly. The first is the "),e("a",$n,[Bn,a(s)]),i("TODO: Replace with API link once documented)"),n(" which, as you might guess, returns the text that is currently selected.")]),e("p",null,[n("We then call the Figlet code to convert that into something else and replace the current selection with it with the "),e("a",Xn,[Jn,a(s)]),i("TODO: Replace with API link once documented)"),n(" call.")]),Kn,i("Below was part of this section in the original docs but as Nuclide is retired we either need a new example or remove this entirely"),i(`This system is used by Pulsar's tree view, as well as by third party
packages like [Nuclide](https://nuclide.io) for its console, debugger, outline
view, and diagnostics (linter results).`),e("p",null,[n("For this package, we'll define a workspace item that tells us some information about our active text editor. The final package can be viewed at "),e("a",Zn,[n("https://github.com/pulsar-edit/active-editor-info"),a(s)]),n(".")]),Qn,e("p",null,[n("To begin, press "),ea,n(": "),na,n(" - "),aa,n(": "),sa,n(" to bring up the "),e("a",ta,[n("Command Palette"),a(s)]),n('. Type "generate package" and select the '),oa,n(" command, just as we did in "),ia,n(". Enter "),la,n(" as the name of the package.")]),ra,e("p",null,[n("Pulsar's interface is rendered using HTML, and it's styled via "),e("a",pa,[n("Less"),a(s)]),n(" which is a superset of CSS. Don't worry if you haven't heard of Less before; it's just like CSS, but with a few handy extensions.")]),ca,e("ul",null,[e("li",null,[n("Less is a superset of CSS, but it has some really handy features like variables. If you aren't familiar with its syntax, take a few minutes to "),e("a",ua,[n("familiarize yourself"),a(s)]),n(".")]),da,e("li",null,[n("You can find existing themes to install or fork in "),e("a",ha,[n("Pulsar Package Repository"),a(s)]),n(". "),i("TODO: Update to a themes URL if we get one on the front end site")])]),ma,e("ol",null,[e("li",null,[n("Fork the "),e("a",ka,[n("ui-theme-template"),a(s)])]),ga]),va,e("ul",null,[e("li",null,[e("a",ba,[n("ui-variables.less"),a(s)])]),e("li",null,[e("a",fa,[n("syntax-variables.less"),a(s)])])]),ya,wa,_a,e("p",null,[n("Your package should generally only specify structural styling, and these should come from "),e("a",xa,[n("the style guide"),a(s)]),n(". Your package shouldn't specify colors, padding sizes, or anything in absolute pixels. You should instead use the theme variables. If you follow this guideline, your package will look good out of the box with any theme!")]),qa,e("p",null,[n("Reloading by pressing "),Pa,n(": "),Ta,n(" - "),Ca,n(": "),Ia,n(" after you make changes to your theme is less than ideal. Pulsar supports "),e("a",Sa,[n("live updating"),a(s)]),n(" of styles on Pulsar windows in Dev Mode.")]),ja,e("p",null,[n("Check out Google's "),e("a",Aa,[n("extensive tutorial"),a(s)]),n(" for a short introduction.")]),Na,e("p",null,[n("If you are creating an UI theme, you'll want a way to see how your theme changes affect all the components in the system. The "),e("a",Ra,[n("Styleguide"),a(s)]),n(" is a page that renders every component Pulsar supports.")]),Ma,e("p",null,[n("Follow the steps on the "),a(c,{to:"/docs/launch-manual/sections/core-hacking/#publishing/"},{default:o(()=>[n("Publishing")]),_:1}),n(" page. The example used is for the Word Count package, but publishing a theme works exactly the same.")]),La,i("This may need to be thoroughly reworked if we change the tree-sitter implementation"),e("p",null,[n("Pulsar's syntax highlighting and code folding system is powered by "),e("a",Wa,[n("Tree-sitter"),a(s)]),n(". Tree-sitter parsers create and maintain full "),e("a",Oa,[Ua,a(s)]),n(" representing your code.")]),Ea,e("p",null,[n("Tree-sitter generates parsers based on "),e("a",Fa,[n("context-free grammars"),a(s)]),n(" that are typically written in JavaScript. The generated parsers are C libraries that can be used in other applications as well as Pulsar.")]),e("p",null,[n("They can also be developed and tested at the command line, separately from Pulsar. Tree-sitter has "),e("a",Da,[n("its own documentation page"),a(s)]),n(" on how to create these parsers. The "),e("a",Ya,[n("Tree-sitter GitHub organization"),a(s)]),n(" also contains a lot of example parsers that you can learn from, each in its own repository.")]),e("p",null,[n("Once you have created a parser, you need to publish it to "),e("a",za,[n("the NPM registry"),a(s)]),n(" to use it in Pulsar. To do this, make sure you have a "),Va,n(" and "),Ha,n(" in your parser's "),Ga,n(":")]),$a,e("ul",null,[Ba,Xa,e("li",null,[Ja,n(" - The name of the parser node module that will be used for parsing. This string will be passed directly to "),e("a",Ka,[Za,a(s)]),n(" in order to load the parser.")]),Qa]),es,e("p",null,[n("Note that in this selector, we're using the "),e("a",ns,[n("immediate child combinator"),a(s)]),n(" ("),as,n("). Arbitrary descendant selectors without this combinator (for example "),ss,n(", which would match any "),ts,n(" occurring anywhere within a "),os,n(") are currently not supported.")]),is,e("p",null,[n("You can use the "),e("a",ls,[rs,n(" pseudo-class"),a(s)]),n(" to select nodes based on their order within their parent. For example, this example selects "),ps,n(" nodes which are the fourth (zero-indexed) child of a "),cs,n(" node.")]),us,e("p",null,[n("Finally, you can use double-quoted strings in the selectors to select "),ds,n(" tokens in the syntax tree, like "),hs,n(" and "),ms,n(". See "),e("a",ks,[n("the Tree-sitter documentation"),a(s)]),n(" for more information about named vs anonymous tokens.")]),gs,e("p",null,[n("If multiple selectors in the "),vs,n(" object match a node, the node's classes will be decided based on the "),e("a",bs,[n("most specific"),a(s)]),n(" selector. Note that the "),fs,n(" and "),ys,n(" rules do "),ws,n(" affect specificity, so you may need to supply the same "),_s,n(" or "),xs,n(" rules for multiple selectors to ensure that they take precedence over other selectors. You can use the same selector multiple times in a scope mapping, within different comma-separated keys:")]),qs,e("p",null,[n("For example, in JavaScript, "),e("a",Ps,[n("tagged template literals"),a(s)]),n(" sometimes contain code written in a different language, and the name of the language is often used in the 'tag' function, as shown in this example:")]),Ts,e("ul",null,[e("li",null,[e("a",Cs,[n("Bash"),a(s)])]),e("li",null,[e("a",Is,[n("C"),a(s)])]),e("li",null,[e("a",Ss,[n("Go"),a(s)])]),e("li",null,[e("a",js,[n("HTML"),a(s)])]),e("li",null,[e("a",As,[n("JavaScript"),a(s)])]),e("li",null,[e("a",Ns,[n("Python"),a(s)])]),e("li",null,[e("a",Rs,[n("Ruby"),a(s)])]),e("li",null,[e("a",Ms,[n("TypeScript"),a(s)])])]),Ls,e("p",null,[n("Grammar files are written in the "),e("a",Ws,[n("CSON"),a(s)]),n(" or "),e("a",Os,[n("JSON"),a(s)]),n(" format. Whichever one you decide to use is up to you, but this tutorial will be written in CSON.")]),Us,e("p",null,[n("The default package template creates a lot of folders that aren't needed for grammar packages. Go ahead and delete the "),Es,n(", "),Fs,n(", "),Ds,n(", and "),Ys,n(" folders. Furthermore, in "),zs,n(", remove the "),Vs,n(" section. Now create a new folder called "),Hs,n(", and inside that a file called "),Gs,n(". This is the main file that we will be working with - start by populating it with a "),e("a",$s,[n("boilerplate template"),a(s)]),n(". Now let's go over what each key means.")]),Bs,e("p",null,[Xs,n(" is where your regex is contained, and "),Js,n(" is the scope name that is to be applied to the entirety of the match. More information about scope names can be found in "),e("a",Ks,[n("Section 12.4 of the TextMate Manual"),a(s)]),n(".")]),Zs,e("ul",null,[e("li",null,[e("a",Qs,[n("DamnedScholar's Gist"),a(s)]),n(". Provides a template of most keys, each with a short comment explaining their function.")]),e("li",null,[e("a",et,[n("Aerijo's Gist"),a(s)]),n(". Another guide that attempts to fully explain making a grammar package for users of all levels.")]),e("li",null,[e("a",nt,[n("http://www.apeth.com/nonblog/stories/textmatebundle.html"),a(s)]),n(". A blog of a programmer's experience writing a grammar package for TextMate.")]),e("li",null,[e("a",at,[n("Oniguruma docs"),a(s)]),n(". The documentation for the regex engine Pulsar uses.")]),e("li",null,[e("a",st,[n("TextMate Section 12"),a(s)]),n(". Pulsar uses the same principles as laid out here, including the list of acceptable scopes.")]),e("li",null,[e("a",tt,[ot,a(s)]),n(". Not necessary to write a grammar, but a good technical reference for what Pulsar is doing behind the scenes.")]),e("li",null,[n("Look at any existing packages, such as the ones for "),e("a",it,[n("Python"),a(s)]),n(", "),e("a",lt,[n("JavaScript"),a(s)]),n(", "),e("a",rt,[n("HTML"),a(s)]),n(", "),e("a",pt,[n("and more"),a(s)]),n(".")])]),i(` (This is left from the original Atom flight-manual)
TODO:
* \`repository\` and including from repository patterns
* Wrap-up
* Implement Package Generator functionality to generate a grammar
* Intermediate + advanced grammar tutorials
`),ct,e("p",null,[n("It's possible that you have themes or grammars from "),e("a",ut,[n("TextMate"),a(s)]),n(" that you like and use and would like to convert to Pulsar. If so, you're in luck because there are tools to help with the conversion.")]),dt,ht,e("p",null,[n("Let's convert the TextMate bundle for the "),e("a",mt,[n("R"),a(s)]),n(" programming language. You can find other existing TextMate bundles "),e("a",kt,[n("on GitHub"),a(s)]),n(".")]),gt,e("p",null,[n("This section will go over how to convert a "),e("a",vt,[n("TextMate"),a(s)]),n(" theme to an Pulsar theme.")]),bt,e("p",null,[n("TextMate themes use "),e("a",ft,[n("plist"),a(s)]),n(" files while Pulsar themes use "),e("a",yt,[n("CSS"),a(s)]),n(" or "),e("a",wt,[n("Less"),a(s)]),n(" to style the UI and syntax in the editor.")]),_t,e("p",null,[n("Pulsar bundles a command line utility called "),xt,n(" which we first used back in "),a(c,{to:"/docs/launch-manual/sections/using-pulsar/#command-line"},{default:o(()=>[n("Command Line")]),_:1}),n(" to search for and install packages via the command line. This is invoked by using the "),qt,n(" command with the "),Pt,n(" or "),Tt,n(" option. The "),Ct,n(" command can also be used to publish Pulsar packages to the public registry and update them.")]),It,St,jt,e("ul",null,[At,e("li",null,[n("Your "),Nt,n(),Rt,n(" field is "),e("a",Mt,[n("Semver V2"),a(s)]),n(" compliant.")]),Lt,e("li",null,[n("Your package is in a Git repository that has been pushed to "),e("a",Wt,[n("GitHub"),a(s)]),n(". Follow "),e("a",Ot,[n("this guide"),a(s)]),n(" if your package isn't already on GitHub.")])]),Ut,e("p",null,[n("Before you publish a package it is a good idea to check ahead of time if a package with the same name has already been published to "),e("a",Et,[n("the Pulsar Package Repository"),a(s)]),n(". You can do that by visiting "),Ft,n(" to see if the package already exists. If it does, update your package's name to something that is available before proceeding.")]),Dt,e("ol",null,[Yt,zt,e("li",null,[n("Creates a new "),e("a",Vt,[n("Git tag"),a(s)]),n(" for the version being published.")]),Ht,Gt]),$t,i(" TODO: Rewrite this Section once Authentication Information is Public "),e("p",null,[n("If this is the first package you are publishing, the "),Bt,n(" command may prompt you for your GitHub username and password. If you have two-factor authentication enabled, use a "),e("a",Xt,[n("personal access token"),a(s)]),n(" in lieu of a password. This is required to publish and you only need to enter this information the first time you publish. The credentials are stored securely in your "),e("a",Jt,[n("keychain"),a(s)]),n(" once you login.")]),Kt,e("p",null,[n("Check out "),e("a",Zt,[n("semantic versioning"),a(s)]),n(" to learn more about best practices for versioning your package releases.")]),Qt,eo,e("p",null,[n("Pulsar comes bundled with the "),e("a",no,[n("Octicons 4.4.0"),a(s)]),n(" icon set. Use them to add icons to your packages.")]),ao,e("p",null,[n("Although icons can make your UI visually appealing, when used without a text label, it can be hard to guess its meaning. In cases where space for a text label is insufficient, consider adding a "),e("a",so,[n("tooltip"),a(s)]),i("TODO: Needs updating once we have the API documented"),n(" that appears on hover. Or a more subtle "),to,n(" attribute would help as well.")]),oo,e("p",null,[n("Pulsar provides several tools to help you understand unexpected behavior and debug problems. This guide describes some of those tools and a few approaches to help you debug and provide more helpful information when "),e("a",io,[n("submitting issues"),a(s)]),n(":")]),lo,i("The below does not exist yet, uncomment or update when it is"),i("Then check for the [latest released version](https://github.com/pulsar-edit/pulsar/releases/latest)."),e("p",null,[n("You can find the latest releases on the "),e("a",ro,[n("Pulsar Website"),a(s)]),n(", follow the links for either the latest release or Cirrus CI version. Make sure to mention which version when logging an issue.")]),i(` TODO: This section may need re-instating once/if we have auto-updates working again
::: tabs#Updating

@tab Linux

To update to the latest version, you can download it from
[the Pulsar website](https://pulsar-edit.dev/) or [the latest release on GitHub](https://github.com/atom/atom/releases/latest)
and follow the [Installation instructions for Pulsar on Linux](../../getting-started/#installing-pulsar).

@tab macOS

If there is a more recent release available, you can update to the most recent
release with the auto-update functionality built in to Pulsar and the
[about package](https://github.com/pulsar-edit/pulsar/tree/master/packages/about).
You can open the About View by using the _Pulsar > About_ menu option to see
whether Pulsar is up-to-date, downloading a new update or click the button to
"Restart and Install Update".

@tab Windows

If there is a more recent release available, you can update to the most recent
release with the auto-update functionality built in to Pulsar and the
[about package](https://github.com/pulsar-edit/pulsar/tree/master/packages/about).
You can open the About View by using the _Help > About_ menu option to see
whether Pulsar is up-to-date, downloading a new update or click the button to
"Restart and Install Update".

:::

`),po,a(u,{id:"2174",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"debugging"},{tab0:o(({title:l,value:r,isActive:p})=>[co]),tab1:o(({title:l,value:r,isActive:p})=>[uo]),tab2:o(({title:l,value:r,isActive:p})=>[ho]),_:1}),mo,e("p",null,[n("If you have packages installed that use native Node modules, when you upgrade to a new version of Pulsar, they might need to be rebuilt. Pulsar detects this and through the "),e("a",ko,[n("incompatible-packages package"),a(s)]),n(" displays an indicator in the status bar when this happens.")]),go,vo,bo,fo,e("p",null,[n("Open Pulsar's "),e("a",yo,[n("Settings View"),a(s)]),n(" with "),wo,n(": "),_o,n(" - "),xo,n(": "),qo,n(", the "),Po,n(": "),To,n(" - "),Co,n(": "),Io,n(" - "),So,n(": "),jo,n(" menu option, or the "),Ao,n(" command from the "),e("a",No,[n("Command Palette"),a(s)]),n(".")]),Ro,e("p",null,[n("Check Pulsar's settings in the Settings View, there's a description of most configuration options in the "),a(c,{to:"/docs/launch-manual/sections/using-pulsar/#configuration-key-reference"},{default:o(()=>[n("Basic Customization section")]),_:1}),n('. For example, if you want Pulsar to hide the invisible symbols representing whitespace characters, disable the "Show Invisibles" option.')]),Mo,e("p",null,[n("Since Pulsar ships with a set of packages and you can also install additional packages yourself, check the list of packages and their settings. For instance, if you'd like to get rid of the vertical line in the middle of the editor, disable the "),e("a",Lo,[n("Wrap Guide package"),a(s)]),n(". And if you don't like it when Pulsar strips trailing whitespace or ensures that there's a single trailing newline in the file, you can configure that in the "),e("a",Wo,[n("whitespace package's"),a(s)]),n(" settings.")]),Oo,Uo,e("p",null,[n("You might have defined some custom styles, keymaps or snippets in "),a(c,{to:"/docs/launch-manual/sections/using-pulsar/#basic-customization/"},{default:o(()=>[n("one of your configuration files")]),_:1}),n(". In some situations, these personal hacks might be causing the unexpected behavior you're observing so try clearing those files and restarting Pulsar.")]),Eo,e("p",null,[n("If a command is not executing when you press a key combination or the wrong command is executing, there might be an issue with the keybinding for that combination. Pulsar ships with the "),e("a",Fo,[n("Keybinding Resolver"),a(s)]),n(", a neat package which helps you understand what key Pulsar saw you press and the command that was triggered because of it.")]),Do,e("p",null,[n("If multiple keybindings are matched, Pulsar determines which keybinding will be executed based on the "),a(c,{to:"/docs/launch-manual/sections/behind-pulsar/#specificity-and-cascade-order"},{default:o(()=>[n("specificity of the selectors and the order in which they were loaded")]),_:1}),n(". If the command you wanted to trigger is listed in the Keybinding Resolver, but wasn't the one that was executed, this is normally explained by one of two causes:")]),Yo,e("p",null,[n("Pulsar loads core Pulsar keybindings and package keybindings first, and user-defined keybindings last. Since user-defined keybindings are loaded last, you can use your "),zo,n(" file to tweak the keybindings and sort out problems like these. See the "),a(c,{to:"/docs/launch-manual/sections/behind-pulsar/#keymaps-in-depth"},{default:o(()=>[n("Keymaps in Depth section")]),_:1}),n(" for more information.")]),e("p",null,[n("If you notice that a package's keybindings are taking precedence over core Pulsar keybindings, it might be a good idea to report the issue on that package's GitHub repository. You can contact Pulsar maintainers on "),e("a",Vo,[n("Pulsar's github discussions"),a(s)]),n(".")]),Ho,e("p",null,[n("You can determine which fonts are being used to render a specific piece of text by using the Developer Tools. To open the Developer Tools press "),Go,n(": "),$o,n(" - "),Bo,n(": "),Xo,n('. Once the Developer Tools are open, click the "Elements" tab. Use the '),e("a",Jo,[n("standard tools for finding the element"),a(s)]),n(' containing the text you want to check. Once you have selected the element, you can click the "Computed" tab in the styles pane and scroll to the bottom. The list of fonts being used will be shown there:')]),Ko,a(u,{id:"2351",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"debugging"},{tab0:o(({title:l,value:r,isActive:p})=>[Zo]),tab1:o(({title:l,value:r,isActive:p})=>[Qo,ei,ni]),tab2:o(({title:l,value:r,isActive:p})=>[ai]),_:1}),si,e("p",null,[n("If Pulsar is taking a long time to start, you can use the "),e("a",ti,[n("Timecop package"),a(s)]),n(" to get insight into where Pulsar spends time while loading.")]),oi,ii,li,ri,pi,e("p",null,[n("If you're experiencing performance problems in a particular situation, your "),e("a",ci,[n("Issue reports"),a(s)]),n(" will be more valuable if you include a saved profile from Chrome's CPU profiler that gives some insight into what is slow.")]),ui,e("p",null,[n("To learn more, check out the "),e("a",di,[n("Chrome documentation on CPU profiling"),a(s)]),n(".")]),hi,e("p",null,[n("Pulsar uses "),e("a",mi,[n("Jasmine"),a(s)]),n(" as its spec framework. Any new functionality should have specs to guard against regressions.")]),ki,e("p",null,[e("a",gi,[n("Pulsar specs"),a(s)]),n(" and "),e("a",vi,[n("package specs"),a(s)]),n(" are added to their respective "),bi,n(" directory. The example below creates a spec for Pulsar core.")]),fi,e("p",null,[n("The best way to learn about expectations is to read the "),e("a",yi,[n("Jasmine documentation"),a(s)]),n(" about them. Below is a simple example.")]),wi,e("ul",null,[e("li",null,[e("a",_i,[n("jasmine-jquery"),a(s)])]),xi]),e("p",null,[n("These are defined in "),e("a",qi,[n("spec/spec-helper.js"),a(s)]),n(".")]),Pi,e("p",null,[n("For a more detailed documentation on asynchronous tests please visit the "),e("a",Ti,[n("Jasmine documentation"),a(s)]),n(".")]),Ci,e("p",null,[n("It is now easy to run the specs in a CI environment like Travis and AppVeyor. See the "),e("a",Ii,[n("Travis CI For Your Packages"),a(s)]),n(" and "),e("a",Si,[n("AppVeyor CI For Your Packages"),a(s)]),n(" posts for more details.")]),ji,e("p",null,[n("Now that we've told Pulsar that we want our package to handle URIs beginning with "),Ai,n(" via our "),Ni,n(" method, we need to actually write this method. Pulsar passes two arguments to your URI handler method; the first one is the fully-parsed URI plus query string, "),e("a",Ri,[n("parsed with Node's "),Mi,a(s)]),n(". The second argument is the raw, string URI; this is normally not needed since the first argument gives you structured information about the URI.")]),Li,e("p",null,[n("Creation and deletion operations may take a few milliseconds to complete. If you need to remove many files and folders consider "),e("a",Wi,[n("RimRAF"),a(s)]),n(" which has built-in retry logic for this.")]),Oi,e("p",null,[n("If you discover a bug or issue with an official Pulsar package then feel free to open up the issue in that specific repository instead. When in doubt just open the issue on the "),e("a",Ui,[n("pulsar-edit/pulsar"),a(s)]),n(" repository but be aware that it may get transferred to the proper package's repository.")]),Ei,e("p",null,[n("Several of Pulsar's core packages are maintained in the "),e("a",Fi,[Di,n(" directory of the pulsar-edit/pulsar repository"),a(s)]),n(". If you would like to use one of these packages as a starting point for your own package, please follow the steps below.")]),Yi,i("Could this be made better with GH CLI?"),e("p",null,[n("For the sake of this guide, let's assume that you want to start with the current code in the "),e("a",zi,[n("one-light-ui"),a(s)]),n(' package, make some customizations to it, and publish your new package under the name "one-light-ui-plus".')]),e("ol",null,[e("li",null,[e("p",null,[n("Download the "),e("a",Vi,[n("current contents of the pulsar-edit/pulsar repository as a zip file"),a(s)])])]),Hi]),a(u,{id:"3062",data:[{title:"Linux"},{title:"macOS"},{title:"Windows"}],"tab-id":"core-hacking"},{tab0:o(({title:l,value:r,isActive:p})=>[Gi]),tab1:o(({title:l,value:r,isActive:p})=>[$i]),tab2:o(({title:l,value:r,isActive:p})=>[Bi]),_:1}),Xi,e("ol",Ji,[e("li",null,[e("p",null,[e("a",Ki,[n("Create a public repository on github.com"),a(s)]),n(" for your new package")])]),Zi,Qi]),el,e("p",null,[n("Originally, each of Atom's core packages resided in a separate repository. In 2018, in an effort to streamline the development of Atom by reducing overhead, the Atom team "),e("a",nl,[n("consolidated many core Atom packages"),a(s)]),n(" into the "),e("a",al,[n("atom/atom repository"),a(s)]),n(". For example, the one-light-ui package was originally maintained in the "),e("a",sl,[n("atom/one-light-ui"),a(s)]),n(" repository, but was moved to the "),e("a",tl,[ol,n(" directory"),a(s)]),n(" in the main repository.")]),e("p",null,[n("The Pulsar team has continued this trend and has move even more packages into the core, particularly default language packages. A list of these packages moved can be found in "),e("a",il,[n("this document"),a(s)]),n(".")]),ll,rl,e("p",null,[n("For the sake of this guide, let's assume that you forked the "),e("a",pl,[n("pulsar-edit/one-light-ui"),a(s)]),n(" repository, renamed your fork to "),cl,n(", and made some customizations.")]),ul,e("p",null,[n("Add the "),e("a",dl,[n("pulsar-edit/pulsar repository"),a(s)]),n(" as a git remote:")]),hl,e("p",null,[n("If you think you have found a bug then please have a look through our existing "),e("a",ml,[n("issues"),a(s)]),n(" and if you can't find anything then please "),e("a",kl,[n("create a new bug report"),a(s)]),n(".")])])}const Pl=M(O,[["render",gl],["__file","index.html.vue"]]);export{Pl as default};
